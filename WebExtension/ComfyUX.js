/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
import * as __WEBPACK_EXTERNAL_MODULE__scripts_api_js_7e0dfeef__ from "../../scripts/api.js";

import * as __WEBPACK_EXTERNAL_MODULE__scripts_app_js_80311772__ from "../../scripts/app.js";

import * as __WEBPACK_EXTERNAL_MODULE__scripts_ui_js_7b781880__ from "../../scripts/ui.js";

/******/ var __webpack_modules__ = {
    /***/ "./WebExtension/ComfyUIConnector.js": 
    /*!******************************************!*\
  !*** ./WebExtension/ComfyUIConnector.js ***!
  \******************************************/
    /***/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
        eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ComnfyAppClass: () => (/* binding */ ComnfyAppClass),\n/* harmony export */   ComnfyUIapi: () => (/* binding */ ComnfyUIapi),\n/* harmony export */   ComnfyUIapp: () => (/* binding */ ComnfyUIapp),\n/* harmony export */   ComnfyUIui: () => (/* binding */ ComnfyUIui),\n/* harmony export */   staticPath: () => (/* binding */ staticPath)\n/* harmony export */ });\n/* harmony import */ var _scripts_app_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../scripts/app.js */ "../../scripts/app.js");\n/* harmony import */ var _scripts_api_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../scripts/api.js */ "../../scripts/api.js");\n/* harmony import */ var _scripts_ui_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../scripts/ui.js */ "../../scripts/ui.js");\n//【Important】all import here need to be webpack.config.js externals\n\n\n\n\n\nvar ComnfyUIapp = _scripts_app_js__WEBPACK_IMPORTED_MODULE_0__.app;\nvar ComnfyUIapi = _scripts_api_js__WEBPACK_IMPORTED_MODULE_1__.api;\nvar ComnfyUIui = _scripts_ui_js__WEBPACK_IMPORTED_MODULE_2__.ComfyUI;\nvar ComnfyAppClass = _scripts_app_js__WEBPACK_IMPORTED_MODULE_0__.ComfyApp;\n\n//get this from __init__.py > server.PromptServer.instance.app.router.add_static()\nvar staticPath = \'/ComfyUXStatic/\';\n\n//# sourceURL=webpack://comfyux-dev/./WebExtension/ComfyUIConnector.js?');
        /***/    },
    /***/ "./WebExtension/ComfyUX.js": 
    /*!*********************************!*\
  !*** ./WebExtension/ComfyUX.js ***!
  \*********************************/
    /***/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
        eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ComfyUXi18n: () => (/* binding */ ComfyUXi18n),\n/* harmony export */   NodeListOfSidebar: () => (/* binding */ NodeListOfSidebar),\n/* harmony export */   NodeNullCount: () => (/* binding */ NodeNullCount),\n/* harmony export */   clearAll: () => (/* binding */ clearAll),\n/* harmony export */   favWidgetCount: () => (/* binding */ favWidgetCount)\n/* harmony export */ });\n/* harmony import */ var _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ComfyUIConnector.js */ \"./WebExtension/ComfyUIConnector.js\");\n/* harmony import */ var _Sidebar_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Sidebar.js */ \"./WebExtension/Sidebar.js\");\n/* harmony import */ var _Topbar_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Topbar.js */ \"./WebExtension/Topbar.js\");\n/* harmony import */ var _component_js_dropdown_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./component/js/dropdown.js */ \"./WebExtension/component/js/dropdown.js\");\n/* harmony import */ var _component_js_button_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./component/js/button.js */ \"./WebExtension/component/js/button.js\");\n/* harmony import */ var _component_js_switch_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./component/js/switch.js */ \"./WebExtension/component/js/switch.js\");\n/* harmony import */ var _component_js_numinput_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./component/js/numinput.js */ \"./WebExtension/component/js/numinput.js\");\n/* harmony import */ var _component_js_multiinput_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./component/js/multiinput.js */ \"./WebExtension/component/js/multiinput.js\");\n/* harmony import */ var _component_js_combo_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./component/js/combo.js */ \"./WebExtension/component/js/combo.js\");\n/* harmony import */ var _component_js_singleinput_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./component/js/singleinput.js */ \"./WebExtension/component/js/singleinput.js\");\n/* harmony import */ var _component_js_searchbox_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./component/js/searchbox.js */ \"./WebExtension/component/js/searchbox.js\");\n/* harmony import */ var _i18n_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./i18n.js */ \"./WebExtension/i18n.js\");\n/* harmony import */ var _gtag_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./gtag.js */ \"./WebExtension/gtag.js\");\nfunction _toConsumableArray(r) { return _arrayWithoutHoles(r) || _iterableToArray(r) || _unsupportedIterableToArray(r) || _nonIterableSpread(); }\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _iterableToArray(r) { if (\"undefined\" != typeof Symbol && null != r[Symbol.iterator] || null != r[\"@@iterator\"]) return Array.from(r); }\nfunction _arrayWithoutHoles(r) { if (Array.isArray(r)) return _arrayLikeToArray(r); }\nfunction _createForOfIteratorHelper(r, e) { var t = \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"]; if (!t) { if (Array.isArray(r) || (t = _unsupportedIterableToArray(r)) || e && r && \"number\" == typeof r.length) { t && (r = t); var _n = 0, F = function F() {}; return { s: F, n: function n() { return _n >= r.length ? { done: !0 } : { done: !1, value: r[_n++] }; }, e: function e(r) { throw r; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var o, a = !0, u = !1; return { s: function s() { t = t.call(r); }, n: function n() { var r = t.next(); return a = r.done, r; }, e: function e(r) { u = !0, o = r; }, f: function f() { try { a || null == t[\"return\"] || t[\"return\"](); } finally { if (u) throw o; } } }; }\nfunction _unsupportedIterableToArray(r, a) { if (r) { if (\"string\" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return \"Object\" === t && r.constructor && (t = r.constructor.name), \"Map\" === t || \"Set\" === t ? Array.from(r) : \"Arguments\" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }\nfunction _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar NodeListOfSidebar = [];\nvar favWidgetCount = 0;\nvar NodeNullCount = 0;\nvar ComfyUXi18n = new _i18n_js__WEBPACK_IMPORTED_MODULE_11__.i18n();\nvar isStartSync = true;\n_ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_0__.ComnfyUIapp.registerExtension({\n  name: \"ComfyUX.Main\",\n  //Triggered before load graph\n  init: function init() {},\n  addCustomNodeDefs: function addCustomNodeDefs() {},\n  getCustomWidgets: function getCustomWidgets() {},\n  beforeRegisterNodeDef: function beforeRegisterNodeDef() {},\n  registerCustomNodes: function registerCustomNodes() {},\n  beforeConfigureGraph: function beforeConfigureGraph(graphData, missingNodeTypes) {},\n  nodeCreated: function nodeCreated() {},\n  loadedGraphNode: function loadedGraphNode(node) {},\n  afterConfigureGraph: function afterConfigureGraph(missingNodeTypes) {},\n  refreshComboInNodes: function refreshComboInNodes(defs) {},\n  setup: function setup() {\n    console.log(_typeof(LiteGraph.registered_node_types), LiteGraph.registered_node_types);\n    console.log(_typeof(JSON.stringify(LiteGraph.registered_node_types)), JSON.stringify(LiteGraph.registered_node_types));\n    var sidebar = new _Sidebar_js__WEBPACK_IMPORTED_MODULE_1__.Sidebar();\n    var topbar = new _Topbar_js__WEBPACK_IMPORTED_MODULE_2__.Topbar();\n    var ComfuUXgtag = new _gtag_js__WEBPACK_IMPORTED_MODULE_12__.Gtag();\n    // //recreate searchbox\n    LGraphCanvas.prototype.showSearchBox = function (event, options) {\n      // proposed defaults\n      var def_options = {\n        slot_from: null,\n        node_from: null,\n        node_to: null,\n        do_type_filter: LiteGraph.search_filter_enabled // TODO check for registered_slot_[in/out]_types not empty // this will be checked for functionality enabled : filter on slot type, in and out\n        ,\n        type_filter_in: false // these are default: pass to set initially set values\n        ,\n        type_filter_out: false,\n        show_general_if_none_on_typefilter: true,\n        show_general_after_typefiltered: true,\n        hide_on_mouse_leave: LiteGraph.search_hide_on_mouse_leave,\n        show_all_if_empty: true,\n        show_all_on_open: LiteGraph.search_show_all_on_open\n      };\n      options = Object.assign(def_options, options || {});\n      var searchbox = new _component_js_searchbox_js__WEBPACK_IMPORTED_MODULE_10__.Searchbox(event, options);\n    };\n    document.getElementsByClassName('comfy-menu')[0].style.display = 'none';\n    document.getElementsByClassName('comfy-menu-hamburger')[0].style.zIndex = '1';\n    if (document.getElementsByClassName('comfyui-menu').length) {\n      document.getElementsByClassName('comfyui-menu')[0].style.display = 'none';\n    }\n    if (document.getElementsByClassName('comfyui-body-top').length) {\n      document.getElementsByClassName('comfyui-body-top')[0].style.display = 'none';\n    }\n    var timer1 = setInterval(function () {\n      if (document.getElementById('workspaceManagerPanel')) {\n        clearInterval(timer1);\n        document.getElementById('workspaceManagerPanel').style.top = '60px';\n        document.getElementById('workspaceManagerPanel').style.left = '4px';\n      }\n    }, 1000);\n    if (document.getElementsByClassName('pysssss-image-feed').length) {\n      document.getElementsByClassName('pysssss-image-feed')[0].style.display = 'none';\n    }\n    _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_0__.ComnfyUIapp.canvas.onSelectionChange = function (nodes) {\n      var selectNodesArray = Object.values(nodes);\n      if (selectNodesArray.length) {\n        var lastSelectNode = selectNodesArray[0];\n        scrollToNode(lastSelectNode);\n      }\n    };\n\n    //init node to sidebar\n    if (_ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_0__.ComnfyUIapp.graph._nodes) {\n      var _iterator = _createForOfIteratorHelper(_ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_0__.ComnfyUIapp.graph._nodes),\n        _step;\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var node = _step.value;\n          if (node.widgets) {\n            //filter node without widgets\n            initNodeOfSidebar(node, sidebar);\n          }\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n    }\n\n    //sync param between sidebar and graph\n    setInterval(function () {\n      //update images to gallery\n      if (_ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_0__.ComnfyUIapp.graph._nodes) {\n        var _iterator2 = _createForOfIteratorHelper(_ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_0__.ComnfyUIapp.graph._nodes),\n          _step2;\n        try {\n          for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n            var _node = _step2.value;\n            addToGallery(_node, sidebar);\n          }\n        } catch (err) {\n          _iterator2.e(err);\n        } finally {\n          _iterator2.f();\n        }\n      }\n\n      // add node to sidebar\n      // if (ComnfyUIapp.graph._nodes.length > NodeListOfSidebar.length) { \n      var _iterator3 = _createForOfIteratorHelper(_ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_0__.ComnfyUIapp.graph._nodes),\n        _step3;\n      try {\n        for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n          var _node3 = _step3.value;\n          addNodeToSidebar(_node3, sidebar);\n        }\n        // }\n\n        // delete node\n        // if (ComnfyUIapp.graph._nodes.length < NodeListOfSidebar.length) {\n      } catch (err) {\n        _iterator3.e(err);\n      } finally {\n        _iterator3.f();\n      }\n      if (NodeListOfSidebar.length - _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_0__.ComnfyUIapp.graph._nodes.length < 5) {\n        for (var i = 0; i < NodeListOfSidebar.length; i++) {\n          //delete node and get delete result {true:find and deleted,false:not find)\n          if (matchNodeOfSidebarToGraph(NodeListOfSidebar[i], _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_0__.ComnfyUIapp.graph._nodes)) {\n            //remove element\n            NodeListOfSidebar[i].element.remove();\n            //update NodeNullCount\n            if (!NodeListOfSidebar[i].widgets.length) {\n              NodeNullCount--;\n            }\n            //update favWidgetCount\n            var favSum = 0;\n            var favlist = NodeListOfSidebar[i].fav;\n            var _iterator4 = _createForOfIteratorHelper(favlist),\n              _step4;\n            try {\n              for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n                var fav = _step4.value;\n                favSum += fav;\n              }\n            } catch (err) {\n              _iterator4.e(err);\n            } finally {\n              _iterator4.f();\n            }\n            favWidgetCount -= favSum;\n            //last update NodeListOfSidebar\n            NodeListOfSidebar.splice(i, 1);\n            continue;\n          }\n          // if (ComnfyUIapp.graph._nodes.length === NodeListOfSidebar.length) {\n          //     break;\n          // }\n        }\n      } else {\n        //when delete too much,clear all and reload to impove speed\n        sidebar.tabAll.innerHTML = '';\n        NodeListOfSidebar = [];\n        favWidgetCount = 0;\n        NodeNullCount = 0;\n      }\n      // }\n\n      // update node and widget when graph edit\n      //goo todo: avoid conflict with clear operation\n      if (isStartSync) {\n        // console.log(isStartSync);\n        if (_ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_0__.ComnfyUIapp.graph._nodes.length === NodeListOfSidebar.length) {\n          var _iterator5 = _createForOfIteratorHelper(_ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_0__.ComnfyUIapp.graph._nodes),\n            _step5;\n          try {\n            for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {\n              var _node2 = _step5.value;\n              updateNodeInfo(_node2, sidebar);\n              if (_node2.widgets) {\n                //filter node without widgets\n                updateWidget(_node2);\n              }\n            }\n          } catch (err) {\n            _iterator5.e(err);\n          } finally {\n            _iterator5.f();\n          }\n        }\n      }\n    }, 1000);\n  }\n});\nfunction scrollToNode(nodeOfGraph) {\n  for (var _i = 0, _NodeListOfSidebar = NodeListOfSidebar; _i < _NodeListOfSidebar.length; _i++) {\n    var nodeOfSidebar = _NodeListOfSidebar[_i];\n    if (nodeOfGraph.id === nodeOfSidebar.nodeID) {\n      var targetElement = nodeOfSidebar.element;\n      var containerElement = targetElement.parentElement;\n      var targetPosition = targetElement.offsetTop - containerElement.offsetTop;\n      containerElement.scrollTo({\n        top: targetPosition,\n        behavior: 'auto'\n      });\n      if (!nodeOfSidebar.isExpand) {\n        nodeOfSidebar.toggleAll(false);\n      }\n      break;\n    }\n  }\n}\n\n//goo todo : optimization\nfunction updateWidget(node) {\n  for (var _i2 = 0, _NodeListOfSidebar2 = NodeListOfSidebar; _i2 < _NodeListOfSidebar2.length; _i2++) {\n    var nodeOfSidebar = _NodeListOfSidebar2[_i2];\n    if (nodeOfSidebar.nodeID === node.id) {\n      //match dropdown to node\n      var _iterator6 = _createForOfIteratorHelper(node.widgets),\n        _step6;\n      try {\n        for (_iterator6.s(); !(_step6 = _iterator6.n()).done;) {\n          var widget = _step6.value;\n          var _iterator7 = _createForOfIteratorHelper(nodeOfSidebar.widgets),\n            _step7;\n          try {\n            for (_iterator7.s(); !(_step7 = _iterator7.n()).done;) {\n              var widgetOfSidebar = _step7.value;\n              if (widget.name === widgetOfSidebar.title) {\n                // match widget\n                if (widget.type == 'number') {\n                  // widget:数字\n                  // console.log(widget.name, typeof widget.value, widget.value);\n                  widgetOfSidebar.setValue(widget.value);\n                } else if (widget.type == 'combo') {\n                  // widget:单选\n                  widgetOfSidebar.setOption(widget.value);\n                } else if (widget.type == 'text') {\n                  // [goo todo]widget:单行文本\n                  widgetOfSidebar.setValue(widget.value);\n                } else if (widget.type == 'customtext') {\n                  // widget:多行文本\n                  widgetOfSidebar.setValue(widget.value);\n                } else if (widget.type == 'toggle') {\n                  // widget:多行文本\n                  widgetOfSidebar.setValue(widget.value);\n                } else if (widget.type == 'button') {// widget:按钮\n                  //do nothing\n                }\n              }\n            }\n          } catch (err) {\n            _iterator7.e(err);\n          } finally {\n            _iterator7.f();\n          }\n        }\n      } catch (err) {\n        _iterator6.e(err);\n      } finally {\n        _iterator6.f();\n      }\n    }\n  }\n}\nfunction addToGallery(node, sidebar) {\n  if (node.imgs) {\n    var _iterator8 = _createForOfIteratorHelper(node.imgs),\n      _step8;\n    try {\n      for (_iterator8.s(); !(_step8 = _iterator8.n()).done;) {\n        var img = _step8.value;\n        var isNew = true;\n        var _iterator9 = _createForOfIteratorHelper(sidebar.carousel.thumbnails),\n          _step9;\n        try {\n          for (_iterator9.s(); !(_step9 = _iterator9.n()).done;) {\n            var carouselImg = _step9.value;\n            if (img.currentSrc == carouselImg.currentSrc) {\n              isNew = false;\n            }\n          }\n        } catch (err) {\n          _iterator9.e(err);\n        } finally {\n          _iterator9.f();\n        }\n        ;\n        if (isNew) {\n          sidebar.carousel.addThumbnail([img.currentSrc]);\n        }\n        ;\n      }\n    } catch (err) {\n      _iterator8.e(err);\n    } finally {\n      _iterator8.f();\n    }\n    ;\n  }\n  ;\n}\nfunction toggleFav(nodeOfSidebar, favWidget) {\n  var fav = [];\n  var _iterator10 = _createForOfIteratorHelper(_ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_0__.ComnfyUIapp.graph._nodes),\n    _step10;\n  try {\n    for (_iterator10.s(); !(_step10 = _iterator10.n()).done;) {\n      var node = _step10.value;\n      if (node.widgets && node.id === nodeOfSidebar.nodeID) {\n        var _iterator11 = _createForOfIteratorHelper(nodeOfSidebar.widgets),\n          _step11;\n        try {\n          for (_iterator11.s(); !(_step11 = _iterator11.n()).done;) {\n            var widget = _step11.value;\n            if (widget.fav) {\n              fav.push(1);\n            } else {\n              fav.push(0);\n            }\n          }\n        } catch (err) {\n          _iterator11.e(err);\n        } finally {\n          _iterator11.f();\n        }\n        if (node.properties.fav) {\n          node.properties.fav = fav;\n        } else {\n          node.addProperty('fav', []);\n          node.properties.fav = fav;\n        }\n        nodeOfSidebar.fav = fav;\n      }\n    }\n  } catch (err) {\n    _iterator10.e(err);\n  } finally {\n    _iterator10.f();\n  }\n}\nfunction addNodeToSidebar(node, sidebar) {\n  var isNew = true;\n  for (var _i3 = 0, _NodeListOfSidebar3 = NodeListOfSidebar; _i3 < _NodeListOfSidebar3.length; _i3++) {\n    var sidebarNode = _NodeListOfSidebar3[_i3];\n    if (node.id == sidebarNode.nodeID) {\n      isNew = false;\n      break;\n    }\n  }\n  ;\n  if (isNew) {\n    initNodeOfSidebar(node, sidebar);\n  }\n}\n\n//goo todo: loading tips when delete more than 5\nfunction matchNodeOfSidebarToGraph(nodeOfSidebar, nodesOfGraph) {\n  for (var i = 0; i < nodesOfGraph.length; i++) {\n    if (nodesOfGraph[i].id === nodeOfSidebar.nodeID) {\n      return false;\n    }\n  }\n  return true;\n}\nfunction initNodeOfSidebar(node, sidebar) {\n  var fav = [];\n  if (node.widgets) {\n    if (node.properties.fav) {\n      var favSum = 0;\n      var _iterator12 = _createForOfIteratorHelper(node.properties.fav),\n        _step12;\n      try {\n        for (_iterator12.s(); !(_step12 = _iterator12.n()).done;) {\n          var _fav = _step12.value;\n          favSum += _fav;\n        }\n      } catch (err) {\n        _iterator12.e(err);\n      } finally {\n        _iterator12.f();\n      }\n      favWidgetCount += favSum;\n      fav = node.properties.fav;\n    } else {\n      for (var i = 0; i < node.widgets.length; i++) {\n        fav.push(0);\n      }\n    }\n  } else {\n    NodeNullCount++;\n  }\n  var isBypass;\n  if (node.mode === 4 || node.mode === 2) {\n    isBypass = true;\n  } //mode:2 mute; mode:4 bypass\n  else {\n    isBypass = false;\n  }\n  var isMiss, title;\n  if (node.title) {\n    isMiss = false;\n    title = node.title;\n  } //mode:2 mute; mode:4 bypass\n  else {\n    isMiss = true;\n    title = node.type;\n  }\n  var dropdown = new _component_js_dropdown_js__WEBPACK_IMPORTED_MODULE_3__.Dropdown('', {\n    title: title,\n    nodeID: node.id,\n    iconLeft: _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_0__.staticPath + 'component/img/bypass_sel.png',\n    iconRight: _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_0__.staticPath + 'component/img/arrow_down.png',\n    buttonText: '',\n    color: node.bgcolor,\n    fav: fav,\n    buttonIcon: '',\n    content: '',\n    isBypass: isBypass,\n    isMiss: isMiss,\n    buttonFunctions: {\n      normal: function normal() {\n        return console.log('Button normal state');\n      },\n      hover: function hover() {\n        return console.log('Button hover state');\n      },\n      pressed: function pressed() {\n        return console.log('Button pressed state');\n      }\n    },\n    callbacks: {\n      onBypass: function onBypass(isBypass) {\n        if (isBypass) {\n          node.mode = 4;\n        } else {\n          node.mode = 0;\n        }\n        _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_0__.ComnfyUIapp.graph.setDirtyCanvas(true);\n      }\n    }\n  });\n  // sidebar.tabAll.querySelector('.empty').remove();\n  sidebar.tabAll.insertBefore(dropdown.element, sidebar.tabAll.firstChild);\n  NodeListOfSidebar.push(dropdown);\n  addWidgetOfSidebar(node, dropdown);\n}\nfunction updateNodeInfo(node, sidebar) {\n  //update existing node color and\n  var nodeSidebar = document.getElementById(node.id.toString());\n  if (nodeSidebar) {\n    //update node title\n    if (node.title) {\n      nodeSidebar.querySelector('.dropdown-title > .dropdown-title-left > span').textContent = node.title;\n    } else {\n      // get missing node title\n      nodeSidebar.querySelector('.dropdown-title > .dropdown-title-left > span').textContent = node.type;\n    }\n    //update bypass\n    if (node.mode === 4 || node.mode === 2) {\n      for (var _i4 = 0, _NodeListOfSidebar4 = NodeListOfSidebar; _i4 < _NodeListOfSidebar4.length; _i4++) {\n        var nodeOfSidebar = _NodeListOfSidebar4[_i4];\n        if (nodeOfSidebar.nodeID === node.id) {\n          if (nodeOfSidebar.isBypass === false) {\n            nodeOfSidebar.toggleBypass();\n          }\n        }\n      }\n    } else {\n      // get missing node title\n      for (var _i5 = 0, _NodeListOfSidebar5 = NodeListOfSidebar; _i5 < _NodeListOfSidebar5.length; _i5++) {\n        var _nodeOfSidebar = _NodeListOfSidebar5[_i5];\n        if (_nodeOfSidebar.nodeID === node.id) {\n          if (_nodeOfSidebar.isBypass === true) {\n            _nodeOfSidebar.toggleBypass();\n          }\n        }\n      }\n    }\n\n    //update node color and title change\n    if (node.bgcolor) {\n      var opacityValue = 0.2;\n      var rgbaColor = hexToRgbA(node.bgcolor, opacityValue);\n      nodeSidebar.querySelector('.dropdown-title').style.setProperty('--background-main', rgbaColor);\n      nodeSidebar.style.backgroundColor = rgbaColor;\n    } else {\n      nodeSidebar.querySelector('.dropdown-title').style.setProperty('--background-main', 'rgba(20, 20, 22, 1)');\n      nodeSidebar.style.backgroundColor = '';\n    }\n  }\n}\nfunction initNumWidgetOfSidebar(widget, dropdown, fav) {\n  var value;\n  if (typeof widget.value === \"number\") {\n    //int\n    value = widget.value;\n  } else {\n    // float\n    value = parseFloat(widget.value);\n  }\n  var numInput1 = new _component_js_numinput_js__WEBPACK_IMPORTED_MODULE_6__.NumInput({\n    iconLeft: _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_0__.staticPath + 'component/img/arrow_left.png',\n    title: widget.name,\n    iconRight: _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_0__.staticPath + 'component/img/arrow_right.png',\n    min: widget.options.min,\n    max: widget.options.max,\n    round: widget.options.round,\n    step: widget.options.step / 10,\n    fav: fav,\n    showFavIcon: true,\n    value: value,\n    precision: widget.options.precision,\n    onChange: function onChange(value) {\n      // console.log('🐱',typeof value, value, typeof widget.value, widget.value);\n      widget.value = parseFloat(value);\n      _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_0__.ComnfyUIapp.graph.setDirtyCanvas(true);\n    },\n    callbacks: {\n      onFav: function onFav(fav) {\n        console.log('Favorite option:', fav);\n        if (fav) {\n          favWidgetCount++;\n        } else {\n          favWidgetCount--;\n        }\n        toggleFav(dropdown, numInput1);\n      },\n      onEdit: function onEdit(editting) {\n        if (editting) {\n          isStartSync = false;\n        } else {\n          isStartSync = true;\n        }\n      }\n    }\n  });\n  dropdown.addElement(numInput1);\n}\nfunction initComboWidgetOfSidebar(widget, dropdown, fav) {\n  var combo1 = new _component_js_combo_js__WEBPACK_IMPORTED_MODULE_8__.Combo({\n    icon: _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_0__.staticPath + 'component/img/select.png',\n    title: widget.name,\n    options: widget.options.values,\n    fav: fav,\n    showFavIcon: true,\n    isSupportSearch: true,\n    defaultOption: widget.value,\n    callbacks: {\n      onSelect: function onSelect(selectedOption) {\n        console.log('Selected option:', selectedOption);\n        widget.value = selectedOption;\n        widget.callback();\n        _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_0__.ComnfyUIapp.graph.setDirtyCanvas(true);\n      },\n      onFav: function onFav(fav) {\n        console.log('Favorite option:', fav);\n        if (fav) {\n          favWidgetCount++;\n        } else {\n          favWidgetCount--;\n        }\n        toggleFav(dropdown, combo1);\n      }\n    }\n  });\n  dropdown.addElement(combo1);\n}\nfunction initMultiinputWidgetOfSidebar(widget, dropdown, fav) {\n  var textContent = widget.value;\n  var placeholder = widget.inputEl.placeholder;\n  var multiInput1 = new _component_js_multiinput_js__WEBPACK_IMPORTED_MODULE_7__.MultiInput({\n    placeholder: placeholder,\n    title: widget.name,\n    textContent: textContent,\n    fav: fav,\n    onChange: function onChange(value) {\n      console.log(_typeof(value), value, _typeof(widget.value), widget.value);\n      widget.value = value;\n      _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_0__.ComnfyUIapp.graph.setDirtyCanvas(true);\n    },\n    callbacks: {\n      onFav: function onFav(fav) {\n        if (fav) {\n          favWidgetCount++;\n        } else {\n          favWidgetCount--;\n        }\n        toggleFav(dropdown, multiInput1);\n      },\n      onEdit: function onEdit(editting) {\n        if (editting) {\n          isStartSync = false;\n        } else {\n          isStartSync = true;\n        }\n      }\n    }\n  });\n  dropdown.addElement(multiInput1);\n}\nfunction initTextWidgetOfSidebar(widget, dropdown, fav) {\n  // Example usage\n  var singleInput = new _component_js_singleinput_js__WEBPACK_IMPORTED_MODULE_9__.SingleInput({\n    title: widget.name,\n    placeholder: 'Enter your something',\n    defaultValue: widget.value,\n    fav: fav,\n    showFavIcon: true,\n    leftIcon: _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_0__.staticPath + 'component/img/input.png',\n    callbacks: {\n      onFav: function onFav(fav) {\n        if (fav) {\n          favWidgetCount++;\n        } else {\n          favWidgetCount--;\n        }\n        toggleFav(dropdown, singleInput);\n      },\n      onEdit: function onEdit(editting) {\n        if (editting) {\n          isStartSync = false;\n        } else {\n          isStartSync = true;\n        }\n      },\n      onChange: function onChange(value) {\n        widget.value = value;\n        _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_0__.ComnfyUIapp.graph.setDirtyCanvas(true);\n      }\n    }\n  });\n  dropdown.addElement(singleInput);\n}\nfunction initSwitchWidgetOfSidebar(widget, dropdown, fav) {\n  var hint;\n  if (widget.value) {\n    hint = widget.options.on;\n  } else {\n    hint = widget.options.off;\n  }\n  var switch1 = new _component_js_switch_js__WEBPACK_IMPORTED_MODULE_5__.Switch({\n    icon: _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_0__.staticPath + 'component/img/switch.png',\n    title: widget.name,\n    hintOn: widget.options.on,\n    hintOff: widget.options.off,\n    fav: fav,\n    showFavIcon: true,\n    onChange: function onChange(checked, hintElement) {\n      widget.value = checked ? true : false;\n      _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_0__.ComnfyUIapp.graph.setDirtyCanvas(true);\n    },\n    callbacks: {\n      onFav: function onFav(fav) {\n        if (fav) {\n          favWidgetCount++;\n        } else {\n          favWidgetCount--;\n        }\n        toggleFav(dropdown, switch1);\n      }\n    }\n  });\n  dropdown.addElement(switch1);\n}\nfunction initButtonWidgetOfSidebar(widget, dropdown, fav) {\n  var button = new _component_js_button_js__WEBPACK_IMPORTED_MODULE_4__.Button({\n    container: '',\n    iconSrc: '',\n    title: widget.name,\n    fav: fav,\n    showFavIcon: true,\n    callbacks: {\n      onClick: function onClick() {\n        return widget.callback();\n      },\n      onFav: function onFav(fav) {\n        if (fav) {\n          favWidgetCount++;\n        } else {\n          favWidgetCount--;\n        }\n        toggleFav(dropdown, button);\n      }\n    }\n  });\n  dropdown.addElement(button);\n}\nfunction clearAll() {\n  var tabNode = document.getElementsByClassName('tab-panel')[0];\n  _toConsumableArray(tabNode.childNodes).forEach(function (node) {\n    tabNode.removeChild(node);\n  });\n  var tabHistory = document.getElementsByClassName('tab-panel')[1];\n  _toConsumableArray(tabHistory.childNodes).forEach(function (node) {\n    tabHistory.removeChild(node);\n  });\n}\n\n// add opacity to hex color\nfunction hexToRgbA(hex, opacity) {\n  var regex = /^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/;\n  if (regex.test(hex)) {\n    if (hex.length === 4) {\n      hex = \"#\" + hex[1] + hex[1] + hex[2] + hex[2] + hex[3] + hex[3];\n    }\n    hex = hex.replace('#', '');\n    var r = parseInt(hex.substring(0, 2), 16);\n    var g = parseInt(hex.substring(2, 4), 16);\n    var b = parseInt(hex.substring(4, 6), 16);\n    return 'rgba(' + r + ', ' + g + ', ' + b + ', ' + opacity + ')';\n  } else {\n    console.log(\"hex is not valid\", hex);\n  }\n}\nfunction addWidgetOfSidebar(node, dropdown) {\n  if (node.widgets) {\n    for (var i = 0; i < node.widgets.length; i++) {\n      var widget = node.widgets[i];\n      if (widget.type == 'number') {\n        // widget:数字\n        initNumWidgetOfSidebar(widget, dropdown, dropdown.fav[i]);\n      } else if (widget.type == 'combo') {\n        // widget:单选\n        initComboWidgetOfSidebar(widget, dropdown, dropdown.fav[i]);\n      } else if (widget.type == 'text') {\n        // [goo todo]widget:单行文本\n        initTextWidgetOfSidebar(widget, dropdown, dropdown.fav[i]);\n      } else if (widget.type == 'customtext') {\n        // widget:多行文本\n        initMultiinputWidgetOfSidebar(widget, dropdown, dropdown.fav[i]);\n      } else if (widget.type == 'toggle') {\n        // widget:多行文本\n        initSwitchWidgetOfSidebar(widget, dropdown, dropdown.fav[i]);\n      } else if (widget.type == 'button') {\n        // widget:按钮\n        initButtonWidgetOfSidebar(widget, dropdown, dropdown.fav[i]);\n      }\n    }\n  }\n}\n\n//prevent domWidget from triggering browser scale\ndocument.addEventListener('wheel', function (e) {\n  var ctrlKey = e.ctrlKey;\n  if (ctrlKey) {\n    e.preventDefault();\n    ScalCanvas(e);\n    return;\n  }\n}, {\n  passive: false\n});\nfunction ScalCanvas(e) {\n  var canvasElement = _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_0__.ComnfyUIapp.canvas;\n  var delta = e.wheelDeltaY != null ? e.wheelDeltaY : e.detail * -60;\n\n  // canvasElement.adjustMouseEvent(e);\n\n  var x = e.clientX;\n  var y = e.clientY;\n  var is_inside = !canvasElement.viewport || canvasElement.viewport && x >= canvasElement.viewport[0] && x < canvasElement.viewport[0] + canvasElement.viewport[2] && y >= canvasElement.viewport[1] && y < canvasElement.viewport[1] + canvasElement.viewport[3];\n  if (!is_inside) return;\n  var scale = canvasElement.ds.scale;\n  if (delta > 0) {\n    scale *= 1.1;\n  } else if (delta < 0) {\n    scale *= 1 / 1.1;\n  }\n\n  //this.setZoom( scale, [ e.clientX, e.clientY ] );\n  canvasElement.ds.changeScale(scale, [e.clientX, e.clientY]);\n  canvasElement.graph.change();\n}\n\n//# sourceURL=webpack://comfyux-dev/./WebExtension/ComfyUX.js?");
        /***/    },
    /***/ "./WebExtension/Sidebar.js": 
    /*!*********************************!*\
  !*** ./WebExtension/Sidebar.js ***!
  \*********************************/
    /***/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
        eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Sidebar: () => (/* binding */ Sidebar)\n/* harmony export */ });\n/* harmony import */ var _component_js_carousel_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./component/js/carousel.js */ "./WebExtension/component/js/carousel.js");\n/* harmony import */ var _component_js_dropdown_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./component/js/dropdown.js */ "./WebExtension/component/js/dropdown.js");\n/* harmony import */ var _component_js_button_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./component/js/button.js */ "./WebExtension/component/js/button.js");\n/* harmony import */ var _component_js_switch_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./component/js/switch.js */ "./WebExtension/component/js/switch.js");\n/* harmony import */ var _component_js_numinput_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./component/js/numinput.js */ "./WebExtension/component/js/numinput.js");\n/* harmony import */ var _component_js_multiinput_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./component/js/multiinput.js */ "./WebExtension/component/js/multiinput.js");\n/* harmony import */ var _component_js_combo_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./component/js/combo.js */ "./WebExtension/component/js/combo.js");\n/* harmony import */ var _component_js_tab_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./component/js/tab.js */ "./WebExtension/component/js/tab.js");\n/* harmony import */ var _component_js_listitem_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./component/js/listitem.js */ "./WebExtension/component/js/listitem.js");\n/* harmony import */ var _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./ComfyUIConnector.js */ "./WebExtension/ComfyUIConnector.js");\n/* harmony import */ var _component_js_filter_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./component/js/filter.js */ "./WebExtension/component/js/filter.js");\n/* harmony import */ var _ComfyUX_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./ComfyUX.js */ "./WebExtension/ComfyUX.js");\nfunction _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }\nfunction _toConsumableArray(r) { return _arrayWithoutHoles(r) || _iterableToArray(r) || _unsupportedIterableToArray(r) || _nonIterableSpread(); }\nfunction _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }\nfunction _iterableToArray(r) { if ("undefined" != typeof Symbol && null != r[Symbol.iterator] || null != r["@@iterator"]) return Array.from(r); }\nfunction _arrayWithoutHoles(r) { if (Array.isArray(r)) return _arrayLikeToArray(r); }\nfunction _regeneratorRuntime() { "use strict"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = "function" == typeof Symbol ? Symbol : {}, a = i.iterator || "@@iterator", c = i.asyncIterator || "@@asyncIterator", u = i.toStringTag || "@@toStringTag"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, ""); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, "_invoke", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: "normal", arg: t.call(e, r) }; } catch (t) { return { type: "throw", arg: t }; } } e.wrap = wrap; var h = "suspendedStart", l = "suspendedYield", f = "executing", s = "completed", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { ["next", "throw", "return"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if ("throw" !== c.type) { var u = c.arg, h = u.value; return h && "object" == _typeof(h) && n.call(h, "__await") ? e.resolve(h.__await).then(function (t) { invoke("next", t, i, a); }, function (t) { invoke("throw", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke("throw", t, i, a); }); } a(c.arg); } var r; o(this, "_invoke", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error("Generator is already running"); if (o === s) { if ("throw" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if ("next" === n.method) n.sent = n._sent = n.arg;else if ("throw" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else "return" === n.method && n.abrupt("return", n.arg); o = f; var p = tryCatch(e, r, n); if ("normal" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } "throw" === p.type && (o = s, n.method = "throw", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, "throw" === n && e.iterator["return"] && (r.method = "return", r.arg = t, maybeInvokeDelegate(e, r), "throw" === r.method) || "return" !== n && (r.method = "throw", r.arg = new TypeError("The iterator does not provide a \'" + n + "\' method")), y; var i = tryCatch(o, e.iterator, r.arg); if ("throw" === i.type) return r.method = "throw", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, "return" !== r.method && (r.method = "next", r.arg = t), r.delegate = null, y) : a : (r.method = "throw", r.arg = new TypeError("iterator result is not an object"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = "normal", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: "root" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || "" === e) { var r = e[a]; if (r) return r.call(e); if ("function" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + " is not iterable"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, "constructor", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, "constructor", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, "GeneratorFunction"), e.isGeneratorFunction = function (t) { var e = "function" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || "GeneratorFunction" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, "GeneratorFunction")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, "Generator"), define(g, a, function () { return this; }), define(g, "toString", function () { return "[object Generator]"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = "next", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) "t" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if ("throw" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = "throw", a.arg = e, r.next = n, o && (r.method = "next", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if ("root" === i.tryLoc) return handle("end"); if (i.tryLoc <= this.prev) { var c = n.call(i, "catchLoc"), u = n.call(i, "finallyLoc"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error("try statement without catch or finally"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, "finallyLoc") && this.prev < o.finallyLoc) { var i = o; break; } } i && ("break" === t || "continue" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = "next", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if ("throw" === t.type) throw t.arg; return "break" === t.type || "continue" === t.type ? this.next = t.arg : "return" === t.type ? (this.rval = this.arg = t.arg, this.method = "return", this.next = "end") : "normal" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, "catch": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if ("throw" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error("illegal catch attempt"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, "next" === this.method && (this.arg = t), y; } }, e; }\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }\nfunction _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }\nfunction _createForOfIteratorHelper(r, e) { var t = "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (!t) { if (Array.isArray(r) || (t = _unsupportedIterableToArray(r)) || e && r && "number" == typeof r.length) { t && (r = t); var _n = 0, F = function F() {}; return { s: F, n: function n() { return _n >= r.length ? { done: !0 } : { done: !1, value: r[_n++] }; }, e: function e(r) { throw r; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var o, a = !0, u = !1; return { s: function s() { t = t.call(r); }, n: function n() { var r = t.next(); return a = r.done, r; }, e: function e(r) { u = !0, o = r; }, f: function f() { try { a || null == t["return"] || t["return"](); } finally { if (u) throw o; } } }; }\nfunction _unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }\nfunction _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }\nfunction _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar Sidebar = /*#__PURE__*/function () {\n  function Sidebar() {\n    _classCallCheck(this, Sidebar);\n    this.carousel;\n    this.tab;\n    this.tabHistory;\n    this.historyCountOfSidebar = 0;\n    this.queueCountOfSidebar = 0;\n    this.runningCountOfSidebar = 0;\n    this.tabAll;\n    this.element;\n    this.container;\n    this.isResizing;\n    this.init();\n  }\n  return _createClass(Sidebar, [{\n    key: "init",\n    value: function init() {\n      this.ComfyBody = document.getElementsByTagName(\'body\')[0];\n      this.ComfyBody.style.display = \'flex\';\n      this.initContainer();\n      this.initResizer();\n      this.initContexMenu();\n      this.initCarousel();\n      this.initTab();\n      this.initFilterOfNode();\n      this.initTabHistory();\n    }\n  }, {\n    key: "initContainer",\n    value: function initContainer() {\n      var container = this.ComfyBody.appendChild(document.createElement(\'div\'));\n      this.container = container;\n      this.container.className = \'ComfyUXSidebar\';\n      this.container.style.backgroundColor = \'#202022\';\n      this.container.style.width = \'100%\';\n      this.container.style.height = \'100vh\';\n      this.container.style.position = \'fixed\';\n      this.container.style.zIndex = \'99\';\n      this.container.style.left = \'unset\';\n      this.container.style.right = \'0px\';\n      this.container.style.top = \'50px\';\n      this.container.style.bottom = \'0px\';\n      this.container.style.borderLeft = \'1px solid rgb(255, 255, 255, 0.2)\';\n\n      // this.container.style.left = \'0px\';\n      // this.container.style.right = \'unset\';\n\n      this.element = this.container;\n    }\n  }, {\n    key: "initResizer",\n    value: function initResizer() {\n      var _this = this;\n      //create resizer\n      var resizer = this.container.appendChild(document.createElement(\'div\'));\n      resizer.className = \'resizer\';\n      resizer.style.backgroundColor = \'var(--hover)\';\n      resizer.style.cursor = \'ew-resize\';\n      resizer.style.zIndex = \'10\';\n      resizer.style.width = \'1px\';\n      resizer.style.height = \'100%\';\n      resizer.style.position = \'absolute\';\n      resizer.style.left = \'0px\';\n      resizer.style.bottom = \'0px\';\n      resizer.addEventListener(\'mouseenter\', function () {\n        return resizer.style.backgroundColor = \'var(--text-main)\';\n      });\n      resizer.addEventListener(\'mouseleave\', function () {\n        return resizer.style.backgroundColor = \'var(--hover)\';\n      });\n      var isResizing = false;\n      resizer.addEventListener(\'mousedown\', function () {\n        isResizing = true;\n        document.addEventListener(\'mousemove\', function (e) {\n          if (isResizing) {\n            var panelRect = _this.container.getBoundingClientRect();\n            var newWidth = panelRect.right - e.clientX;\n            if (newWidth >= 300 && newWidth <= 1000) {\n              _this.container.style.width = "".concat(newWidth, "px");\n            }\n          }\n        });\n        document.addEventListener(\'mouseup\', function () {\n          isResizing = false;\n          document.removeEventListener(\'mousemove\', resizer);\n          document.removeEventListener(\'mouseup\', resizer);\n          window.gtag(\'event\', \'resize_sidebar\', {\n            \'width_after_resize\': _this.container.style.width\n          });\n        });\n      });\n    }\n  }, {\n    key: "initContexMenu",\n    value: function initContexMenu() {\n      var _this2 = this;\n      this.container.addEventListener("contextmenu", function (e) {\n        //disable browser context menu\n        e.preventDefault();\n      });\n      this.container.addEventListener(\'mousedown\', function (e) {\n        //call context menu\n        var node = _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_9__.ComnfyUIapp.graph.getNodeOnPos(e.canvasX, e.canvasY, _this2.visible_nodes, 5);\n        if (e.which == 3) {\n          _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_9__.ComnfyUIapp.canvas.processContextMenu(node, e);\n        }\n      });\n      this.container.addEventListener(\'click\', function (e) {\n        //close context menu\n        LiteGraph.closeAllContextMenus();\n      });\n    }\n  }, {\n    key: "initCarousel",\n    value: function initCarousel() {\n      var carouselImgList = [_ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_9__.staticPath + \'component/img/placeholder.png\'];\n      this.carousel = new _component_js_carousel_js__WEBPACK_IMPORTED_MODULE_0__.Carousel(\'\', carouselImgList);\n      var dropdown = new _component_js_dropdown_js__WEBPACK_IMPORTED_MODULE_1__.Dropdown(this.container, {\n        title: \'Gallery\',\n        nodeID: \'\',\n        iconLeft: _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_9__.staticPath + \'component/img/media.png\',\n        iconRight: _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_9__.staticPath + \'component/img/arrow_down.png\',\n        buttonText: \'\',\n        buttonIcon: \'\',\n        content: \'\',\n        buttonFunctions: {\n          pressed: function pressed() {\n            clearAll();\n          }\n        }\n      });\n      dropdown.addElement(this.carousel);\n      setTimeout(function () {\n        //wait css add to element\n        dropdown.toggleContent();\n      }, 100);\n    }\n  }, {\n    key: "initTab",\n    value: function initTab() {\n      var _this3 = this;\n      var tabs = [{\n        title: \'Nodes\'\n      }, {\n        title: \'History\'\n      }\n      // { title: \'Tab 3\' },\n      // { title: \'Tab 4\', disabled: true }\n      ];\n      this.tabHistory = document.createElement(\'div\');\n      this.tabAll = document.createElement(\'div\');\n      var contents = [this.tabAll, this.tabHistory];\n      this.tab = new _component_js_tab_js__WEBPACK_IMPORTED_MODULE_7__.Tab({\n        tabs: tabs,\n        contents: contents,\n        callbacks: {\n          onTabClick: function onTabClick(index) {\n            if (index === 0) {\n              _this3.showFilter();\n            } else {\n              _this3.hideFilter();\n            }\n            window.gtag(\'event\', \'click_tab\', {\n              \'tab_index\': index\n            });\n          }\n        }\n      });\n      this.container.appendChild(this.tab.element);\n\n      //make sure scroll work with dynamic height\n      var emptyElement1 = document.createElement(\'div\');\n      emptyElement1.className = \'empty\';\n      emptyElement1.style.height = \'150px\';\n      var emptyElement2 = document.createElement(\'div\');\n      emptyElement2.className = \'empty\';\n      emptyElement2.style.height = \'150px\';\n      this.tabAll.appendChild(emptyElement1);\n      this.tabHistory.appendChild(emptyElement2);\n    }\n  }, {\n    key: "initFilterOfNode",\n    value: function initFilterOfNode() {\n      var _this4 = this;\n      this.categories = [{\n        name: \'All\',\n        count: 0\n      }, {\n        name: \'Favorite\',\n        count: 0\n      }, {\n        name: \'Notnull\',\n        count: 0\n      }, {\n        name: \'Hidden\',\n        count: 0\n      }];\n      var keepInput = ["X\'s Pixel Controller.002", "PainterNode - 512x512", "Load Image", "PromptConcat", "输入图像"];\n      var keepOutput = ["Preview Image", "TripoSR Viewer"];\n      var filterCallback = function filterCallback(category) {\n        if (category.name === \'All\') {\n          _this4.resetFilter();\n          var _iterator = _createForOfIteratorHelper(_ComfyUX_js__WEBPACK_IMPORTED_MODULE_11__.NodeListOfSidebar),\n            _step;\n          try {\n            for (_iterator.s(); !(_step = _iterator.n()).done;) {\n              var nodeOfSidebar = _step.value;\n              var keep = keepInput.includes(nodeOfSidebar.title) || keepOutput.includes(nodeOfSidebar.title);\n              if (!keep) {\n                nodeOfSidebar.filter(0);\n              } else {\n                nodeOfSidebar.filter(1);\n              }\n              // nodeOfSidebar.toggleAll(false);\n            }\n          } catch (err) {\n            _iterator.e(err);\n          } finally {\n            _iterator.f();\n          }\n        } else if (category.name === \'Favorite\') {\n          _this4.resetFilter();\n          var _iterator2 = _createForOfIteratorHelper(_ComfyUX_js__WEBPACK_IMPORTED_MODULE_11__.NodeListOfSidebar),\n            _step2;\n          try {\n            for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n              var _nodeOfSidebar = _step2.value;\n              var _iterator3 = _createForOfIteratorHelper(_nodeOfSidebar.widgets),\n                _step3;\n              try {\n                for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n                  var widgetOfSidebar = _step3.value;\n                  if (widgetOfSidebar.fav) {\n                    widgetOfSidebar.filter(1);\n                  } else {\n                    widgetOfSidebar.filter(0);\n                  }\n                }\n              } catch (err) {\n                _iterator3.e(err);\n              } finally {\n                _iterator3.f();\n              }\n              _nodeOfSidebar.toggleAll(false);\n              var isExistFav = false;\n              var _iterator4 = _createForOfIteratorHelper(_nodeOfSidebar.fav),\n                _step4;\n              try {\n                for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n                  var fav = _step4.value;\n                  if (fav === 1) {\n                    isExistFav = true;\n                  }\n                }\n              } catch (err) {\n                _iterator4.e(err);\n              } finally {\n                _iterator4.f();\n              }\n              if (isExistFav) {\n                _nodeOfSidebar.filter(1);\n              } else {\n                _nodeOfSidebar.filter(0);\n              }\n            }\n          } catch (err) {\n            _iterator2.e(err);\n          } finally {\n            _iterator2.f();\n          }\n        } else if (category.name === \'Notnull\') {\n          _this4.resetFilter();\n          var _iterator5 = _createForOfIteratorHelper(_ComfyUX_js__WEBPACK_IMPORTED_MODULE_11__.NodeListOfSidebar),\n            _step5;\n          try {\n            for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {\n              var _nodeOfSidebar2 = _step5.value;\n              if (_nodeOfSidebar2.widgets.length) {\n                _nodeOfSidebar2.filter(1);\n              } else {\n                _nodeOfSidebar2.filter(0);\n              }\n              _nodeOfSidebar2.toggleAll(false);\n            }\n          } catch (err) {\n            _iterator5.e(err);\n          } finally {\n            _iterator5.f();\n          }\n        } else if (category.name === \'Hidden\') {\n          // Logic for the Hidden category\n          _this4.resetFilter();\n          var _iterator6 = _createForOfIteratorHelper(_ComfyUX_js__WEBPACK_IMPORTED_MODULE_11__.NodeListOfSidebar),\n            _step6;\n          try {\n            for (_iterator6.s(); !(_step6 = _iterator6.n()).done;) {\n              var _nodeOfSidebar3 = _step6.value;\n              var _keep = keepInput.includes(_nodeOfSidebar3.title) || keepOutput.includes(_nodeOfSidebar3.title);\n              if (!_keep) {\n                console.log("NOT KEEP: ", _nodeOfSidebar3.id, _nodeOfSidebar3.title);\n                _nodeOfSidebar3.filter(1);\n              } else {\n                console.log("KEEP: ", _nodeOfSidebar3.id, _nodeOfSidebar3.title);\n                _nodeOfSidebar3.filter(0);\n              }\n              _nodeOfSidebar3.toggleAll(false);\n            }\n          } catch (err) {\n            _iterator6.e(err);\n          } finally {\n            _iterator6.f();\n          }\n        }\n        window.gtag(\'event\', \'click_filter\', {\n          \'filter_name\': category.name\n        });\n      };\n      this.filter = new _component_js_filter_js__WEBPACK_IMPORTED_MODULE_10__.Filter(this.categories, filterCallback);\n      setInterval(function () {\n        // var cntList = [NodeListOfSidebar.length, favWidgetCount, NodeListOfSidebar.length - NodeNullCount];\n        var cntList = [_ComfyUX_js__WEBPACK_IMPORTED_MODULE_11__.NodeListOfSidebar.filter(function (node) {\n          return keepInput.includes(node.title) || keepOutput.includes(node.title);\n        }).length, _ComfyUX_js__WEBPACK_IMPORTED_MODULE_11__.favWidgetCount, _ComfyUX_js__WEBPACK_IMPORTED_MODULE_11__.NodeListOfSidebar.length - _ComfyUX_js__WEBPACK_IMPORTED_MODULE_11__.NodeNullCount, _ComfyUX_js__WEBPACK_IMPORTED_MODULE_11__.NodeListOfSidebar.filter(function (node) {\n          return !keepInput.includes(node.title) && !keepOutput.includes(node.title);\n        }).length // Count for Hidden category\n        ];\n        _this4.filter.setCategoryCount(cntList);\n      }, 1000);\n      this.tab.element.querySelector(\'.filter-area\').appendChild(this.filter.element);\n    }\n  }, {\n    key: "resetFilter",\n    value: function resetFilter() {\n      var _iterator7 = _createForOfIteratorHelper(_ComfyUX_js__WEBPACK_IMPORTED_MODULE_11__.NodeListOfSidebar),\n        _step7;\n      try {\n        for (_iterator7.s(); !(_step7 = _iterator7.n()).done;) {\n          var nodeOfSidebar = _step7.value;\n          nodeOfSidebar.filter(1);\n          var _iterator8 = _createForOfIteratorHelper(nodeOfSidebar.widgets),\n            _step8;\n          try {\n            for (_iterator8.s(); !(_step8 = _iterator8.n()).done;) {\n              var widgetOfSidebar = _step8.value;\n              widgetOfSidebar.filter(1);\n            }\n          } catch (err) {\n            _iterator8.e(err);\n          } finally {\n            _iterator8.f();\n          }\n        }\n      } catch (err) {\n        _iterator7.e(err);\n      } finally {\n        _iterator7.f();\n      }\n    }\n  }, {\n    key: "initTabHistory",\n    value: function initTabHistory() {\n      var _this5 = this;\n      this.updateHistory();\n      var timer = setInterval(function () {\n        //await shit can\'t be inside setInterval\n        _this5.updateHistory();\n      }, 1000);\n    }\n  }, {\n    key: "updateHistory",\n    value: function () {\n      var _updateHistory = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4() {\n        var _this6 = this;\n        var queue, history, runningName, listItem, _iterator9, _step9, _loop, historyArray, _loop2, i, runningCnt, pendingCnt, total;\n        return _regeneratorRuntime().wrap(function _callee4$(_context6) {\n          while (1) switch (_context6.prev = _context6.next) {\n            case 0:\n              _context6.next = 2;\n              return _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_9__.ComnfyUIapi.getQueue();\n            case 2:\n              queue = _context6.sent;\n              _context6.next = 5;\n              return _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_9__.ComnfyUIapi.getHistory();\n            case 5:\n              history = _context6.sent;\n              if (!(this.runningCountOfSidebar != queue.Running.length || this.queueCountOfSidebar != queue.Pending.length || this.historyCountOfSidebar != history.History.length)) {\n                _context6.next = 46;\n                break;\n              }\n              if (this.tabHistory.children.length > 0) {\n                this.clearHistory(this.tabHistory);\n              }\n              this.historyCountOfSidebar = 0;\n              this.queueCountOfSidebar = 0;\n              this.runningCountOfSidebar = 0;\n              if (queue.Running.length > 0) {\n                this.runningCountOfSidebar = queue.Running.length;\n                runningName = queue.Running[0].prompt[0];\n                listItem = new _component_js_listitem_js__WEBPACK_IMPORTED_MODULE_8__.ListItem({\n                  iconUrl: _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_9__.staticPath + \'component/img/run.png\',\n                  name: \'Record-\' + runningName,\n                  status: \'Running\',\n                  button1Text: \'Restore\',\n                  button2Img: _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_9__.staticPath + \'component/img/clear.png\',\n                  callbacks: {\n                    onButton1Click: function onButton1Click() {\n                      _this6.loadHistory(queue.Running[0]);\n                    },\n                    onButton2Click: function () {\n                      var _onButton2Click = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n                        var response;\n                        return _regeneratorRuntime().wrap(function _callee$(_context) {\n                          while (1) switch (_context.prev = _context.next) {\n                            case 0:\n                              _context.prev = 0;\n                              _context.next = 3;\n                              return fetch(\'/interrupt\', {\n                                method: \'POST\',\n                                cache: \'reload\',\n                                headers: {\n                                  \'Content-Type\': \'application/json\'\n                                }\n                              });\n                            case 3:\n                              response = _context.sent;\n                              _context.next = 9;\n                              break;\n                            case 6:\n                              _context.prev = 6;\n                              _context.t0 = _context["catch"](0);\n                              console.error(\'Error stop running\', _context.t0);\n                            case 9:\n                            case "end":\n                              return _context.stop();\n                          }\n                        }, _callee, null, [[0, 6]]);\n                      }));\n                      function onButton2Click() {\n                        return _onButton2Click.apply(this, arguments);\n                      }\n                      return onButton2Click;\n                    }()\n                  }\n                });\n                this.tabHistory.appendChild(listItem.getElement());\n                listItem.element.style.setProperty(\'--background-main\', \'var(--primary)\');\n                listItem.nameElement.style.setProperty(\'--text-gray\', \'var(--text-main)\');\n                listItem.statusElement.style.setProperty(\'--hover\', \'var(--text-main)\');\n                listItem.statusElement.style.setProperty(\'--text-gray\', \'var(--primary)\');\n                listItem.statusElement.setAttribute("data-i18n", "Running");\n                listItem.button1.textElement.setAttribute("data-i18n", "Restore");\n              }\n              if (!(queue.Pending.length > 0)) {\n                _context6.next = 30;\n                break;\n              }\n              this.queueCountOfSidebar = queue.Pending.length;\n              _iterator9 = _createForOfIteratorHelper(queue.Pending);\n              _context6.prev = 15;\n              _loop = /*#__PURE__*/_regeneratorRuntime().mark(function _loop() {\n                var waitting, waittingName;\n                return _regeneratorRuntime().wrap(function _loop$(_context3) {\n                  while (1) switch (_context3.prev = _context3.next) {\n                    case 0:\n                      waitting = _step9.value;\n                      waittingName = waitting.prompt[0];\n                      listItem = new _component_js_listitem_js__WEBPACK_IMPORTED_MODULE_8__.ListItem({\n                        iconUrl: _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_9__.staticPath + \'component/img/waitting.png\',\n                        name: \'Record-\' + waittingName,\n                        status: \'Waitting\',\n                        button1Text: \'Restore\',\n                        button2Img: _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_9__.staticPath + \'component/img/clear.png\',\n                        callbacks: {\n                          onButton1Click: function onButton1Click() {\n                            _this6.loadHistory(waitting);\n                          },\n                          onButton2Click: function () {\n                            var _onButton2Click2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n                              return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n                                while (1) switch (_context2.prev = _context2.next) {\n                                  case 0:\n                                    _context2.next = 2;\n                                    return _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_9__.ComnfyUIapi.deleteItem(\'queue\', queue.Pending[0].prompt[1]);\n                                  case 2:\n                                  case "end":\n                                    return _context2.stop();\n                                }\n                              }, _callee2);\n                            }));\n                            function onButton2Click() {\n                              return _onButton2Click2.apply(this, arguments);\n                            }\n                            return onButton2Click;\n                          }()\n                        }\n                      });\n                      _this6.tabHistory.appendChild(listItem.getElement());\n                      listItem.element.style.setProperty(\'--background-main\', \'rgba(41, 72, 242, 0.2)\');\n                      // listItem.nameElement.style.setProperty(\'--text-gray\', \'var(--text-main)\');\n                      listItem.statusElement.style.setProperty(\'--hover\', \'var(--primary)\');\n                      listItem.statusElement.style.setProperty(\'--text-gray\', \'var(--text-main)\');\n                      listItem.statusElement.setAttribute("data-i18n", "Waitting");\n                      listItem.button1.textElement.setAttribute("data-i18n", "Restore");\n                    case 9:\n                    case "end":\n                      return _context3.stop();\n                  }\n                }, _loop);\n              });\n              _iterator9.s();\n            case 18:\n              if ((_step9 = _iterator9.n()).done) {\n                _context6.next = 22;\n                break;\n              }\n              return _context6.delegateYield(_loop(), "t0", 20);\n            case 20:\n              _context6.next = 18;\n              break;\n            case 22:\n              _context6.next = 27;\n              break;\n            case 24:\n              _context6.prev = 24;\n              _context6.t1 = _context6["catch"](15);\n              _iterator9.e(_context6.t1);\n            case 27:\n              _context6.prev = 27;\n              _iterator9.f();\n              return _context6.finish(27);\n            case 30:\n              if (!(history.History.length > 0)) {\n                _context6.next = 40;\n                break;\n              }\n              this.historyCountOfSidebar = history.History.length;\n              historyArray = history.History;\n              _loop2 = /*#__PURE__*/_regeneratorRuntime().mark(function _loop2(i) {\n                var completedName;\n                return _regeneratorRuntime().wrap(function _loop2$(_context5) {\n                  while (1) switch (_context5.prev = _context5.next) {\n                    case 0:\n                      // goo todo： delete item\n                      // const removeAction = historyArray[i].remove || {\n                      //     name: "Delete",\n                      //     cb: () => ComnfyUIapi.deleteItem(\'History\', historyArray[i].prompt[1]),\n                      // };\n                      completedName = historyArray[i].prompt[0];\n                      listItem = new _component_js_listitem_js__WEBPACK_IMPORTED_MODULE_8__.ListItem({\n                        iconUrl: _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_9__.staticPath + \'component/img/history.png\',\n                        name: \'Record-\' + completedName,\n                        status: \'Done\',\n                        button1Text: \'Restore\',\n                        button2Img: _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_9__.staticPath + \'component/img/clear.png\',\n                        callbacks: {\n                          onButton1Click: function onButton1Click() {\n                            _this6.loadHistory(historyArray[i]);\n                          },\n                          onButton2Click: function () {\n                            var _onButton2Click3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {\n                              return _regeneratorRuntime().wrap(function _callee3$(_context4) {\n                                while (1) switch (_context4.prev = _context4.next) {\n                                  case 0:\n                                    _context4.next = 2;\n                                    return _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_9__.ComnfyUIapi.deleteItem(\'history\', historyArray[i].prompt[1]);\n                                  case 2:\n                                  case "end":\n                                    return _context4.stop();\n                                }\n                              }, _callee3);\n                            }));\n                            function onButton2Click() {\n                              return _onButton2Click3.apply(this, arguments);\n                            }\n                            return onButton2Click;\n                          }()\n                          // onButton2Click: async () => {await ComnfyUIapi.deleteItem(\'History\', historyArray[i].prompt[1]);}\n                        }\n                      });\n                      _this6.tabHistory.appendChild(listItem.getElement());\n                      listItem.statusElement.setAttribute("data-i18n", "Done");\n                      listItem.button1.textElement.setAttribute("data-i18n", "Restore");\n                    case 5:\n                    case "end":\n                      return _context5.stop();\n                  }\n                }, _loop2);\n              });\n              i = historyArray.length;\n            case 35:\n              if (!i--) {\n                _context6.next = 40;\n                break;\n              }\n              return _context6.delegateYield(_loop2(i), "t2", 37);\n            case 37:\n              i > 0;\n              _context6.next = 35;\n              break;\n            case 40:\n              //count\n              runningCnt = 0;\n              pendingCnt = 0;\n              if (queue.Running) {\n                runningCnt = queue.Running.length;\n              }\n              if (queue.Pending) {\n                pendingCnt = queue.Pending.length;\n              }\n              total = runningCnt + pendingCnt;\n              if (_ComfyUX_js__WEBPACK_IMPORTED_MODULE_11__.ComfyUXi18n.currentLanguage === \'zh\') {\n                if (total) {\n                  this.tab.renameTab(1, \'历史 \' + total.toString());\n                } else {\n                  this.tab.renameTab(1, \'历史\');\n                }\n              } else if (_ComfyUX_js__WEBPACK_IMPORTED_MODULE_11__.ComfyUXi18n.currentLanguage === \'en\') {\n                if (total) {\n                  this.tab.renameTab(1, \'History \' + total.toString());\n                } else {\n                  this.tab.renameTab(1, \'History\');\n                }\n              }\n            case 46:\n            case "end":\n              return _context6.stop();\n          }\n        }, _callee4, this, [[15, 24, 27, 30]]);\n      }));\n      function updateHistory() {\n        return _updateHistory.apply(this, arguments);\n      }\n      return updateHistory;\n    }()\n  }, {\n    key: "clearHistory",\n    value: function clearHistory(tabHistory) {\n      _toConsumableArray(tabHistory.childNodes).forEach(function (node) {\n        tabHistory.removeChild(node);\n      });\n    }\n  }, {\n    key: "hideFilter",\n    value: function hideFilter() {\n      this.filter.element.style.display = \'none\';\n    }\n  }, {\n    key: "showFilter",\n    value: function showFilter() {\n      this.filter.element.style.display = \'block\';\n    }\n  }, {\n    key: "loadHistory",\n    value: function loadHistory(item) {\n      _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_9__.ComnfyUIapp.loadGraphData(item.prompt[3].extra_pnginfo.workflow, true, false);\n      if (item.outputs) {\n        _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_9__.ComnfyUIapp.nodeOutputs = item.outputs;\n      }\n    }\n  }, {\n    key: "resetSidebar",\n    value: function resetSidebar() {\n      _ComfyUX_js__WEBPACK_IMPORTED_MODULE_11__.NodeListOfSidebar = [];\n      _ComfyUX_js__WEBPACK_IMPORTED_MODULE_11__.favWidgetCount = 0;\n      _ComfyUX_js__WEBPACK_IMPORTED_MODULE_11__.NodeNullCount = 0;\n    }\n  }]);\n}();\n\n//# sourceURL=webpack://comfyux-dev/./WebExtension/Sidebar.js?');
        /***/    },
    /***/ "./WebExtension/Topbar.js": 
    /*!********************************!*\
  !*** ./WebExtension/Topbar.js ***!
  \********************************/
    /***/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
        eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Topbar: () => (/* binding */ Topbar)\n/* harmony export */ });\n/* harmony import */ var _component_js_button_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./component/js/button.js */ \"./WebExtension/component/js/button.js\");\n/* harmony import */ var _component_js_numinput_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./component/js/numinput.js */ \"./WebExtension/component/js/numinput.js\");\n/* harmony import */ var _component_js_switch_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./component/js/switch.js */ \"./WebExtension/component/js/switch.js\");\n/* harmony import */ var _component_js_modal_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./component/js/modal.js */ \"./WebExtension/component/js/modal.js\");\n/* harmony import */ var _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./ComfyUIConnector.js */ \"./WebExtension/ComfyUIConnector.js\");\n/* harmony import */ var _ComfyUX_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./ComfyUX.js */ \"./WebExtension/ComfyUX.js\");\n/* harmony import */ var _update_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./update.js */ \"./WebExtension/update.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = \"function\" == typeof Symbol ? Symbol : {}, a = i.iterator || \"@@iterator\", c = i.asyncIterator || \"@@asyncIterator\", u = i.toStringTag || \"@@toStringTag\"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, \"\"); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, \"_invoke\", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: \"normal\", arg: t.call(e, r) }; } catch (t) { return { type: \"throw\", arg: t }; } } e.wrap = wrap; var h = \"suspendedStart\", l = \"suspendedYield\", f = \"executing\", s = \"completed\", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { [\"next\", \"throw\", \"return\"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if (\"throw\" !== c.type) { var u = c.arg, h = u.value; return h && \"object\" == _typeof(h) && n.call(h, \"__await\") ? e.resolve(h.__await).then(function (t) { invoke(\"next\", t, i, a); }, function (t) { invoke(\"throw\", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke(\"throw\", t, i, a); }); } a(c.arg); } var r; o(this, \"_invoke\", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error(\"Generator is already running\"); if (o === s) { if (\"throw\" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if (\"next\" === n.method) n.sent = n._sent = n.arg;else if (\"throw\" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else \"return\" === n.method && n.abrupt(\"return\", n.arg); o = f; var p = tryCatch(e, r, n); if (\"normal\" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } \"throw\" === p.type && (o = s, n.method = \"throw\", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, \"throw\" === n && e.iterator[\"return\"] && (r.method = \"return\", r.arg = t, maybeInvokeDelegate(e, r), \"throw\" === r.method) || \"return\" !== n && (r.method = \"throw\", r.arg = new TypeError(\"The iterator does not provide a '\" + n + \"' method\")), y; var i = tryCatch(o, e.iterator, r.arg); if (\"throw\" === i.type) return r.method = \"throw\", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, \"return\" !== r.method && (r.method = \"next\", r.arg = t), r.delegate = null, y) : a : (r.method = \"throw\", r.arg = new TypeError(\"iterator result is not an object\"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = \"normal\", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: \"root\" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || \"\" === e) { var r = e[a]; if (r) return r.call(e); if (\"function\" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + \" is not iterable\"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, \"constructor\", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, \"constructor\", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, \"GeneratorFunction\"), e.isGeneratorFunction = function (t) { var e = \"function\" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || \"GeneratorFunction\" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, \"GeneratorFunction\")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, \"Generator\"), define(g, a, function () { return this; }), define(g, \"toString\", function () { return \"[object Generator]\"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) \"t\" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if (\"throw\" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = \"throw\", a.arg = e, r.next = n, o && (r.method = \"next\", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if (\"root\" === i.tryLoc) return handle(\"end\"); if (i.tryLoc <= this.prev) { var c = n.call(i, \"catchLoc\"), u = n.call(i, \"finallyLoc\"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error(\"try statement without catch or finally\"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, \"finallyLoc\") && this.prev < o.finallyLoc) { var i = o; break; } } i && (\"break\" === t || \"continue\" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = \"next\", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if (\"throw\" === t.type) throw t.arg; return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, \"catch\": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if (\"throw\" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, \"next\" === this.method && (this.arg = t), y; } }, e; }\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }\nfunction _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"next\", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"throw\", n); } _next(void 0); }); }; }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n\n\n\n\n\n\n\nvar Topbar = /*#__PURE__*/function () {\n  function Topbar() {\n    _classCallCheck(this, Topbar);\n    this.logoUrl = _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_4__.staticPath + 'component/img/logo.png';\n    this.logoLink = 'https://y3bpnk8e3u.feishu.cn/docx/RFIrd1kcbotTa7xqis5cKiKhnRf?from=from_copylink';\n    this.leftContainer;\n    this.rightContainer;\n    this.element;\n    this.init();\n  }\n  return _createClass(Topbar, [{\n    key: \"init\",\n    value: function init() {\n      var _this = this;\n      //get static path in __init__.py\n\n      // create container\n      this.ComfyBody = document.getElementsByTagName('body')[0];\n      this.ComfyBody.style.display = 'inline-flex';\n      var container = this.ComfyBody.appendChild(document.createElement('div'));\n      container.className = 'ComfyUXTopbar';\n      container.style.backgroundColor = 'var(--background-main)';\n      container.style.height = '50px';\n      container.style.position = 'fixed';\n      container.style.zIndex = '99999';\n      container.style.left = '0px';\n      container.style.right = '0px';\n      container.style.top = '0px';\n      container.style.bottom = 'unset';\n      container.style.padding = '0 var(--space-m)';\n      container.style.display = 'flex';\n      container.style.justifyContent = 'space-between';\n      container.style.alignItems = 'center';\n      container.style.borderBottom = '1px solid rgb(255, 255, 255, 0.2)';\n\n      // create exist full screen\n      this.offScreenContainer = document.createElement('div');\n      this.offScreenContainer.className = 'ComfyUXFullScreen';\n      this.ComfyBody.appendChild(this.offScreenContainer);\n      this.offScreenContainer.style.position = 'fixed';\n      this.offScreenContainer.style.zIndex = '99';\n      this.offScreenContainer.style.left = '20px';\n      this.offScreenContainer.style.right = 'unset';\n      this.offScreenContainer.style.top = '20px';\n      this.offScreenContainer.style.bottom = 'unset';\n      this.offScreenContainer.style.width = 'fit-content';\n      this.offScreenContainer.style.height = 'fit-content';\n      this.offScreenContainer.style.display = 'none';\n      this.offScreenContainer.style.gap = 'var(--space-m)';\n      this.offScreenButton = new _component_js_button_js__WEBPACK_IMPORTED_MODULE_0__.Button({\n        container: '',\n        iconSrc: _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_4__.staticPath + 'component/img/off_screen.png',\n        title: '',\n        fav: '',\n        showFavIcon: false,\n        callbacks: {\n          onClick: function onClick() {\n            _this.element.style.display = 'flex';\n            document.getElementsByClassName('ComfyUXSidebar')[0].style.display = 'block';\n            _this.offScreenContainer.style.display = 'none';\n            window.gtag('event', 'click_offscreen');\n          }\n        }\n      });\n      this.offScreenButton.element.style.width = '34px';\n      this.runButtonOffScreen = new _component_js_button_js__WEBPACK_IMPORTED_MODULE_0__.Button({\n        container: '',\n        iconSrc: _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_4__.staticPath + 'component/img/run.png',\n        title: 'Run',\n        fav: '',\n        showFavIcon: false,\n        callbacks: {\n          onClick: function onClick() {\n            // document.getElementById('queue-button').click();\n            app.queuePrompt(0, _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_4__.ComnfyUIui.batchCount);\n            window.gtag('event', 'click_offscreen_run');\n            _this.runBtnUpdate(_this.runButtonOffScreen);\n          }\n        }\n      });\n      this.runButtonOffScreen.buttonElement.style.setProperty('--background-main', 'var(--primary)');\n      this.runButtonOffScreen.buttonElement.style.setProperty('--text-gray', 'var(--text-main)');\n      this.runButtonOffScreen.buttonElement.style.fontWeight = 'var(--bold)';\n      this.offScreenContainer.appendChild(this.offScreenButton.element);\n      this.offScreenContainer.appendChild(this.runButtonOffScreen.buttonElement);\n\n      // create left container\n      var leftContainer = document.createElement('div');\n      leftContainer.classList.add('topbar-left');\n      container.appendChild(leftContainer);\n      leftContainer.style.display = 'flex';\n      leftContainer.style.alignItems = 'center';\n\n      // create right container\n      var rightContainer = document.createElement('div');\n      rightContainer.classList.add('topbar-right');\n      container.appendChild(rightContainer);\n      rightContainer.style.display = 'flex';\n      rightContainer.style.alignItems = 'center';\n      rightContainer.style.gap = 'var(--space-m)';\n\n      // create logos\n      var logo = document.createElement('img');\n      logo.src = this.logoUrl;\n      logo.classList.add('topbar-logo');\n      logo.style.width = '86px';\n      logo.style.height = '18px';\n      logo.style.cursor = 'pointer';\n      logo.style.marginRight = 'var(--space-m)';\n      logo.addEventListener('click', function () {\n        window.open(_this.logoLink);\n        window.gtag('event', 'click_logo');\n      });\n      leftContainer.appendChild(logo);\n      this.leftContainer = leftContainer;\n      this.rightContainer = rightContainer;\n\n      //init components\n      this.initFullScreenBtn();\n      this.initComfyMenuBtn();\n      if (document.getElementById('crystools-root')) {\n        this.initInspectBtn();\n      }\n      this.initSettingBtn();\n      this.initResetViewBtn();\n      this.initRefreshBtn();\n      this.initClearBtn();\n      var line = document.createElement('div');\n      line.innerHTML = '<img src = ' + _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_4__.staticPath + 'component/img/verticalline.png style=\"width: 1px; height: 12px; margin-left: var(--space-m); margin-right: var(--space-m);\">';\n      this.leftContainer.appendChild(line);\n      // this.initRecent(); //can't get localpath ,this is suck \n      this.initLoadBtn();\n      this.initLoadDefaultBtn();\n      this.initSaveBtn();\n      this.initLangBtn();\n      setTimeout(function () {\n        _this.initManagerBtn();\n      }, 1000);\n      this.initProcess();\n      this.initRunBtn();\n      this.initQueueFrontBtn();\n      this.initAutoRunSwitch();\n      this.initBatchInput();\n      this.initToggleSidebar();\n      this.initUpdateBtn();\n\n      //return DOM element\n      this.element = container;\n    }\n  }, {\n    key: \"addLeftComponent\",\n    value: function addLeftComponent(element) {\n      var wrapper = document.createElement('div');\n      wrapper.classList.add('topbar-component');\n      wrapper.appendChild(element);\n      this.leftContainer.appendChild(wrapper);\n    }\n  }, {\n    key: \"addRightComponent\",\n    value: function addRightComponent(element) {\n      var wrapper = document.createElement('div');\n      wrapper.classList.add('topbar-component');\n      wrapper.appendChild(element);\n      this.rightContainer.appendChild(wrapper);\n    }\n  }, {\n    key: \"initFullScreenBtn\",\n    value: function initFullScreenBtn() {\n      var _this2 = this;\n      var button = new _component_js_button_js__WEBPACK_IMPORTED_MODULE_0__.Button({\n        container: '',\n        iconSrc: _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_4__.staticPath + 'component/img/fullscreen.png',\n        title: '',\n        fav: '',\n        showFavIcon: false,\n        callbacks: {\n          onClick: function onClick() {\n            _this2.element.style.display = 'none';\n            document.getElementsByClassName('ComfyUXSidebar')[0].style.display = 'none';\n            _this2.offScreenContainer.style.display = 'flex';\n            window.gtag('event', 'click_fullscreen');\n          }\n        }\n      });\n      button.buttonElement.style.setProperty('--background-main', 'transparent');\n      this.leftContainer.appendChild(button.element);\n    }\n  }, {\n    key: \"initComfyMenuBtn\",\n    value: function initComfyMenuBtn() {\n      var button = new _component_js_button_js__WEBPACK_IMPORTED_MODULE_0__.Button({\n        container: '',\n        iconSrc: _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_4__.staticPath + 'component/img/menu4.png',\n        title: '',\n        fav: '',\n        showFavIcon: false,\n        callbacks: {\n          onClick: function onClick() {\n            if (document.getElementsByClassName('comfy-menu')[0].style.display === 'block') {\n              document.getElementsByClassName('comfy-menu')[0].style.display = 'none';\n            } else {\n              document.getElementsByClassName('comfy-menu')[0].style.display = 'block';\n              document.getElementsByClassName('comfy-menu')[0].style.left = '0px';\n              document.getElementsByClassName('comfy-menu')[0].style.top = '220px';\n            }\n          }\n        }\n      });\n      button.buttonElement.style.setProperty('--background-main', 'transparent');\n      this.leftContainer.appendChild(button.element);\n    }\n  }, {\n    key: \"initSettingBtn\",\n    value: function initSettingBtn() {\n      var button = new _component_js_button_js__WEBPACK_IMPORTED_MODULE_0__.Button({\n        container: '',\n        iconSrc: _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_4__.staticPath + 'component/img/setting.png',\n        title: '',\n        fav: '',\n        showFavIcon: false,\n        callbacks: {\n          onClick: function onClick() {\n            document.getElementsByClassName('comfy-settings-btn')[0].click();\n            window.gtag('event', 'click_setting');\n          }\n        }\n      });\n      button.buttonElement.style.setProperty('--background-main', 'transparent');\n      this.leftContainer.appendChild(button.element);\n    }\n  }, {\n    key: \"initResetViewBtn\",\n    value: function initResetViewBtn() {\n      var button = new _component_js_button_js__WEBPACK_IMPORTED_MODULE_0__.Button({\n        container: '',\n        iconSrc: _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_4__.staticPath + 'component/img/resetview.png',\n        title: '',\n        fav: '',\n        showFavIcon: false,\n        callbacks: {\n          onClick: function onClick() {\n            document.getElementById('comfy-reset-view-button').click();\n            window.gtag('event', 'click_resetview');\n          }\n        }\n      });\n      button.buttonElement.style.setProperty('--background-main', 'transparent');\n      this.leftContainer.appendChild(button.element);\n    }\n  }, {\n    key: \"initRefreshBtn\",\n    value: function initRefreshBtn() {\n      var button = new _component_js_button_js__WEBPACK_IMPORTED_MODULE_0__.Button({\n        container: '',\n        iconSrc: _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_4__.staticPath + 'component/img/refresh.png',\n        title: '',\n        fav: '',\n        showFavIcon: false,\n        callbacks: {\n          onClick: function onClick() {\n            document.getElementById('comfy-refresh-button').click();\n            window.gtag('event', 'click_refresh');\n            //todo: move this to ComfyUX,make sure to re-init node, and sync with sidebar       \n            // NodeListOfSidebar = [];\n            // favWidgetCount = 0;\n            // NodeNullCount = 0;\n          }\n        }\n      });\n      button.buttonElement.style.setProperty('--background-main', 'transparent');\n      this.leftContainer.appendChild(button.element);\n    }\n  }, {\n    key: \"initClearBtn\",\n    value: function initClearBtn() {\n      var button = new _component_js_button_js__WEBPACK_IMPORTED_MODULE_0__.Button({\n        container: '',\n        iconSrc: _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_4__.staticPath + 'component/img/clear.png',\n        title: '',\n        fav: '',\n        showFavIcon: false,\n        callbacks: {\n          onClick: function onClick() {\n            document.getElementById('comfy-clear-button').click();\n            window.gtag('event', 'click_clear');\n            //todo: move this to ComfyUX,make sure to re-init node, and sync with sidebar       \n            // NodeListOfSidebar = [];\n            // favWidgetCount = 0;\n            // NodeNullCount = 0;\n          }\n        }\n      });\n      button.buttonElement.style.setProperty('--background-main', 'transparent');\n      this.leftContainer.appendChild(button.element);\n    }\n  }, {\n    key: \"initLoadBtn\",\n    value: function initLoadBtn() {\n      var isWorkflowMenuOpen = false;\n      var button = new _component_js_button_js__WEBPACK_IMPORTED_MODULE_0__.Button({\n        container: '',\n        iconSrc: '',\n        title: 'Load',\n        fav: '',\n        showFavIcon: false,\n        callbacks: {\n          onClick: function onClick() {\n            window.gtag('event', 'click_load');\n            //todo: move this to ComfyUX,make sure to re-init node, and sync with sidebar       \n            // NodeListOfSidebar = [];\n            // favWidgetCount = 0;\n            // NodeNullCount = 0;\n\n            if (document.getElementsByClassName('comfyui-workflows-popup comfyui-popup').length) {\n              var workflowMenu = document.getElementsByClassName('comfyui-workflows-popup comfyui-popup')[0];\n              if (isWorkflowMenuOpen) {\n                isWorkflowMenuOpen = false;\n                workflowMenu.classList.remove('open');\n              } else {\n                isWorkflowMenuOpen = true;\n                var rect = button.element.getBoundingClientRect();\n                workflowMenu.style.top = rect.top + 50 + 'px';\n                workflowMenu.style.left = rect.left + 'px';\n                workflowMenu.style.bottom = 'unset';\n                workflowMenu.classList.add('open');\n              }\n            } else {\n              document.getElementById('comfy-load-button').click();\n            }\n          }\n        }\n      });\n      button.buttonElement.style.setProperty('--background-main', 'transparent');\n      button.textElement.setAttribute(\"data-i18n\", \"Load\");\n      this.leftContainer.appendChild(button.element);\n    }\n  }, {\n    key: \"initLoadDefaultBtn\",\n    value: function initLoadDefaultBtn() {\n      var button = new _component_js_button_js__WEBPACK_IMPORTED_MODULE_0__.Button({\n        container: '',\n        iconSrc: '',\n        title: 'Load Default',\n        fav: '',\n        showFavIcon: false,\n        callbacks: {\n          onClick: function onClick() {\n            document.getElementById('comfy-load-default-button').click();\n            window.gtag('event', 'click_loaddefault');\n          }\n        }\n      });\n      button.buttonElement.style.setProperty('--background-main', 'transparent');\n      button.textElement.setAttribute(\"data-i18n\", \"LoadDefault\");\n      this.leftContainer.appendChild(button.element);\n    }\n  }, {\n    key: \"initSaveBtn\",\n    value: function initSaveBtn() {\n      var button = new _component_js_button_js__WEBPACK_IMPORTED_MODULE_0__.Button({\n        container: '',\n        iconSrc: '',\n        title: 'Save',\n        fav: '',\n        showFavIcon: false,\n        callbacks: {\n          onClick: function onClick() {\n            document.getElementById('comfy-save-button').click();\n            window.gtag('event', 'click_save', {\n              'node_count': _ComfyUX_js__WEBPACK_IMPORTED_MODULE_5__.NodeListOfSidebar.length,\n              'fav_count': _ComfyUX_js__WEBPACK_IMPORTED_MODULE_5__.favWidgetCount,\n              'node_null_count': _ComfyUX_js__WEBPACK_IMPORTED_MODULE_5__.NodeNullCount\n            });\n          }\n        }\n      });\n      button.buttonElement.style.setProperty('--background-main', 'transparent');\n      button.textElement.setAttribute(\"data-i18n\", \"Save\");\n      this.leftContainer.appendChild(button.element);\n    }\n  }, {\n    key: \"initLangBtn\",\n    value: function initLangBtn() {\n      var button = new _component_js_button_js__WEBPACK_IMPORTED_MODULE_0__.Button({\n        container: '',\n        iconSrc: '',\n        title: '中文',\n        fav: '',\n        showFavIcon: false,\n        callbacks: {\n          onClick: function onClick() {\n            if (_ComfyUX_js__WEBPACK_IMPORTED_MODULE_5__.ComfyUXi18n.currentLanguage === 'en') {\n              _ComfyUX_js__WEBPACK_IMPORTED_MODULE_5__.ComfyUXi18n.setLanguage('zh');\n            } else {\n              _ComfyUX_js__WEBPACK_IMPORTED_MODULE_5__.ComfyUXi18n.setLanguage('en');\n            }\n            window.gtag('event', 'click_lang', {\n              'current_Language': _ComfyUX_js__WEBPACK_IMPORTED_MODULE_5__.ComfyUXi18n.currentLanguage\n            });\n          }\n        }\n      });\n      button.buttonElement.style.setProperty('--background-main', 'transparent');\n      button.textElement.setAttribute(\"data-i18n\", \"Lang\");\n      this.leftContainer.appendChild(button.element);\n    }\n  }, {\n    key: \"initManagerBtn\",\n    value: function initManagerBtn() {\n      var _this3 = this;\n      var btnsOfComfyMenu = document.getElementsByClassName('comfy-menu')[0].querySelectorAll('button');\n      if (btnsOfComfyMenu) {\n        var _loop = function _loop(i) {\n          if (btnsOfComfyMenu[i].innerText == 'Manager') {\n            var button = new _component_js_button_js__WEBPACK_IMPORTED_MODULE_0__.Button({\n              container: '',\n              iconSrc: '',\n              title: 'Manager',\n              fav: '',\n              showFavIcon: false,\n              callbacks: {\n                onClick: function onClick() {\n                  btnsOfComfyMenu[i].click();\n                  window.gtag('event', 'click_manager');\n                }\n              }\n            });\n            button.buttonElement.style.setProperty('--background-main', 'transparent');\n            _this3.leftContainer.appendChild(button.element);\n            return 1; // break\n          }\n        };\n        for (var i = 0; i < btnsOfComfyMenu.length; i++) {\n          if (_loop(i)) break;\n        }\n      }\n    }\n  }, {\n    key: \"initProcess\",\n    value: function initProcess() {}\n  }, {\n    key: \"initRunBtn\",\n    value: function initRunBtn() {\n      var _this4 = this;\n      var button = new _component_js_button_js__WEBPACK_IMPORTED_MODULE_0__.Button({\n        container: '',\n        iconSrc: _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_4__.staticPath + 'component/img/run.png',\n        title: 'Run',\n        fav: '',\n        showFavIcon: false,\n        callbacks: {\n          onClick: function onClick() {\n            // document.getElementById('queue-button').click();\n            app.queuePrompt(0, _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_4__.ComnfyUIui.batchCount);\n            _this4.runBtnUpdate(button);\n            window.gtag('event', 'click_run', {\n              'node_count': _ComfyUX_js__WEBPACK_IMPORTED_MODULE_5__.NodeListOfSidebar.length\n            });\n          }\n        }\n      });\n      button.buttonElement.style.setProperty('--background-main', 'var(--primary)');\n      button.buttonElement.style.setProperty('--text-gray', 'var(--text-main)');\n      button.buttonElement.style.fontWeight = 'var(--bold)';\n      button.textElement.setAttribute(\"data-i18n\", \"Run\");\n      this.rightContainer.appendChild(button.element);\n    }\n  }, {\n    key: \"runBtnUpdate\",\n    value: function runBtnUpdate(button) {\n      var _this5 = this;\n      var timer = setInterval(function () {\n        //await shit can't be inside setInterval\n        _this5.isRunning(button, timer);\n      }, 1000);\n    }\n  }, {\n    key: \"isRunning\",\n    value: function () {\n      var _isRunning = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(button, timer) {\n        var queue;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_4__.ComnfyUIapi.getQueue();\n            case 2:\n              queue = _context.sent;\n              if (queue.Running.length) {\n                button.setText('Add to Run Queue');\n              } else {\n                button.setText('Run');\n                clearInterval(timer);\n              }\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee);\n      }));\n      function isRunning(_x, _x2) {\n        return _isRunning.apply(this, arguments);\n      }\n      return isRunning;\n    }()\n  }, {\n    key: \"initQueueFrontBtn\",\n    value: function initQueueFrontBtn() {\n      var button = new _component_js_button_js__WEBPACK_IMPORTED_MODULE_0__.Button({\n        container: '',\n        iconSrc: '',\n        title: 'Queue Front',\n        fav: '',\n        showFavIcon: false,\n        callbacks: {\n          onClick: function onClick() {\n            return document.getElementById('queue-button').click();\n          }\n        }\n      });\n      button.buttonElement.style.setProperty('--background-main', 'transparent');\n      button.buttonElement.style.border = '1px solid var(--hover)';\n      button.textElement.setAttribute(\"data-i18n\", \"QueueFront\");\n      this.rightContainer.appendChild(button.element);\n    }\n  }, {\n    key: \"initInspectBtn\",\n    value: function initInspectBtn() {\n      var crystools = document.getElementById('crystools-root');\n      var ComfyUXInspect = document.createElement('div');\n      ComfyUXInspect.appendChild(crystools);\n      document.body.appendChild(ComfyUXInspect);\n      ComfyUXInspect.className = 'ComfyUXInspect';\n      ComfyUXInspect.style.zIndex = '9999';\n      ComfyUXInspect.style.padding = 'var(--space-m)';\n      ComfyUXInspect.style.borderRadius = '4px';\n      ComfyUXInspect.style.backgroundColor = 'var(--background-main)';\n      ComfyUXInspect.style.position = 'fixed';\n      ComfyUXInspect.style.width = '200px';\n      ComfyUXInspect.style.top = '100px';\n      ComfyUXInspect.style.display = 'none';\n      ComfyUXInspect.style.left = '8px';\n      var button = new _component_js_button_js__WEBPACK_IMPORTED_MODULE_0__.Button({\n        container: '',\n        iconSrc: _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_4__.staticPath + 'component/img/inspect.png',\n        title: '',\n        fav: '',\n        showFavIcon: false,\n        callbacks: {\n          onClick: function onClick() {\n            if (ComfyUXInspect.style.display === 'block') {\n              ComfyUXInspect.style.display = 'none';\n              window.gtag('event', 'toggle_inspect', {\n                'toggle': 'close'\n              });\n            } else {\n              ComfyUXInspect.style.display = 'block';\n              window.gtag('event', 'toggle_inspect', {\n                'toggle': 'open'\n              });\n            }\n          }\n        }\n      });\n      button.buttonElement.style.setProperty('--background-main', 'transparent');\n      this.leftContainer.appendChild(button.element);\n    }\n  }, {\n    key: \"initAutoRunSwitch\",\n    value: function initAutoRunSwitch() {\n      var autoQueueEnabled = false;\n      var autoQueueMode = 'change';\n      var switch1 = new _component_js_switch_js__WEBPACK_IMPORTED_MODULE_2__.Switch({\n        icon: '',\n        title: 'Auto',\n        hintOn: '',\n        hintOff: '',\n        fav: '',\n        showFavIcon: false,\n        onChange: function onChange(checked, hintElement) {\n          if (checked) {\n            autoQueueEnabled = true;\n            autoQueueMode = 'change';\n          } else {\n            autoQueueEnabled = false;\n          }\n          window.gtag('event', 'auto_run', {\n            'auto_run': checked\n          });\n        },\n        callbacks: {}\n      });\n      switch1.titleElement.style.width = '30px';\n      switch1.switchContainer.style.paddingTop = '8px';\n      switch1.switchContainer.style.setProperty('--background-main', 'var(--background-gray)');\n      switch1.switchContainer.style.paddingBottom = '8px';\n      this.rightContainer.appendChild(switch1.element);\n      _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_4__.ComnfyUIapi.addEventListener(\"graphChanged\", function () {\n        if (autoQueueMode === \"change\" && autoQueueEnabled === true) {\n          app.queuePrompt(0, _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_4__.ComnfyUIui.batchCount);\n        }\n      });\n    }\n  }, {\n    key: \"initBatchInput\",\n    value: function initBatchInput() {\n      var numInput = new _component_js_numinput_js__WEBPACK_IMPORTED_MODULE_1__.NumInput({\n        iconLeft: _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_4__.staticPath + 'component/img/arrow_left.png',\n        title: 'batch',\n        iconRight: _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_4__.staticPath + 'component/img/arrow_right.png',\n        min: 1,\n        max: 100,\n        round: 0,\n        step: 1,\n        fav: '',\n        value: 1,\n        showFavIcon: false,\n        precision: 0,\n        onChange: function onChange(value) {\n          _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_4__.ComnfyUIui.batchCount = value;\n          window.gtag('event', 'batch_count', {\n            'count': value\n          });\n        },\n        callbacks: {}\n      });\n      numInput.titleElement.style.width = '40px';\n      numInput.numberInputElement.style.width = '20px';\n      numInput.numInputContainer.style.setProperty('--background-main', 'var(--background-gray)');\n      numInput.numInputContainer.style.paddingTop = '5px';\n      numInput.numInputContainer.style.paddingBottom = '5px';\n      this.rightContainer.appendChild(numInput.element);\n    }\n  }, {\n    key: \"initToggleSidebar\",\n    value: function initToggleSidebar() {\n      var button = new _component_js_button_js__WEBPACK_IMPORTED_MODULE_0__.Button({\n        container: '',\n        iconSrc: _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_4__.staticPath + 'component/img/toggle_sidebar.png',\n        title: '',\n        fav: '',\n        showFavIcon: false,\n        callbacks: {\n          onClick: function onClick() {\n            if (document.getElementsByClassName('ComfyUXSidebar')[0].style.display === 'block') {\n              document.getElementsByClassName('ComfyUXSidebar')[0].style.display = 'none';\n              window.gtag('event', 'toggle_sidebar', {\n                'toggle': 'close'\n              });\n            } else {\n              document.getElementsByClassName('ComfyUXSidebar')[0].style.display = 'block';\n              window.gtag('event', 'toggle_sidebar', {\n                'toggle': 'open'\n              });\n            }\n          }\n        }\n      });\n      button.buttonElement.style.setProperty('--background-main', 'var(--background-gray)');\n      this.rightContainer.appendChild(button.element);\n    }\n  }, {\n    key: \"initUpdateBtn\",\n    value: function initUpdateBtn() {\n      var localVersionUrl = _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_4__.staticPath + \"version.json\";\n      var githubRepoOwner = \"googincheng\";\n      var githubRepoName = \"ComfyUX\";\n      var giteeRepoOwner = \"googincheng\";\n      var giteeRepoName = \"ComfyUX\";\n      var checker = new _update_js__WEBPACK_IMPORTED_MODULE_6__.Update(localVersionUrl, githubRepoOwner, githubRepoName, giteeRepoOwner, giteeRepoName);\n      if (typeof window.gtag != 'undefined') {\n        window.gtag('event', 'comfyux_start', {\n          'local_version': checker.localVersion,\n          'target_version': checker.targetVersion\n        });\n      }\n      function createUpdateBtn(_x3, _x4) {\n        return _createUpdateBtn.apply(this, arguments);\n      }\n      function _createUpdateBtn() {\n        _createUpdateBtn = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(rightContainer, showUpdateModal) {\n          var updateInfo, githubUrl, giteeUrl, button;\n          return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n            while (1) switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return checker.checkForUpdates();\n              case 2:\n                updateInfo = _context2.sent;\n                githubUrl = checker.githubUrl;\n                giteeUrl = checker.giteeUrl;\n                if (updateInfo.localVersion !== updateInfo.latestVersion) {\n                  button = new _component_js_button_js__WEBPACK_IMPORTED_MODULE_0__.Button({\n                    container: '',\n                    iconSrc: '',\n                    title: 'Update',\n                    fav: '',\n                    showFavIcon: false,\n                    callbacks: {\n                      onClick: function onClick() {\n                        showUpdateModal(updateInfo, githubUrl, giteeUrl);\n                        window.gtag('event', 'update_click_entry');\n                      }\n                    }\n                  });\n                  window.gtag('event', 'update_available');\n                  button.buttonElement.style.setProperty('--background-main', '-primary');\n                  button.buttonElement.style.border = '1px solid var(--hover)';\n                  button.textElement.setAttribute(\"data-i18n\", \"Update\");\n                  rightContainer.appendChild(button.element);\n                }\n              case 6:\n              case \"end\":\n                return _context2.stop();\n            }\n          }, _callee2);\n        }));\n        return _createUpdateBtn.apply(this, arguments);\n      }\n      createUpdateBtn(this.rightContainer, this.showUpdateModal);\n    }\n  }, {\n    key: \"showUpdateModal\",\n    value: function showUpdateModal(updateInfo, githubUrl, giteeUrl) {\n      // Example usage\n      var modal = new _component_js_modal_js__WEBPACK_IMPORTED_MODULE_3__.Modal(_ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_4__.staticPath + 'component/img/update_icon.png', 'New Version!', updateInfo.description, '');\n      document.body.appendChild(modal.getElement());\n\n      // const extraContent = document.createElement('p');\n      // extraContent.textContent = 'Additional content';\n      // modal.addContent(extraContent);\n\n      var buttons = [{\n        text: 'Github',\n        primary: true,\n        callback: function callback() {\n          window.open(githubUrl, '_blank');\n          window.gtag('event', 'update_click_github');\n        }\n      }, {\n        text: 'Gitee (中国)',\n        primary: true,\n        callback: function callback() {\n          window.open(giteeUrl, '_blank');\n          window.gtag('event', 'update_click_gitee');\n        }\n      }, {\n        text: 'Maybe Later',\n        primary: false,\n        callback: function callback() {\n          modal.removeElement();\n          window.gtag('event', 'update_click_cancel');\n        }\n      }];\n      modal.addFooter(buttons, 'Remember my choice', function (checked) {\n        if (checked) {\n          alert('Checkbox checked');\n        } else {\n          alert('Checkbox unchecked');\n        }\n      });\n    }\n  }]);\n}();\n\n//# sourceURL=webpack://comfyux-dev/./WebExtension/Topbar.js?");
        /***/    },
    /***/ "./WebExtension/component/js/button.js": 
    /*!*********************************************!*\
  !*** ./WebExtension/component/js/button.js ***!
  \*********************************************/
    /***/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
        eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Button: () => (/* binding */ Button)\n/* harmony export */ });\n/* harmony import */ var _css_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./css.js */ "./WebExtension/component/js/css.js");\n/* harmony import */ var _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../ComfyUIConnector.js */ "./WebExtension/ComfyUIConnector.js");\nfunction _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }\nfunction _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }\n\n\nvar Button = /*#__PURE__*/function () {\n  function Button(_ref) {\n    var container = _ref.container,\n      iconSrc = _ref.iconSrc,\n      fav = _ref.fav,\n      showFavIcon = _ref.showFavIcon,\n      title = _ref.title,\n      callbacks = _ref.callbacks;\n    _classCallCheck(this, Button);\n    this.container = container;\n    this.iconSrc = iconSrc;\n    this.title = title;\n    this.callbacks = callbacks;\n    this.disabled = false;\n    this.fav = fav;\n    this.showFavIcon = showFavIcon;\n    this.buttonElement;\n    this.element;\n    this.init();\n  }\n  return _createClass(Button, [{\n    key: "init",\n    value: function init() {\n      var _this = this;\n      this.rowElement = document.createElement(\'div\');\n      this.rowElement.className = \'row\';\n      this.favElement = document.createElement(\'div\');\n      this.favElement.className = \'fav\';\n      this.favIconElement = document.createElement(\'img\');\n      this.favElement.appendChild(this.favIconElement);\n      if (this.fav) {\n        this.favIconElement.src = _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_1__.staticPath + \'component/img/fav_sel.png\';\n      } else {\n        this.favIconElement.src = _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_1__.staticPath + \'component/img/fav_nor.png\';\n      }\n      if (!this.showFavIcon) {\n        this.favElement.style.display = \'none\';\n      }\n      this.buttonElement = document.createElement(\'div\');\n      this.buttonElement.className = \'button-container\';\n\n      //hover effect\n      this.buttonElement.onmousemove = function (e) {\n        var rect = _this.buttonElement.getBoundingClientRect();\n        var x = e.clientX - rect.left;\n        var y = e.clientY - rect.top;\n        _this.buttonElement.style.setProperty("--mouse-x", "".concat(x, "px"));\n        _this.buttonElement.style.setProperty("--mouse-y", "".concat(y, "px"));\n      };\n      var iconElement = document.createElement(\'img\');\n      iconElement.className = \'button-icon\';\n      iconElement.src = this.iconSrc;\n      if (!this.iconSrc) {\n        iconElement.style.display = \'none\';\n      }\n      var textElement = document.createElement(\'span\');\n      this.textElement = textElement;\n      textElement.className = \'button-text\';\n      textElement.textContent = this.title;\n      if (!this.title) {\n        textElement.style.display = \'none\';\n      }\n      this.rowElement.appendChild(this.buttonElement);\n      this.rowElement.appendChild(this.favElement);\n      this.buttonElement.appendChild(iconElement);\n      this.buttonElement.appendChild(textElement);\n      this.buttonElement.addEventListener(\'click\', function () {\n        return _this.handleClick();\n      });\n      this.buttonElement.addEventListener(\'mouseover\', function () {\n        return _this.handleMouseOver();\n      });\n      this.buttonElement.addEventListener(\'mouseout\', function () {\n        return _this.handleMouseOut();\n      });\n      this.buttonElement.addEventListener(\'mousedown\', function () {\n        return _this.handleMouseDown();\n      });\n      this.buttonElement.addEventListener(\'mouseup\', function () {\n        return _this.handleMouseUp();\n      });\n      this.favElement.addEventListener(\'click\', function () {\n        return _this.handleFav();\n      });\n      if (this.container) {\n        if (_typeof(this.container) === "object") {\n          this.container.appendChild(this.rowElement);\n        } else {\n          console.log(\'container must be html object\');\n        }\n      } else {\n        this.element = this.rowElement;\n      }\n    }\n  }, {\n    key: "handleClick",\n    value: function handleClick() {\n      if (this.disabled) return;\n      if (this.callbacks.onClick) this.callbacks.onClick();\n    }\n  }, {\n    key: "handleFav",\n    value: function handleFav() {\n      if (this.fav) {\n        this.fav = false;\n        this.favElement.querySelector(\'img\').src = _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_1__.staticPath + \'component/img/fav_nor.png\';\n      } else {\n        this.fav = true;\n        this.favElement.querySelector(\'img\').src = _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_1__.staticPath + \'component/img/fav_sel.png\';\n      }\n      if (this.callbacks.onFav) this.callbacks.onFav(this.fav);\n    }\n  }, {\n    key: "handleMouseOver",\n    value: function handleMouseOver() {\n      if (this.disabled) return;\n      if (this.callbacks.onMouseOver) this.callbacks.onMouseOver();\n    }\n  }, {\n    key: "handleMouseOut",\n    value: function handleMouseOut() {\n      if (this.disabled) return;\n      if (this.callbacks.onMouseOut) this.callbacks.onMouseOut();\n    }\n  }, {\n    key: "handleMouseDown",\n    value: function handleMouseDown() {\n      if (this.disabled) return;\n      if (this.callbacks.onMouseDown) this.callbacks.onMouseDown();\n    }\n  }, {\n    key: "handleMouseUp",\n    value: function handleMouseUp() {\n      if (this.disabled) return;\n      if (this.callbacks.onMouseUp) this.callbacks.onMouseUp();\n    }\n  }, {\n    key: "setDisabled",\n    value: function setDisabled(isDisabled) {\n      this.disabled = isDisabled;\n      if (isDisabled) {\n        this.buttonElement.classList.add(\'disabled\');\n      } else {\n        this.buttonElement.classList.remove(\'disabled\');\n      }\n    }\n  }, {\n    key: "filter",\n    value: function filter(isShow) {\n      if (isShow) {\n        this.element.style.display = \'inline-flex\';\n      } else {\n        this.element.style.display = \'none\';\n      }\n    }\n  }, {\n    key: "setText",\n    value: function setText(text) {\n      this.textElement.textContent = text;\n    }\n  }]);\n}();\n\n//# sourceURL=webpack://comfyux-dev/./WebExtension/component/js/button.js?');
        /***/    },
    /***/ "./WebExtension/component/js/carousel.js": 
    /*!***********************************************!*\
  !*** ./WebExtension/component/js/carousel.js ***!
  \***********************************************/
    /***/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
        eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Carousel: () => (/* binding */ Carousel)\n/* harmony export */ });\n/* harmony import */ var _css_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./css.js */ "./WebExtension/component/js/css.js");\n/* harmony import */ var _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../ComfyUIConnector.js */ "./WebExtension/ComfyUIConnector.js");\nfunction _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }\nfunction _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }\n\n\nvar Carousel = /*#__PURE__*/function () {\n  /**\n   * Initializes the carousel with a container and an array of image sources.\n   * @param {HTMLElement | null} container - The DOM element to use as the carousel container. If null, a new container will be created.\n   * @param {string[]} images - An array of image source URLs.\n   */\n  function Carousel(container, images) {\n    _classCallCheck(this, Carousel);\n    if (container) {\n      this.container = container;\n    } else {\n      this.container = document.createElement("div");\n      this.container.className = \'carousel-container\';\n    }\n    this.images = images;\n    this.thumbnails = [];\n    this.currentIndex = 0;\n    this.element;\n    this.init();\n  }\n  return _createClass(Carousel, [{\n    key: "init",\n    value: function init() {\n      var _this = this;\n      // 创建主图片容器\n      this.mainContainer = document.createElement(\'div\');\n      this.mainContainer.className = \'carousel-main\';\n      this.mainImage = document.createElement(\'img\');\n      this.mainContainer.appendChild(this.mainImage);\n\n      // 创建缩略图容器\n      this.thumbnailContainer = document.createElement(\'div\');\n      this.thumbnailContainer.className = \'carousel-thumbnails\';\n\n      // 创建模态框\n      this.modal = document.createElement(\'div\');\n      this.modal.className = \'carousel-modal\';\n      this.modalImage = document.createElement(\'img\');\n      this.modal.appendChild(this.modalImage);\n      this.container.appendChild(this.mainContainer);\n      this.container.appendChild(this.thumbnailContainer);\n      document.body.appendChild(this.modal);\n      this.addThumbnail(this.images);\n      this.mainImage.addEventListener(\'click\', function () {\n        return _this.showModal();\n      });\n      this.modal.addEventListener(\'click\', function () {\n        return _this.hideModal();\n      });\n\n      // 支持触摸板及鼠标滚轮横向滚动\n      this.thumbnailContainer.addEventListener(\'wheel\', function (e) {\n        e.preventDefault();\n        _this.thumbnailContainer.scrollLeft += e.deltaX;\n        _this.thumbnailContainer.scrollLeft += e.deltaY;\n      });\n      this.element = this.container;\n    }\n  }, {\n    key: "addThumbnail",\n    value: function addThumbnail(imageSrcArray) {\n      var _this2 = this;\n      imageSrcArray.forEach(function (image, index) {\n        var thumbnail = document.createElement(\'img\');\n        thumbnail.src = image;\n        thumbnail.className = \'carousel-thumbnail\';\n        var thumbnailsIndex = _this2.thumbnails.length;\n        thumbnail.addEventListener(\'click\', function () {\n          return _this2.showImage(thumbnailsIndex);\n        });\n        // this.thumbnailContainer.appendChild(thumbnail);\n        // this.thumbnails.push(thumbnail);\n        // this.images.push(image);\n        _this2.thumbnailContainer.insertBefore(thumbnail, _this2.thumbnailContainer.firstChild); // Insert at the beginning\n        _this2.thumbnails.unshift(thumbnail); // Add to the beginning of the thumbnails array\n        // this.images.unshift(image); // Add to the beginning of the images array\n\n        _this2.thumbnails.forEach(function (thumb, idx) {\n          thumb.removeEventListener(\'click\', thumb.clickEvent);\n          thumb.clickEvent = function () {\n            return _this2.showImage(idx);\n          };\n          thumb.addEventListener(\'click\', thumb.clickEvent);\n        });\n      });\n      this.showImage(0);\n    }\n  }, {\n    key: "showImage",\n    value: function showImage(index) {\n      var _this3 = this;\n      this.currentIndex = index;\n      this.mainImage.style.opacity = 0;\n      this.thumbnails.forEach(function (thumbnail, idx) {\n        if (idx === index) {\n          thumbnail.classList.add(\'selected\');\n        } else {\n          thumbnail.classList.remove(\'selected\');\n        }\n      });\n      setTimeout(function () {\n        _this3.mainImage.src = _this3.thumbnails[index].src;\n        _this3.mainImage.style.opacity = 1;\n      }, 100); // 动画时间应与CSS过渡时间匹配\n    }\n  }, {\n    key: "showModal",\n    value: function showModal() {\n      this.modalImage.src = this.thumbnails[this.currentIndex].src;\n      this.modal.classList.add(\'show\');\n    }\n  }, {\n    key: "hideModal",\n    value: function hideModal() {\n      this.modal.classList.remove(\'show\');\n    }\n  }]);\n}();\n\n//# sourceURL=webpack://comfyux-dev/./WebExtension/component/js/carousel.js?');
        /***/    },
    /***/ "./WebExtension/component/js/checkbox.js": 
    /*!***********************************************!*\
  !*** ./WebExtension/component/js/checkbox.js ***!
  \***********************************************/
    /***/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
        eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Checkbox: () => (/* binding */ Checkbox)\n/* harmony export */ });\n/* harmony import */ var _css_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./css.js */ "./WebExtension/component/js/css.js");\n/* harmony import */ var _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../ComfyUIConnector.js */ "./WebExtension/ComfyUIConnector.js");\nfunction _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }\nfunction _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }\n\n\nvar Checkbox = /*#__PURE__*/function () {\n  function Checkbox(labelText) {\n    var labelPosition = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \'right\';\n    var callback = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n    _classCallCheck(this, Checkbox);\n    this.labelText = labelText;\n    this.labelPosition = labelPosition;\n    this.callback = callback;\n    this.checked = false;\n    this.element = document.createElement(\'div\');\n    this.init();\n  }\n  return _createClass(Checkbox, [{\n    key: "init",\n    value: function init() {\n      var _this = this;\n      this.element.className = \'checkbox-container\';\n      this.checkbox = document.createElement(\'div\');\n      this.checkbox.className = \'custom-checkbox\';\n      this.label = document.createElement(\'span\');\n      this.label.className = \'checkbox-label\';\n      this.label.textContent = this.labelText;\n      this.checkbox.addEventListener(\'click\', function (event) {\n        _this.toggleCheckbox();\n        event.stopPropagation();\n      });\n      if (this.labelPosition === \'left\') {\n        this.element.appendChild(this.label);\n        this.element.appendChild(this.checkbox);\n      } else {\n        this.element.appendChild(this.checkbox);\n        this.element.appendChild(this.label);\n      }\n    }\n  }, {\n    key: "toggleCheckbox",\n    value: function toggleCheckbox() {\n      this.checked = !this.checked;\n      this.checkbox.classList.toggle(\'checked\', this.checked);\n      if (this.callback) {\n        this.callback(this.checked);\n      }\n    }\n  }, {\n    key: "getElement",\n    value: function getElement() {\n      return this.element;\n    }\n  }, {\n    key: "isChecked",\n    value: function isChecked() {\n      return this.checked;\n    }\n  }, {\n    key: "setChecked",\n    value: function setChecked(value) {\n      this.checked = value;\n      this.checkbox.classList.toggle(\'checked\', this.checked);\n      if (this.callback) {\n        this.callback(this.checked);\n      }\n    }\n  }]);\n}();\n\n//# sourceURL=webpack://comfyux-dev/./WebExtension/component/js/checkbox.js?');
        /***/    },
    /***/ "./WebExtension/component/js/combo.js": 
    /*!********************************************!*\
  !*** ./WebExtension/component/js/combo.js ***!
  \********************************************/
    /***/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
        eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Combo: () => (/* binding */ Combo)\n/* harmony export */ });\n/* harmony import */ var _css_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./css.js */ \"./WebExtension/component/js/css.js\");\n/* harmony import */ var _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../ComfyUIConnector.js */ \"./WebExtension/ComfyUIConnector.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n\n\nvar Combo = /*#__PURE__*/function () {\n  function Combo(_ref) {\n    var icon = _ref.icon,\n      title = _ref.title,\n      options = _ref.options,\n      fav = _ref.fav,\n      defaultOption = _ref.defaultOption,\n      showFavIcon = _ref.showFavIcon,\n      isSupportSearch = _ref.isSupportSearch,\n      callbacks = _ref.callbacks;\n    _classCallCheck(this, Combo);\n    this.icon = icon;\n    this.title = title;\n    this.options = options;\n    this.defaultOption = defaultOption;\n    this.callbacks = callbacks;\n    this.showFavIcon = showFavIcon;\n    this.selectedOption = defaultOption;\n    this.offset; //use for scale when popup clipped\n    this.fav = fav;\n    this.isSupportSearch = isSupportSearch;\n    this.element = this.createCombo();\n    this.dragging = false;\n  }\n  return _createClass(Combo, [{\n    key: \"createCombo\",\n    value: function createCombo() {\n      var _this = this;\n      this.rowElement = document.createElement('div');\n      this.rowElement.className = 'row';\n      this.favElement = document.createElement('div');\n      this.favElement.className = 'fav';\n      this.favIconElement = document.createElement('img');\n      this.favElement.appendChild(this.favIconElement);\n      if (this.fav) {\n        this.favIconElement.src = _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_1__.staticPath + 'component/img/fav_sel.png';\n      } else {\n        this.favIconElement.src = _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_1__.staticPath + 'component/img/fav_nor.png';\n      }\n      if (!this.showFavIcon) {\n        this.favElement.style.display = 'none';\n      }\n      var container = document.createElement('div');\n      container.className = 'combo-container';\n\n      //hover effect\n      container.onmousemove = function (e) {\n        var rect = container.getBoundingClientRect();\n        var x = e.clientX - rect.left;\n        var y = e.clientY - rect.top;\n        container.style.setProperty(\"--mouse-x\", \"\".concat(x, \"px\"));\n        container.style.setProperty(\"--mouse-y\", \"\".concat(y, \"px\"));\n      };\n      var left = document.createElement('div');\n      left.className = 'combo-left';\n      var iconElement = document.createElement('img');\n      iconElement.src = this.icon;\n      iconElement.className = 'combo-icon';\n      var titleElement = document.createElement('span');\n      titleElement.className = 'combo-title';\n      titleElement.textContent = this.title;\n      left.appendChild(iconElement);\n      left.appendChild(titleElement);\n      var right = document.createElement('div');\n      right.className = 'combo-right';\n      var valueElement = document.createElement('span');\n      valueElement.className = 'combo-value';\n      valueElement.textContent = this.selectedOption;\n      var iconRightElement = document.createElement('img');\n      iconRightElement.src = _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_1__.staticPath + 'component/img/arrow_down.png'; // Update with your icon path\n      iconRightElement.className = 'combo-icon-right';\n      right.appendChild(valueElement);\n      right.appendChild(iconRightElement);\n      container.appendChild(left);\n      container.appendChild(right);\n      var dropdown = document.createElement('div');\n      this.dropdown = dropdown;\n      dropdown.className = 'combo-dropdown';\n      this.options.sort();\n      var searchInput = document.createElement('input');\n      this.searchInput = searchInput;\n      searchInput.className = 'combo-search';\n      dropdown.appendChild(searchInput);\n      searchInput.placeholder = 'Click to Search';\n      searchInput.setAttribute(\"data-i18n\", \"ClickToSearch\");\n      if (this.isSupportSearch) {\n        searchInput.style.display = 'flex';\n      } else {\n        searchInput.style.display = 'none';\n      }\n      this.options.forEach(function (option) {\n        var item = document.createElement('div');\n        item.className = 'combo-dropdown-item';\n        item.textContent = option;\n        item.onclick = function () {\n          return _this.selectOption(option);\n        };\n        if (option === _this.defaultOption) {\n          item.classList.add('selected');\n        }\n        dropdown.appendChild(item);\n      });\n      var menuItems = dropdown.querySelectorAll('.combo-dropdown-item');\n      searchInput.addEventListener('input', function () {\n        var searchTerm = this.value.toLowerCase();\n        menuItems.forEach(function (item) {\n          var text = item.textContent || item.innerText;\n          if (text.toLowerCase().includes(searchTerm)) {\n            var highlightedText = text.replace(new RegExp(searchTerm, 'g'), function (match) {\n              return \"<span class=\\\"highlight\\\">\".concat(match, \"</span>\");\n            });\n            item.innerHTML = item.textContent.replace(new RegExp(searchTerm, 'gi'), function (match) {\n              return \"<span class=\\\"highlight\\\">\".concat(match, \"</span>\");\n            });\n            item.style.display = '';\n          } else {\n            item.style.display = 'none';\n          }\n        });\n      });\n      if (dropdown.childElementCount === 0) {\n        dropdown.textContent = '(Nothing here Bae❤️)';\n      }\n      this.favElement.addEventListener('click', function () {\n        return _this.handleFav();\n      });\n      this.rowElement.appendChild(container);\n      this.rowElement.appendChild(this.favElement);\n      document.body.appendChild(dropdown);\n\n      // valueElement.onclick = () => this.toggleDropdown(dropdown, container);\n      // iconRightElement.onclick = () => this.toggleDropdown(dropdown, container);\n\n      this.isNeedScale = false;\n      container.onclick = function () {\n        return _this.toggleDropdown(dropdown, container);\n      };\n      dropdown.style.display = 'none';\n      return this.rowElement;\n    }\n    // //内嵌式的下拉菜单 弃用\n    // toggleDropdown(dropdown, container) {\n    //     const valueRect = container.getBoundingClientRect();\n    //     const containerRect = this.rowElement.parentElement.getBoundingClientRect();\n\n    //     if(dropdown.style.display === 'none'){\n    //         dropdown.style.display = 'block';\n    //         //todo 添加收藏后，parentElement会改变\n    //         if(containerRect.bottom - valueRect.bottom < dropdown.clientHeight){\n    //             this.isNeedScale = true;\n    //             this.offset = dropdown.clientHeight - (containerRect.bottom - valueRect.bottom) + 16;        \n    //             this.rowElement.parentElement.style.height = this.rowElement.parentElement.clientHeight + this.offset +'px';\n    //         }\n    //     }\n    //     else{\n    //         if(this.isNeedScale){\n    //             this.rowElement.parentElement.style.height = this.rowElement.parentElement.clientHeight - this.offset +'px';\n    //             this.isNeedScale = false;\n    //         }\n    //         dropdown.style.display = 'none';\n    //     }\n    //     // dropdown.style.display = dropdown.style.display === 'none' ? 'block' : 'none';\n    // }\n  }, {\n    key: \"toggleDropdown\",\n    value: function toggleDropdown(dropdown, container) {\n      var valueRect = container.getBoundingClientRect();\n      if (dropdown.style.display === 'none') {\n        dropdown.style.display = 'block';\n        dropdown.style.setProperty('--topleft-x', valueRect.left + 'px');\n        dropdown.style.setProperty('--topleft-y', valueRect.bottom + 4 + 'px');\n        dropdown.style.width = valueRect.right - valueRect.left + 'px';\n        this.searchInput.focus();\n        //reset search input\n        this.searchInput.value = '';\n        dropdown.querySelectorAll('.combo-dropdown-item').forEach(function (item) {\n          item.style.display = '';\n          item.innerHTML = item.innerHTML.replace(/<span class=\"highlight\">(.*?)<\\/span>/g, '$1');\n        });\n        //click empty to close dropdown\n        document.addEventListener('click', function (event) {\n          event.stopPropagation();\n          if (!dropdown.contains(event.target) && !event.target.contains(container)) {\n            dropdown.style.display = 'none';\n            document.removeEventListener('click', function () {});\n          }\n        });\n      } else {\n        dropdown.style.display = 'none';\n      }\n    }\n  }, {\n    key: \"selectOption\",\n    value: function selectOption(option) {\n      this.selectedOption = option;\n      this.element.querySelector('.combo-value').textContent = option;\n      this.dropdown.querySelectorAll('.combo-dropdown-item').forEach(function (item) {\n        item.classList.toggle('selected', item.textContent === option);\n      });\n      this.dropdown.style.display = 'none';\n      if (this.callbacks) {\n        this.callbacks.onSelect(option);\n      }\n    }\n  }, {\n    key: \"handleFav\",\n    value: function handleFav() {\n      if (this.fav) {\n        this.fav = false;\n        this.favElement.querySelector('img').src = _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_1__.staticPath + 'component/img/fav_nor.png';\n      } else {\n        this.fav = true;\n        this.favElement.querySelector('img').src = _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_1__.staticPath + 'component/img/fav_sel.png';\n      }\n      if (this.callbacks.onFav) this.callbacks.onFav(this.fav);\n    }\n  }, {\n    key: \"setOption\",\n    value: function setOption(option) {\n      this.selectedOption = option;\n      this.element.querySelector('.combo-value').textContent = option;\n      this.dropdown.querySelectorAll('.combo-dropdown-item').forEach(function (item) {\n        item.classList.toggle('selected', item.textContent === option);\n      });\n    }\n  }, {\n    key: \"filter\",\n    value: function filter(isShow) {\n      if (isShow) {\n        this.element.style.display = 'inline-flex';\n      } else {\n        this.element.style.display = 'none';\n      }\n    }\n  }]);\n}();\n\n//# sourceURL=webpack://comfyux-dev/./WebExtension/component/js/combo.js?");
        /***/    },
    /***/ "./WebExtension/component/js/css.js": 
    /*!******************************************!*\
  !*** ./WebExtension/component/js/css.js ***!
  \******************************************/
    /***/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
        eval('__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../ComfyUIConnector.js */ "./WebExtension/ComfyUIConnector.js");\n\nvar cssLink1 = document.createElement("link");\ncssLink1.rel = "stylesheet";\ncssLink1.href = _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_0__.staticPath + "component/css/global_dark.css";\ndocument.head.appendChild(cssLink1);\nvar cssLink2 = document.createElement("link");\ncssLink2.rel = "stylesheet";\ncssLink2.href = _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_0__.staticPath + "component/css/dropdown.css";\ndocument.head.appendChild(cssLink2);\nvar cssLink3 = document.createElement("link");\ncssLink3.rel = "stylesheet";\ncssLink3.href = _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_0__.staticPath + "component/css/carousel.css";\ndocument.head.appendChild(cssLink3);\nvar cssLink4 = document.createElement("link");\ncssLink4.rel = "stylesheet";\ncssLink4.href = _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_0__.staticPath + "component/css/button.css";\ndocument.head.appendChild(cssLink4);\nvar cssLink5 = document.createElement("link");\ncssLink5.rel = "stylesheet";\ncssLink5.href = _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_0__.staticPath + "component/css/switch.css";\ndocument.head.appendChild(cssLink5);\nvar cssLink6 = document.createElement("link");\ncssLink6.rel = "stylesheet";\ncssLink6.href = _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_0__.staticPath + "component/css/numinput.css";\ndocument.head.appendChild(cssLink6);\nvar cssLink7 = document.createElement("link");\ncssLink7.rel = "stylesheet";\ncssLink7.href = _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_0__.staticPath + "component/css/multiinput.css";\ndocument.head.appendChild(cssLink7);\nvar cssLink8 = document.createElement("link");\ncssLink8.rel = "stylesheet";\ncssLink8.href = _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_0__.staticPath + "component/css/combo.css";\ndocument.head.appendChild(cssLink8);\nvar cssLink9 = document.createElement("link");\ncssLink9.rel = "stylesheet";\ncssLink9.href = _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_0__.staticPath + "component/css/tab.css";\ndocument.head.appendChild(cssLink9);\nvar cssLink10 = document.createElement("link");\ncssLink10.rel = "stylesheet";\ncssLink10.href = _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_0__.staticPath + "component/css/filter.css";\ndocument.head.appendChild(cssLink10);\nvar cssLink11 = document.createElement("link");\ncssLink11.rel = "stylesheet";\ncssLink11.href = _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_0__.staticPath + "component/css/listitem.css";\ndocument.head.appendChild(cssLink11);\nvar cssLink12 = document.createElement("link");\ncssLink12.rel = "stylesheet";\ncssLink12.href = _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_0__.staticPath + "component/css/modal.css";\ndocument.head.appendChild(cssLink12);\nvar cssLink13 = document.createElement("link");\ncssLink13.rel = "stylesheet";\ncssLink13.href = _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_0__.staticPath + "component/css/checkbox.css";\ndocument.head.appendChild(cssLink13);\nvar cssLink14 = document.createElement("link");\ncssLink14.rel = "stylesheet";\ncssLink14.href = _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_0__.staticPath + "component/css/singleinput.css";\ndocument.head.appendChild(cssLink14);\nvar cssLink15 = document.createElement("link");\ncssLink15.rel = "stylesheet";\ncssLink15.href = _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_0__.staticPath + "component/css/searchbox.css";\ndocument.head.appendChild(cssLink15);\n\n//# sourceURL=webpack://comfyux-dev/./WebExtension/component/js/css.js?');
        /***/    },
    /***/ "./WebExtension/component/js/dropdown.js": 
    /*!***********************************************!*\
  !*** ./WebExtension/component/js/dropdown.js ***!
  \***********************************************/
    /***/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
        eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Dropdown: () => (/* binding */ Dropdown)\n/* harmony export */ });\n/* harmony import */ var _css_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./css.js */ \"./WebExtension/component/js/css.js\");\n/* harmony import */ var _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../ComfyUIConnector.js */ \"./WebExtension/ComfyUIConnector.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n\n\nvar Dropdown = /*#__PURE__*/function () {\n  function Dropdown(container, options) {\n    _classCallCheck(this, Dropdown);\n    this.container = container;\n    this.nodeID = options.nodeID;\n    this.title = options.title;\n    this.iconLeft = options.iconLeft;\n    this.iconRight = options.iconRight;\n    this.buttonText = options.buttonText;\n    this.buttonIcon = options.buttonIcon;\n    this.content = options.content;\n    this.color;\n    this.buttonFunctions = options.buttonFunctions || {};\n    this.widgets = [];\n    this.isSelected = false;\n    this.fav = options.fav;\n    this.isBypass = options.isBypass;\n    this.isMiss = options.isMiss;\n    this.callbacks = options.callbacks;\n    this.isExpand = false;\n    this.element;\n    this.init();\n  }\n  return _createClass(Dropdown, [{\n    key: \"init\",\n    value: function init() {\n      var _this = this;\n      // Create elements\n      var dropdownTitle = document.createElement('div');\n      this.dropdownTitle = dropdownTitle;\n      dropdownTitle.classList.add('dropdown-title');\n      dropdownTitle.addEventListener('click', function () {\n        return _this.toggleContent();\n      });\n      //hover effect\n      dropdownTitle.onmousemove = function (e) {\n        var rect = dropdownTitle.getBoundingClientRect();\n        var x = e.clientX - rect.left;\n        var y = e.clientY - rect.top;\n        dropdownTitle.style.setProperty(\"--mouse-x\", \"\".concat(x, \"px\"));\n        dropdownTitle.style.setProperty(\"--mouse-y\", \"\".concat(y, \"px\"));\n      };\n      var titleLeft = document.createElement('div');\n      titleLeft.classList.add('dropdown-title-left');\n      var titleIconLeft = document.createElement('img');\n      titleIconLeft.src = this.iconLeft;\n      titleIconLeft.addEventListener('click', function (e) {\n        _this.toggleBypass();\n        event.stopPropagation();\n      });\n      titleLeft.appendChild(titleIconLeft);\n      var titleText = document.createElement('span');\n      titleText.textContent = this.title;\n      titleLeft.appendChild(titleText);\n      var titleRight = document.createElement('div');\n      titleRight.classList.add('dropdown-title-right');\n      if (this.buttonIcon) {\n        var button = document.createElement('div');\n        button.classList.add('dropdown-button');\n        var buttonIcon = document.createElement('img');\n        var buttonText = document.createElement('span');\n        buttonText.textContent = this.buttonText;\n        buttonIcon.src = this.buttonIcon;\n        button.appendChild(buttonIcon);\n        button.appendChild(buttonText);\n        button.addEventListener('click', function (e) {\n          e.stopPropagation();\n          _this.handleButtonClick('normal');\n        });\n        button.addEventListener('mouseover', function () {\n          return _this.handleButtonClick('hover');\n        });\n        button.addEventListener('mousedown', function () {\n          return _this.handleButtonClick('pressed');\n        });\n        button.addEventListener('mouseup', function () {\n          return _this.handleButtonClick('normal');\n        });\n        titleRight.appendChild(button);\n      }\n      var titleIconRight = document.createElement('img');\n      titleIconRight.src = this.iconRight;\n      titleRight.appendChild(titleIconRight);\n      dropdownTitle.appendChild(titleLeft);\n      dropdownTitle.appendChild(titleRight);\n      var dropdownContent = document.createElement('div');\n      this.dropdownContent = dropdownContent;\n      dropdownContent.classList.add('dropdown-content');\n      dropdownContent.innerHTML = this.content;\n      if (this.isBypass) {\n        this.dropdownTitle.classList.add('bypass');\n        this.dropdownContent.classList.add('bypass');\n      }\n      if (this.isMiss) {\n        this.dropdownTitle.classList.add('miss');\n        this.dropdownContent.classList.add('miss');\n      }\n      this.element = document.createElement('div');\n      this.element.id = this.nodeID;\n      this.element.appendChild(dropdownTitle);\n      this.element.appendChild(dropdownContent);\n      if (this.container) {\n        if (_typeof(this.container) !== 'object' || this.container === null || !('nodeType' in this.container)) {\n          console.error(\"container must be dom object\");\n        } else {\n          this.container.appendChild(this.element);\n        }\n      }\n      this.dropdownContent = dropdownContent;\n    }\n  }, {\n    key: \"toggleContent\",\n    value: function toggleContent() {\n      if (this.dropdownContent.classList.contains('open')) {\n        this.dropdownContent.style.height = '0';\n        this.dropdownContent.classList.remove('open');\n        this.dropdownTitle.classList.remove('selected');\n        this.isExpand = false;\n        this.isSelected = false;\n      } else {\n        this.isExpand = true;\n        this.isSelected = true;\n        this.dropdownContent.style.height = \"\".concat(this.dropdownContent.scrollHeight + 24, \"px\");\n        this.dropdownContent.classList.add('open');\n        this.dropdownTitle.classList.add('selected');\n      }\n    }\n  }, {\n    key: \"addElement\",\n    value: function addElement(widget) {\n      this.widgets.push(widget);\n      this.dropdownContent.appendChild(widget.element);\n    }\n  }, {\n    key: \"handleButtonClick\",\n    value: function handleButtonClick(state) {\n      if (this.buttonFunctions[state]) {\n        this.buttonFunctions[state]();\n      }\n    }\n  }, {\n    key: \"filter\",\n    value: function filter(isShow) {\n      if (isShow) {\n        this.element.style.display = 'block';\n      } else {\n        this.element.style.display = 'none';\n      }\n    }\n  }, {\n    key: \"updateHeight\",\n    value: function updateHeight() {\n      this.dropdownContent.style.height = \"\".concat(this.dropdownContent.scrollHeight + 24, \"px\");\n    }\n    //todo optimize , click all filter expand all\n  }, {\n    key: \"toggleAll\",\n    value: function toggleAll(isOpen) {\n      var _this2 = this;\n      if (isOpen) {\n        this.isExpand = false;\n        this.isSelected = false;\n        this.dropdownContent.style.height = '0';\n        this.dropdownContent.classList.remove('open');\n      } else {\n        this.dropdownContent.style.height = '0';\n        this.dropdownContent.classList.remove('open');\n        setTimeout(function () {\n          _this2.toggleContent();\n        }, 100);\n      }\n    }\n  }, {\n    key: \"toggleBypass\",\n    value: function toggleBypass() {\n      console.log(\"toggleBypass\");\n      if (this.isBypass) {\n        this.isBypass = !this.isBypass;\n        this.dropdownTitle.classList.remove('bypass');\n        this.dropdownContent.classList.remove('bypass');\n        if (this.callbacks.onBypass) {\n          this.callbacks.onBypass(this.isBypass);\n        }\n      } else {\n        this.isBypass = !this.isBypass;\n        this.dropdownTitle.classList.add('bypass');\n        this.dropdownContent.classList.add('bypass');\n        if (this.callbacks.onBypass) {\n          this.callbacks.onBypass(this.isBypass);\n        }\n      }\n    }\n  }]);\n}();\n\n//# sourceURL=webpack://comfyux-dev/./WebExtension/component/js/dropdown.js?");
        /***/    },
    /***/ "./WebExtension/component/js/filter.js": 
    /*!*********************************************!*\
  !*** ./WebExtension/component/js/filter.js ***!
  \*********************************************/
    /***/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
        eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Filter: () => (/* binding */ Filter)\n/* harmony export */ });\n/* harmony import */ var _css_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./css.js */ "./WebExtension/component/js/css.js");\nfunction _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }\nfunction _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }\n\nvar Filter = /*#__PURE__*/function () {\n  function Filter(categories, callback) {\n    _classCallCheck(this, Filter);\n    this.categories = categories;\n    this.callback = callback;\n    this.selectedCategory = this.categories[0]; //default selectf\n    this.element = this.init();\n  }\n  return _createClass(Filter, [{\n    key: "init",\n    value: function init() {\n      var _this = this;\n      var container = document.createElement(\'div\');\n      container.classList.add(\'filter-container\');\n\n      //hover effect\n      container.onmousemove = function (e) {\n        var rect = container.getBoundingClientRect();\n        var x = e.clientX - rect.left;\n        var y = e.clientY - rect.top;\n        container.style.setProperty("--mouse-x", "".concat(x, "px"));\n        container.style.setProperty("--mouse-y", "".concat(y, "px"));\n      };\n      this.optionsContainer = document.createElement(\'div\');\n      this.optionsContainer.classList.add(\'filter-options\');\n      this.categories.forEach(function (category) {\n        var option = document.createElement(\'div\');\n        option.classList.add(\'filter-option\');\n        option.classList.add(category.name);\n        var optionName = document.createElement(\'div\');\n        optionName.classList.add(\'filter-option-name\');\n        optionName.setAttribute("data-i18n", category.name);\n        optionName.textContent = category.name;\n        var optionCnt = document.createElement(\'div\');\n        optionCnt.classList.add(\'filter-option-cnt\');\n        optionCnt.textContent = category.count;\n        option.appendChild(optionName);\n        option.appendChild(optionCnt);\n        option.addEventListener(\'click\', function () {\n          return _this.selectCategory(category, option);\n        });\n        _this.optionsContainer.appendChild(option);\n      });\n\n      // optionsContainer.children[0].classList.add(\'selected\');\n\n      container.appendChild(this.optionsContainer);\n      return container;\n    }\n  }, {\n    key: "selectCategory",\n    value: function selectCategory(category, optionElement) {\n      if (optionElement.classList.contains(\'disabled\')) return;\n      this.clearSelection();\n      this.selectedCategory = category;\n      optionElement.classList.add(\'selected\');\n      if (this.callback) {\n        this.callback(category);\n      }\n    }\n  }, {\n    key: "clearSelection",\n    value: function clearSelection() {\n      var options = this.element.querySelectorAll(\'.filter-option\');\n      options.forEach(function (option) {\n        return option.classList.remove(\'selected\');\n      });\n    }\n  }, {\n    key: "addCategory",\n    value: function addCategory(category) {\n      var _this2 = this;\n      var option = document.createElement(\'div\');\n      option.classList.add(\'filter-option\');\n      option.textContent = "".concat(category.name, " (").concat(category.count, ")");\n      option.addEventListener(\'click\', function () {\n        return _this2.selectCategory(category, option);\n      });\n      this.element.querySelector(\'.filter-options\').appendChild(option);\n      this.categories.push(category);\n    }\n  }, {\n    key: "disableCategory",\n    value: function disableCategory(categoryName) {\n      var options = this.element.querySelectorAll(\'.filter-option\');\n      options.forEach(function (option) {\n        if (option.textContent.startsWith(categoryName)) {\n          option.classList.add(\'disabled\');\n        }\n      });\n    }\n  }, {\n    key: "setCategoryCount",\n    value: function setCategoryCount(cntList) {\n      var tabList = this.optionsContainer.querySelectorAll(\'.filter-option-cnt\');\n      for (var i = 0; i < tabList.length; i++) {\n        tabList[i].textContent = cntList[i];\n        this.categories[i].count = cntList[i];\n      }\n    }\n  }]);\n}();\n\n//# sourceURL=webpack://comfyux-dev/./WebExtension/component/js/filter.js?');
        /***/    },
    /***/ "./WebExtension/component/js/listitem.js": 
    /*!***********************************************!*\
  !*** ./WebExtension/component/js/listitem.js ***!
  \***********************************************/
    /***/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
        eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ListItem: () => (/* binding */ ListItem)\n/* harmony export */ });\n/* harmony import */ var _button_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./button.js */ "./WebExtension/component/js/button.js");\n/* harmony import */ var _css_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./css.js */ "./WebExtension/component/js/css.js");\n/* harmony import */ var _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../ComfyUIConnector.js */ "./WebExtension/ComfyUIConnector.js");\nfunction _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }\nfunction _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }\n\n\n\nvar ListItem = /*#__PURE__*/function () {\n  function ListItem(_ref) {\n    var iconUrl = _ref.iconUrl,\n      name = _ref.name,\n      status = _ref.status,\n      callbacks = _ref.callbacks,\n      button1Text = _ref.button1Text,\n      button2Img = _ref.button2Img;\n    _classCallCheck(this, ListItem);\n    this.iconUrl = iconUrl;\n    this.name = name;\n    this.button1Text = button1Text;\n    this.button2Img = button2Img;\n    this.callbacks = callbacks;\n    this.status = status;\n    this.element;\n    this.init();\n  }\n  return _createClass(ListItem, [{\n    key: "init",\n    value: function init() {\n      var _this = this;\n      this.element = document.createElement(\'div\');\n      this.element.className = \'list-item\';\n\n      // Left container\n      var leftContainer = document.createElement(\'div\');\n      leftContainer.className = \'list-item-left\';\n      if (this.iconUrl) {\n        var icon = document.createElement(\'img\');\n        icon.src = this.iconUrl;\n        icon.className = \'list-item-icon\';\n        leftContainer.appendChild(icon);\n      }\n      if (this.status) {\n        var status = document.createElement(\'span\');\n        this.statusElement = status;\n        status.className = \'list-item-status\';\n        status.textContent = this.status;\n        leftContainer.appendChild(status);\n      }\n      var name = document.createElement(\'span\');\n      this.nameElement = name;\n      name.className = \'list-item-name\';\n      name.textContent = this.name;\n      leftContainer.appendChild(name);\n\n      // Right container\n      var rightContainer = document.createElement(\'div\');\n      rightContainer.className = \'list-item-right\';\n      this.element.appendChild(leftContainer);\n      this.element.appendChild(rightContainer);\n      if (this.button1Text) {\n        this.button1 = new _button_js__WEBPACK_IMPORTED_MODULE_0__.Button({\n          container: \'\',\n          iconSrc: \'\',\n          title: this.button1Text,\n          fav: \'\',\n          showFavIcon: false,\n          callbacks: {\n            onClick: function onClick() {\n              if (_this.callbacks) {\n                _this.callbacks.onButton1Click();\n              }\n            }\n          }\n        });\n        this.addElement(this.button1.element);\n      }\n      if (this.button2Img) {\n        this.button2 = new _button_js__WEBPACK_IMPORTED_MODULE_0__.Button({\n          container: \'\',\n          iconSrc: this.button2Img,\n          title: \'\',\n          fav: \'\',\n          showFavIcon: false,\n          callbacks: {\n            onClick: function onClick() {\n              if (_this.callbacks) {\n                _this.callbacks.onButton2Click();\n              }\n            }\n          }\n        });\n        this.addElement(this.button2.element);\n      }\n    }\n  }, {\n    key: "addElement",\n    value: function addElement(element) {\n      var rightContainer = this.element.querySelector(\'.list-item-right\');\n      rightContainer.appendChild(element);\n    }\n  }, {\n    key: "getElement",\n    value: function getElement() {\n      return this.element;\n    }\n  }]);\n}();\n\n//# sourceURL=webpack://comfyux-dev/./WebExtension/component/js/listitem.js?');
        /***/    },
    /***/ "./WebExtension/component/js/modal.js": 
    /*!********************************************!*\
  !*** ./WebExtension/component/js/modal.js ***!
  \********************************************/
    /***/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
        eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Modal: () => (/* binding */ Modal)\n/* harmony export */ });\n/* harmony import */ var _button_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./button.js */ \"./WebExtension/component/js/button.js\");\n/* harmony import */ var _checkbox_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./checkbox.js */ \"./WebExtension/component/js/checkbox.js\");\n/* harmony import */ var _css_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./css.js */ \"./WebExtension/component/js/css.js\");\n/* harmony import */ var _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../ComfyUIConnector.js */ \"./WebExtension/ComfyUIConnector.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n\n\n\n\nvar Modal = /*#__PURE__*/function () {\n  function Modal(iconUrl, title) {\n    var content = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '';\n    var backgroundUrl = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : '';\n    _classCallCheck(this, Modal);\n    this.iconUrl = iconUrl;\n    this.title = title;\n    this.content = content;\n    this.backgroundUrl = backgroundUrl;\n    this.element = document.createElement('div');\n    this.init();\n  }\n  return _createClass(Modal, [{\n    key: \"init\",\n    value: function init() {\n      this.element.className = 'ComfuUX-modal';\n      this.modalElement = document.createElement('div');\n      this.modalElement.className = 'modal';\n      this.element.appendChild(this.modalElement);\n      if (this.backgroundUrl) {\n        var background = document.createElement('div');\n        background.className = 'modal-background';\n        background.style.backgroundImage = \"url(\".concat(this.backgroundUrl, \")\");\n        background.style.backgroundSize = 'cover';\n        this.modalElement.appendChild(background);\n      }\n\n      // Header\n      var header = document.createElement('div');\n      header.className = 'modal-header';\n      var icon = document.createElement('img');\n      icon.src = this.iconUrl;\n      icon.className = 'modal-icon';\n      var title = document.createElement('span');\n      title.className = 'modal-title';\n      title.textContent = this.title;\n      header.appendChild(icon);\n      header.appendChild(title);\n\n      // Content\n      var content = document.createElement('div');\n      content.className = 'modal-content';\n      content.innerHTML = this.content;\n      this.modalElement.appendChild(header);\n      this.modalElement.appendChild(content);\n    }\n  }, {\n    key: \"addContent\",\n    value: function addContent(element) {\n      this.modalElement.appendChild(element);\n    }\n  }, {\n    key: \"addFooter\",\n    value: function addFooter(buttons, checkboxText, checkboxCallback) {\n      var footer = document.createElement('div');\n      footer.className = 'modal-footer';\n      var buttonsContainer = document.createElement('div');\n      buttonsContainer.className = 'modal-buttons';\n      buttons.forEach(function (button) {\n        var btn = new _button_js__WEBPACK_IMPORTED_MODULE_0__.Button({\n          container: '',\n          iconSrc: '',\n          title: button.text,\n          fav: '',\n          showFavIcon: false,\n          callbacks: {\n            onClick: button.callback\n          }\n        });\n        btn.buttonElement.style.minWidth = '100px';\n        if (button.primary) {\n          btn.buttonElement.style.setProperty('--background-main', 'var(--primary)');\n          btn.buttonElement.style.setProperty('--text-gray', 'var(--text-main)');\n          btn.buttonElement.style.fontWeight = 'var(--bold)';\n        } else {\n          btn.buttonElement.style.setProperty('--background-main', 'transparent');\n          btn.buttonElement.style.border = '1px solid var(--hover)';\n        }\n        buttonsContainer.appendChild(btn.element);\n      });\n\n      // const checkbox = new Checkbox('Check me!', 'right', checkboxCallback);\n      var empty = document.createElement('div');\n      var label = document.createElement('label');\n      label.textContent = checkboxText;\n      footer.appendChild(empty);\n      footer.appendChild(buttonsContainer);\n      this.modalElement.appendChild(footer);\n    }\n  }, {\n    key: \"getElement\",\n    value: function getElement() {\n      return this.element;\n    }\n  }, {\n    key: \"removeElement\",\n    value: function removeElement() {\n      this.element.remove();\n    }\n  }]);\n}();\n\n//# sourceURL=webpack://comfyux-dev/./WebExtension/component/js/modal.js?");
        /***/    },
    /***/ "./WebExtension/component/js/multiinput.js": 
    /*!*************************************************!*\
  !*** ./WebExtension/component/js/multiinput.js ***!
  \*************************************************/
    /***/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
        eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   MultiInput: () => (/* binding */ MultiInput)\n/* harmony export */ });\n/* harmony import */ var _css_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./css.js */ "./WebExtension/component/js/css.js");\n/* harmony import */ var _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../ComfyUIConnector.js */ "./WebExtension/ComfyUIConnector.js");\nfunction _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }\nfunction _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }\n\n\nvar MultiInput = /*#__PURE__*/function () {\n  function MultiInput(_ref) {\n    var placeholder = _ref.placeholder,\n      title = _ref.title,\n      textContent = _ref.textContent,\n      fav = _ref.fav,\n      onChange = _ref.onChange,\n      callbacks = _ref.callbacks;\n    _classCallCheck(this, MultiInput);\n    this.placeholder = placeholder;\n    this.textContent = textContent;\n    this.callbacks = callbacks;\n    this.onChange = onChange;\n    this.title = title;\n    this.fav = fav;\n    this.element = this.createMultiInput();\n    this.dragging = false;\n    this.editting = false;\n  }\n  return _createClass(MultiInput, [{\n    key: "createMultiInput",\n    value: function createMultiInput() {\n      var _this = this;\n      this.rowElement = document.createElement(\'div\');\n      this.rowElement.className = \'row\';\n      this.favElement = document.createElement(\'div\');\n      this.favElement.className = \'fav\';\n      this.favElement.addEventListener(\'click\', function () {\n        return _this.handleFav();\n      });\n      this.favIconElement = document.createElement(\'img\');\n      this.favElement.appendChild(this.favIconElement);\n      if (this.fav) {\n        this.favIconElement.src = _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_1__.staticPath + \'component/img/fav_sel.png\';\n      } else {\n        this.favIconElement.src = _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_1__.staticPath + \'component/img/fav_nor.png\';\n      }\n      var multiInputContainer = document.createElement(\'div\');\n      multiInputContainer.className = \'multiinput-container\';\n\n      //hover effect\n      multiInputContainer.onmousemove = function (e) {\n        var rect = multiInputContainer.getBoundingClientRect();\n        var x = e.clientX - rect.left;\n        var y = e.clientY - rect.top;\n        multiInputContainer.style.setProperty("--mouse-x", "".concat(x, "px"));\n        multiInputContainer.style.setProperty("--mouse-y", "".concat(y, "px"));\n      };\n      this.textAreaElement = document.createElement(\'textarea\');\n      this.textAreaElement.className = \'multiinput-textarea\';\n      if (this.textContent) {\n        this.textAreaElement.textContent = this.textContent;\n      }\n      if (this.placeholder) {\n        this.textAreaElement.placeholder = this.placeholder;\n      } else {\n        this.textAreaElement.placeholder = \'Click to input...\';\n      }\n      this.textAreaElement.addEventListener(\'input\', function (e) {\n        _this.editting = true;\n        if (_this.callbacks.onEdit) {\n          _this.callbacks.onEdit(_this.editting);\n        }\n      });\n      this.textAreaElement.addEventListener(\'blur\', function (e) {\n        _this.editting = false;\n        if (_this.callbacks.onEdit) {\n          _this.callbacks.onEdit(_this.editting);\n        }\n      });\n      this.textAreaElement.addEventListener(\'change\', function (e) {\n        _this.value = e.target.value.toString();\n        _this.onChange(_this.value);\n      });\n      this.rowElement.appendChild(multiInputContainer);\n      this.rowElement.appendChild(this.favElement);\n      multiInputContainer.appendChild(this.textAreaElement);\n      return this.rowElement;\n    }\n  }, {\n    key: "init",\n    value: function init(container) {\n      container.appendChild(this.element);\n    }\n  }, {\n    key: "handleFav",\n    value: function handleFav() {\n      if (this.fav) {\n        this.fav = false;\n        this.favElement.querySelector(\'img\').src = _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_1__.staticPath + \'component/img/fav_nor.png\';\n      } else {\n        this.fav = true;\n        this.favElement.querySelector(\'img\').src = _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_1__.staticPath + \'component/img/fav_sel.png\';\n      }\n      if (this.callbacks.onFav) this.callbacks.onFav(this.fav);\n    }\n  }, {\n    key: "setValue",\n    value: function setValue(value) {\n      this.value = value;\n      this.textAreaElement.value = value;\n    }\n  }, {\n    key: "filter",\n    value: function filter(isShow) {\n      if (isShow) {\n        this.element.style.display = \'inline-flex\';\n      } else {\n        this.element.style.display = \'none\';\n      }\n    }\n  }]);\n}();\n\n//# sourceURL=webpack://comfyux-dev/./WebExtension/component/js/multiinput.js?');
        /***/    },
    /***/ "./WebExtension/component/js/numinput.js": 
    /*!***********************************************!*\
  !*** ./WebExtension/component/js/numinput.js ***!
  \***********************************************/
    /***/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
        eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   NumInput: () => (/* binding */ NumInput)\n/* harmony export */ });\n/* harmony import */ var _css_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./css.js */ \"./WebExtension/component/js/css.js\");\n/* harmony import */ var _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../ComfyUIConnector.js */ \"./WebExtension/ComfyUIConnector.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n\n\nvar NumInput = /*#__PURE__*/function () {\n  function NumInput(_ref) {\n    var _this = this;\n    var iconLeft = _ref.iconLeft,\n      title = _ref.title,\n      iconRight = _ref.iconRight,\n      min = _ref.min,\n      max = _ref.max,\n      round = _ref.round,\n      showFavIcon = _ref.showFavIcon,\n      step = _ref.step,\n      value = _ref.value,\n      fav = _ref.fav,\n      precision = _ref.precision,\n      onChange = _ref.onChange,\n      callbacks = _ref.callbacks;\n    _classCallCheck(this, NumInput);\n    this.iconLeft = iconLeft;\n    this.title = title;\n    this.iconRight = iconRight;\n    this.min = min;\n    this.max = max;\n    this.round = round;\n    this.step = step;\n    this.precision = precision;\n    this.onChange = onChange;\n    this.value = value;\n    this.callbacks = callbacks;\n    this.showFavIcon = showFavIcon;\n    this.fav = fav;\n    this.onChangeDebounced = this.debounce(function (value) {\n      return _this.onChange(value);\n    }, 100); // 300毫秒内连续的变更只会触发一次onChange\n    this.element = this.createNumInput();\n    this.dragging = false;\n    this.editting = false;\n  }\n  return _createClass(NumInput, [{\n    key: \"createNumInput\",\n    value: function createNumInput() {\n      var _this2 = this;\n      this.rowElement = document.createElement('div');\n      this.rowElement.className = 'row';\n      this.favElement = document.createElement('div');\n      this.favElement.className = 'fav';\n      this.favElement.addEventListener('click', function () {\n        return _this2.handleFav();\n      });\n      this.favIconElement = document.createElement('img');\n      this.favElement.appendChild(this.favIconElement);\n      if (this.fav) {\n        this.favIconElement.src = _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_1__.staticPath + 'component/img/fav_sel.png';\n      } else {\n        this.favIconElement.src = _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_1__.staticPath + 'component/img/fav_nor.png';\n      }\n      if (!this.showFavIcon) {\n        this.favElement.style.display = 'none';\n      }\n      var numInputContainer = document.createElement('div');\n      this.numInputContainer = numInputContainer;\n      numInputContainer.className = 'numinput-container';\n\n      //hover effect\n      numInputContainer.onmousemove = function (e) {\n        var rect = numInputContainer.getBoundingClientRect();\n        var x = e.clientX - rect.left;\n        var y = e.clientY - rect.top;\n        numInputContainer.style.setProperty(\"--mouse-x\", \"\".concat(x, \"px\"));\n        numInputContainer.style.setProperty(\"--mouse-y\", \"\".concat(y, \"px\"));\n      };\n      var numInputLeft = document.createElement('div');\n      numInputLeft.className = 'numinput-left';\n      var iconLeftElement = document.createElement('span');\n      iconLeftElement.className = 'icon';\n      var iconLeftImg = document.createElement('img');\n      iconLeftImg.src = this.iconLeft;\n      iconLeftElement.appendChild(iconLeftImg);\n      iconLeftElement.addEventListener('click', function () {\n        _this2.updateValue(-_this2.step);\n      });\n      var titleElement = document.createElement('span');\n      this.titleElement = titleElement;\n      titleElement.className = 'title';\n      titleElement.innerText = this.title;\n      numInputLeft.appendChild(iconLeftElement);\n      numInputLeft.appendChild(titleElement);\n      var numInputRight = document.createElement('div');\n      numInputRight.className = 'numinput-right';\n      var numberInputElement = document.createElement('input');\n      this.numberInputElement = numberInputElement;\n      numberInputElement.className = 'number-input';\n      numberInputElement.type = 'number';\n      numberInputElement.value = this.value.toFixed(this.precision);\n      numberInputElement.min = this.min;\n      numberInputElement.max = this.max;\n      numberInputElement.step = this.step;\n      numberInputElement.addEventListener('change', function (e) {\n        _this2.value = e.target.value;\n        _this2.value = Math.min(Math.max(_this2.value, _this2.min), _this2.max);\n        _this2.element.querySelector('.number-input').value = _this2.value.toFixed(_this2.precision);\n        _this2.onChange(_this2.value);\n      });\n      numberInputElement.addEventListener('input', function (e) {\n        _this2.editting = true;\n        if (_this2.callbacks.onEdit) {\n          _this2.callbacks.onEdit(_this2.editting);\n        }\n      });\n      numberInputElement.addEventListener('blur', function (e) {\n        _this2.editting = false;\n        if (_this2.callbacks.onEdit) {\n          _this2.callbacks.onEdit(_this2.editting);\n        }\n      });\n      numberInputElement.addEventListener('focus', function () {\n        this.select();\n      });\n      var iconRightElement = document.createElement('span');\n      iconRightElement.className = 'icon';\n      var iconRightImg = document.createElement('img');\n      iconRightImg.src = this.iconRight;\n      iconRightElement.appendChild(iconRightImg);\n      iconRightElement.addEventListener('click', function () {\n        _this2.updateValue(_this2.step);\n      });\n      numInputRight.appendChild(numberInputElement);\n      numInputRight.appendChild(iconRightElement);\n      this.rowElement.appendChild(numInputContainer);\n      this.rowElement.appendChild(this.favElement);\n      numInputContainer.appendChild(numInputLeft);\n      numInputContainer.appendChild(numInputRight);\n\n      // Add drag event\n      numInputContainer.addEventListener('mousedown', function (e) {\n        _this2.editting = true;\n        if (_this2.callbacks.onEdit) {\n          _this2.callbacks.onEdit(_this2.editting);\n        }\n        _this2.dragging = true;\n        _this2.startX = e.pageX;\n      });\n      window.addEventListener('mousemove', function (e) {\n        if (_this2.dragging) {\n          var diffX = e.pageX - _this2.startX;\n          _this2.updateValue(diffX * _this2.step);\n          _this2.startX = e.pageX;\n        }\n      });\n      window.addEventListener('mouseup', function () {\n        _this2.editting = false;\n        if (_this2.callbacks.onEdit) {\n          _this2.callbacks.onEdit(_this2.editting);\n        }\n        _this2.dragging = false;\n      });\n      return this.rowElement;\n    }\n  }, {\n    key: \"updateValue\",\n    value: function updateValue(delta) {\n      // console.log('🌹numinput before minmax',typeof this.value);\n      this.value = Math.min(Math.max(this.value + delta, this.min), this.max);\n      // console.log('🌹numinput after minmax',typeof this.value);\n      this.element.querySelector('.number-input').value = this.value.toFixed(this.precision);\n      // console.log('🌹numinput after toFixed',typeof this.value);\n      this.onChangeDebounced(this.value.toFixed(this.precision));\n    }\n  }, {\n    key: \"debounce\",\n    value: function debounce(func, wait) {\n      var timeout;\n      return function () {\n        var _this3 = this;\n        for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n          args[_key] = arguments[_key];\n        }\n        clearTimeout(timeout);\n        timeout = setTimeout(function () {\n          return func.apply(_this3, args);\n        }, wait);\n      };\n    }\n  }, {\n    key: \"setValue\",\n    value: function setValue(value) {\n      this.value = value;\n      this.element.querySelector('.number-input').value = value;\n    }\n  }, {\n    key: \"init\",\n    value: function init(container) {\n      container.appendChild(this.element);\n    }\n  }, {\n    key: \"handleFav\",\n    value: function handleFav() {\n      if (this.fav) {\n        this.fav = false;\n        this.favElement.querySelector('img').src = _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_1__.staticPath + 'component/img/fav_nor.png';\n      } else {\n        this.fav = true;\n        this.favElement.querySelector('img').src = _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_1__.staticPath + 'component/img/fav_sel.png';\n      }\n      if (this.callbacks.onFav) this.callbacks.onFav(this.fav);\n    }\n  }, {\n    key: \"filter\",\n    value: function filter(isShow) {\n      if (isShow) {\n        this.element.style.display = 'inline-flex';\n      } else {\n        this.element.style.display = 'none';\n      }\n    }\n  }]);\n}();\n\n//# sourceURL=webpack://comfyux-dev/./WebExtension/component/js/numinput.js?");
        /***/    },
    /***/ "./WebExtension/component/js/searchbox.js": 
    /*!************************************************!*\
  !*** ./WebExtension/component/js/searchbox.js ***!
  \************************************************/
    /***/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
        eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Searchbox: () => (/* binding */ Searchbox)\n/* harmony export */ });\n/* harmony import */ var _css_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./css.js */ "./WebExtension/component/js/css.js");\n/* harmony import */ var _fuse_basic_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./fuse.basic.mjs */ "./WebExtension/component/js/fuse.basic.mjs");\n/* harmony import */ var _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../ComfyUIConnector.js */ "./WebExtension/ComfyUIConnector.js");\n/* harmony import */ var _listitem_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./listitem.js */ "./WebExtension/component/js/listitem.js");\n/* harmony import */ var _combo_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./combo.js */ "./WebExtension/component/js/combo.js");\nfunction _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }\nfunction _toConsumableArray(r) { return _arrayWithoutHoles(r) || _iterableToArray(r) || _unsupportedIterableToArray(r) || _nonIterableSpread(); }\nfunction _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }\nfunction _iterableToArray(r) { if ("undefined" != typeof Symbol && null != r[Symbol.iterator] || null != r["@@iterator"]) return Array.from(r); }\nfunction _arrayWithoutHoles(r) { if (Array.isArray(r)) return _arrayLikeToArray(r); }\nfunction _regeneratorRuntime() { "use strict"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = "function" == typeof Symbol ? Symbol : {}, a = i.iterator || "@@iterator", c = i.asyncIterator || "@@asyncIterator", u = i.toStringTag || "@@toStringTag"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, ""); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, "_invoke", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: "normal", arg: t.call(e, r) }; } catch (t) { return { type: "throw", arg: t }; } } e.wrap = wrap; var h = "suspendedStart", l = "suspendedYield", f = "executing", s = "completed", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { ["next", "throw", "return"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if ("throw" !== c.type) { var u = c.arg, h = u.value; return h && "object" == _typeof(h) && n.call(h, "__await") ? e.resolve(h.__await).then(function (t) { invoke("next", t, i, a); }, function (t) { invoke("throw", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke("throw", t, i, a); }); } a(c.arg); } var r; o(this, "_invoke", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error("Generator is already running"); if (o === s) { if ("throw" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if ("next" === n.method) n.sent = n._sent = n.arg;else if ("throw" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else "return" === n.method && n.abrupt("return", n.arg); o = f; var p = tryCatch(e, r, n); if ("normal" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } "throw" === p.type && (o = s, n.method = "throw", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, "throw" === n && e.iterator["return"] && (r.method = "return", r.arg = t, maybeInvokeDelegate(e, r), "throw" === r.method) || "return" !== n && (r.method = "throw", r.arg = new TypeError("The iterator does not provide a \'" + n + "\' method")), y; var i = tryCatch(o, e.iterator, r.arg); if ("throw" === i.type) return r.method = "throw", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, "return" !== r.method && (r.method = "next", r.arg = t), r.delegate = null, y) : a : (r.method = "throw", r.arg = new TypeError("iterator result is not an object"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = "normal", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: "root" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || "" === e) { var r = e[a]; if (r) return r.call(e); if ("function" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + " is not iterable"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, "constructor", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, "constructor", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, "GeneratorFunction"), e.isGeneratorFunction = function (t) { var e = "function" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || "GeneratorFunction" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, "GeneratorFunction")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, "Generator"), define(g, a, function () { return this; }), define(g, "toString", function () { return "[object Generator]"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = "next", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) "t" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if ("throw" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = "throw", a.arg = e, r.next = n, o && (r.method = "next", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if ("root" === i.tryLoc) return handle("end"); if (i.tryLoc <= this.prev) { var c = n.call(i, "catchLoc"), u = n.call(i, "finallyLoc"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error("try statement without catch or finally"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, "finallyLoc") && this.prev < o.finallyLoc) { var i = o; break; } } i && ("break" === t || "continue" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = "next", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if ("throw" === t.type) throw t.arg; return "break" === t.type || "continue" === t.type ? this.next = t.arg : "return" === t.type ? (this.rval = this.arg = t.arg, this.method = "return", this.next = "end") : "normal" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, "catch": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if ("throw" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error("illegal catch attempt"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, "next" === this.method && (this.arg = t), y; } }, e; }\nfunction _createForOfIteratorHelper(r, e) { var t = "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (!t) { if (Array.isArray(r) || (t = _unsupportedIterableToArray(r)) || e && r && "number" == typeof r.length) { t && (r = t); var _n = 0, F = function F() {}; return { s: F, n: function n() { return _n >= r.length ? { done: !0 } : { done: !1, value: r[_n++] }; }, e: function e(r) { throw r; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var o, a = !0, u = !1; return { s: function s() { t = t.call(r); }, n: function n() { var r = t.next(); return a = r.done, r; }, e: function e(r) { u = !0, o = r; }, f: function f() { try { a || null == t["return"] || t["return"](); } finally { if (u) throw o; } } }; }\nfunction _unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }\nfunction _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }\nfunction _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }\nfunction _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }\n\n\n\n\n\nvar Searchbox = /*#__PURE__*/function () {\n  function Searchbox(event) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    _classCallCheck(this, Searchbox);\n    this.event = event;\n    this.options = options;\n    this.element = document.createElement(\'div\');\n    this.clickEmptyToCloseHandler = this.createClickEmptyToCloseHandler();\n    this.onSearchBoxSelection = null;\n    this.nodeSearchData;\n    this.previewNodes = [];\n    this.debouncingTimeoutId;\n    this.isScaled = false;\n    this.results = [];\n    this.currentIndex = 0;\n    this.init();\n  }\n  return _createClass(Searchbox, [{\n    key: "init",\n    value: function init() {\n      var _this = this;\n      this.element.className = \'searchbox-container\';\n      document.body.appendChild(this.element);\n      this.createInputSection();\n      this.loadingText = document.createElement(\'div\');\n      this.loadingText.textContent = \'Loading Nodes...\';\n      this.loadingText.style.fontSize = \'var(--body-text)\';\n      this.loadingText.style.color = \'var(--text-gray)\';\n      this.loadingText.style.margin = \'auto\';\n      this.element.appendChild(this.loadingText);\n      this.bindEvents();\n      this.scaleCanvas();\n\n      //click empty to close\n      setTimeout(function () {\n        document.addEventListener(\'click\', _this.clickEmptyToCloseHandler);\n        _this.input.focus();\n      }, 200);\n      this.createNodesearchFiles().then(function () {\n        _this.getNodesearchFiles().then(function (data) {\n          _this.nodeSearchData = data;\n          _this.initNodesearchFiles().then(function () {\n            _this.getFilterOptions().then(function () {\n              _this.loadingText.style.display = \'none\';\n              _this.createResultsSection();\n              _this.createComboSection();\n              _this.showRecentResults();\n            });\n          });\n        });\n      });\n    }\n    //click empty to close and remove listener\n  }, {\n    key: "createClickEmptyToCloseHandler",\n    value: function createClickEmptyToCloseHandler() {\n      var _this2 = this;\n      return function (event) {\n        event.stopPropagation();\n        if (!_this2.element.contains(event.target) && !_this2.inputFilter.dropdown.contains(event.target) && !_this2.outputFilter.dropdown.contains(event.target)) {\n          document.removeEventListener(\'click\', _this2.clickEmptyToCloseHandler);\n          _this2.closeSearchBox();\n        }\n      };\n    }\n\n    //auto scale to node widget visible\n  }, {\n    key: "scaleCanvas",\n    value: function scaleCanvas() {\n      this.saveCanvasState();\n      var scale = _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_2__.ComnfyUIapp.canvas.ds.scale;\n      if (scale < 0.7 || scale > 2) {\n        this.isScaled = true;\n        _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_2__.ComnfyUIapp.canvas.ds.changeScale(1, [this.event.clientX, this.event.clientY]);\n      }\n    }\n  }, {\n    key: "saveCanvasState",\n    value: function saveCanvasState() {\n      this.scalePrev = _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_2__.ComnfyUIapp.canvas.ds.scale;\n    }\n  }, {\n    key: "restoreCanvasState",\n    value: function restoreCanvasState() {\n      // ComnfyUIapp.canvas.ds.offset[0] += this.offsetPrev[0];\n      // ComnfyUIapp.canvas.ds.offset[1] += this.offsetPrev[1];\n\n      _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_2__.ComnfyUIapp.canvas.ds.changeScale(this.scalePrev, [this.event.clientX, this.event.clientY]);\n    }\n  }, {\n    key: "initNodesearchFiles",\n    value: function () {\n      var _initNodesearchFiles = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var nodeSearchJson, _i, _Object$values, node, nodeInputArray, nodeOutputArray, _i2, _Object$values2, inputObject, _i3, _Object$values3, inputProperties, _iterator, _step, outputProperties, nodeTitle, nodeInfo;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              nodeSearchJson = {}; //get input and output \n              for (_i = 0, _Object$values = Object.values(LiteGraph.registered_node_types); _i < _Object$values.length; _i++) {\n                node = _Object$values[_i];\n                nodeInputArray = [];\n                nodeOutputArray = [];\n                if (node.nodeData) {\n                  // use this console.log to print node input data format\n                  // console.log(node.title,node.type,node.category, node.nodeData.input);\n                  for (_i2 = 0, _Object$values2 = Object.values(node.nodeData.input); _i2 < _Object$values2.length; _i2++) {\n                    inputObject = _Object$values2[_i2];\n                    for (_i3 = 0, _Object$values3 = Object.values(inputObject); _i3 < _Object$values3.length; _i3++) {\n                      inputProperties = _Object$values3[_i3];\n                      if (typeof inputProperties === "string") {\n                        nodeInputArray.push(inputProperties);\n                      } else if (typeof inputProperties[0] === "string") {\n                        nodeInputArray.push(inputProperties[0]);\n                      }\n                    }\n                  }\n                  // use this console.log to print node output data format\n                  // console.log(node.title,node.type,node.category, node.nodeData.output);\n                  _iterator = _createForOfIteratorHelper(node.nodeData.output);\n                  try {\n                    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n                      outputProperties = _step.value;\n                      if (typeof outputProperties === "string") {\n                        nodeOutputArray.push(outputProperties);\n                      }\n                    }\n                  } catch (err) {\n                    _iterator.e(err);\n                  } finally {\n                    _iterator.f();\n                  }\n                }\n                nodeTitle = node.title;\n                if (this.nodeSearchData[nodeTitle]) {\n                  nodeSearchJson[nodeTitle] = this.nodeSearchData[nodeTitle];\n                } else {\n                  nodeInfo = {\n                    title: node.title,\n                    category: node.type,\n                    use_count: 0,\n                    last_use: new Date(\'2000-01-01T00:00:00Z\').getTime(),\n                    outputs: nodeOutputArray,\n                    inputs: nodeInputArray\n                  };\n                  nodeSearchJson[nodeTitle] = nodeInfo;\n                }\n              }\n              this.nodeSearchData = nodeSearchJson;\n              this.storeNodesearchFiles(nodeSearchJson);\n            case 4:\n            case "end":\n              return _context.stop();\n          }\n        }, _callee, this);\n      }));\n      function initNodesearchFiles() {\n        return _initNodesearchFiles.apply(this, arguments);\n      }\n      return initNodesearchFiles;\n    }()\n  }, {\n    key: "createNodesearchFiles",\n    value: function () {\n      var _createNodesearchFiles = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n        var response;\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.prev = 0;\n              _context2.next = 3;\n              return fetch(\'/comfyux_create_nodesearch_files\', {\n                method: \'POST\',\n                cache: \'reload\',\n                headers: {\n                  \'Content-Type\': \'application/json\'\n                }\n              });\n            case 3:\n              response = _context2.sent;\n              _context2.next = 9;\n              break;\n            case 6:\n              _context2.prev = 6;\n              _context2.t0 = _context2["catch"](0);\n              console.error(\'Error creating nodesearch files:\', _context2.t0);\n            case 9:\n            case "end":\n              return _context2.stop();\n          }\n        }, _callee2, null, [[0, 6]]);\n      }));\n      function createNodesearchFiles() {\n        return _createNodesearchFiles.apply(this, arguments);\n      }\n      return createNodesearchFiles;\n    }()\n  }, {\n    key: "getNodesearchFiles",\n    value: function () {\n      var _getNodesearchFiles = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {\n        var response, data;\n        return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n          while (1) switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.prev = 0;\n              _context3.next = 3;\n              return fetch(\'/comfyux_get_nodesearch_files\', {\n                method: \'GET\',\n                cache: \'reload\',\n                headers: {\n                  \'Content-Type\': \'application/json\'\n                }\n              });\n            case 3:\n              response = _context3.sent;\n              _context3.next = 6;\n              return response.json();\n            case 6:\n              data = _context3.sent;\n              return _context3.abrupt("return", data);\n            case 10:\n              _context3.prev = 10;\n              _context3.t0 = _context3["catch"](0);\n              console.error(\'Error fetching nodesearch files:\', _context3.t0);\n            case 13:\n            case "end":\n              return _context3.stop();\n          }\n        }, _callee3, null, [[0, 10]]);\n      }));\n      function getNodesearchFiles() {\n        return _getNodesearchFiles.apply(this, arguments);\n      }\n      return getNodesearchFiles;\n    }()\n  }, {\n    key: "getFilterOptions",\n    value: function () {\n      var _getFilterOptions = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4() {\n        var _i4, _Object$values4, node, _iterator2, _step2, nodeInput, _iterator3, _step3, nodeOutput;\n        return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n          while (1) switch (_context4.prev = _context4.next) {\n            case 0:\n              this.inputFilterOptions = [\'( All )\'];\n              this.outputFilterOptions = [\'( All )\'];\n              for (_i4 = 0, _Object$values4 = Object.values(this.nodeSearchData); _i4 < _Object$values4.length; _i4++) {\n                node = _Object$values4[_i4];\n                if (node.inputs) {\n                  _iterator2 = _createForOfIteratorHelper(node.inputs);\n                  try {\n                    for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n                      nodeInput = _step2.value;\n                      this.inputFilterOptions.push(nodeInput);\n                    }\n                  } catch (err) {\n                    _iterator2.e(err);\n                  } finally {\n                    _iterator2.f();\n                  }\n                }\n                if (node.outputs) {\n                  _iterator3 = _createForOfIteratorHelper(node.outputs);\n                  try {\n                    for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n                      nodeOutput = _step3.value;\n                      this.outputFilterOptions.push(nodeOutput);\n                    }\n                  } catch (err) {\n                    _iterator3.e(err);\n                  } finally {\n                    _iterator3.f();\n                  }\n                }\n              }\n              // clear repeat options\n              this.inputFilterOptions = _toConsumableArray(new Set(this.inputFilterOptions));\n              this.outputFilterOptions = _toConsumableArray(new Set(this.outputFilterOptions));\n            case 5:\n            case "end":\n              return _context4.stop();\n          }\n        }, _callee4, this);\n      }));\n      function getFilterOptions() {\n        return _getFilterOptions.apply(this, arguments);\n      }\n      return getFilterOptions;\n    }()\n  }, {\n    key: "createInputSection",\n    value: function createInputSection() {\n      var inputSection = document.createElement(\'div\');\n      inputSection.className = \'searchbox-input\';\n      var icon = document.createElement(\'img\');\n      icon.className = \'searchbox-input-icon\';\n      icon.src = _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_2__.staticPath + \'component/img/search.png\';\n      inputSection.appendChild(icon);\n      var bg = document.createElement(\'img\');\n      bg.className = \'searchbox-key-help\';\n      bg.src = _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_2__.staticPath + \'component/img/keyhelp.png\';\n      inputSection.appendChild(bg);\n      this.input = document.createElement(\'input\');\n      this.input.placeholder = this.options.placeholder || \'Search Node...\';\n      inputSection.appendChild(this.input);\n      this.element.appendChild(inputSection);\n    }\n  }, {\n    key: "createResultsSection",\n    value: function createResultsSection() {\n      var resultsSection = document.createElement(\'div\');\n      resultsSection.className = \'searchbox-results\';\n      this.leftPanel = document.createElement(\'div\');\n      this.leftPanel.className = \'left\';\n      resultsSection.appendChild(this.leftPanel);\n      this.rightPanel = document.createElement(\'div\');\n      this.rightPanel.className = \'right\';\n      this.canvasElement = document.createElement(\'canvas\');\n      this.canvasElement.width = 288;\n      this.canvasElement.height = 328;\n      this.rightPanel.appendChild(this.canvasElement);\n      resultsSection.appendChild(this.rightPanel);\n      this.element.appendChild(resultsSection);\n    }\n  }, {\n    key: "createComboSection",\n    value: function createComboSection() {\n      var _this3 = this;\n      var comboSection = document.createElement(\'div\');\n      comboSection.className = \'searchbox-combo\';\n\n      // Combo elements can be created here using previously defined Combo class\n      // Placeholder for now\n      this.inputFilter = new _combo_js__WEBPACK_IMPORTED_MODULE_4__.Combo({\n        icon: _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_2__.staticPath + \'component/img/nodeinput.png\',\n        title: \'Input Type\',\n        options: this.inputFilterOptions,\n        fav: \'\',\n        isSupportSearch: \'true\',\n        defaultOption: \'( All )\',\n        callbacks: {\n          onSelect: function onSelect(selectedOption) {\n            _this3.applyFilters();\n          }\n        }\n      });\n      comboSection.appendChild(this.inputFilter.element);\n      this.outputFilter = new _combo_js__WEBPACK_IMPORTED_MODULE_4__.Combo({\n        icon: _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_2__.staticPath + \'component/img/nodeoutput.png\',\n        title: \'Output Type\',\n        options: this.outputFilterOptions,\n        fav: \'\',\n        showFavIcon: false,\n        isSupportSearch: \'true\',\n        defaultOption: \'( All )\',\n        callbacks: {\n          onSelect: function onSelect(selectedOption) {\n            _this3.applyFilters();\n          }\n        }\n      });\n      comboSection.appendChild(this.outputFilter.element);\n      this.element.appendChild(comboSection);\n    }\n  }, {\n    key: "bindEvents",\n    value: function bindEvents() {\n      var _this4 = this;\n      this.input.addEventListener(\'input\', function (e) {\n        return _this4.onInputChange(e);\n      });\n      this.element.addEventListener(\'keydown\', function (e) {\n        return _this4.onKeyDown(e);\n      });\n    }\n  }, {\n    key: "onInputChange",\n    value: function onInputChange(e) {\n      var query = e.target.value;\n      if (query === \'\') {\n        this.showRecentResults();\n      } else {\n        this.performSearch(query);\n      }\n    }\n  }, {\n    key: "onKeyDown",\n    value: function onKeyDown(event) {\n      var key = event.key;\n      var resultItems = this.leftPanel.querySelectorAll(\'.list-item\');\n      if (key === \'ArrowDown\') {\n        this.currentIndex = (this.currentIndex + 1) % resultItems.length;\n        this.updateSelectedResult();\n      } else if (key === \'ArrowUp\') {\n        this.currentIndex = (this.currentIndex - 1 + resultItems.length) % resultItems.length;\n        this.updateSelectedResult();\n      } else if (key === \'Enter\') {\n        if (this.currentIndex >= 0) {\n          this.onResultClick(this.results[this.currentIndex], this.event);\n        }\n      } else if (key === \'Escape\') {\n        this.closeSearchBox();\n      }\n    }\n  }, {\n    key: "showRecentResults",\n    value: function showRecentResults() {\n      var recentResults = Object.values(this.nodeSearchData).sort(function (a, b) {\n        return new Date(b.last_use) - new Date(a.last_use);\n      });\n      this.updateResults(recentResults, \'last_use\');\n    }\n  }, {\n    key: "performSearch",\n    value: function performSearch(query) {\n      // Perform fuzzy search using fuse.js\n      var fuseOptions = {\n        // isCaseSensitive: false,\n        // includeScore: false,\n        // shouldSort: true,\n        // includeMatches: false,\n        // findAllMatches: false,\n        // minMatchCharLength: 1,\n        // location: 0,\n        threshold: 0.6,\n        // distance: 100,\n        // useExtendedSearch: false,\n        // ignoreLocation: false,\n        // ignoreFieldNorm: false,\n        // fieldNormWeight: 1,\n        keys: ["title", "category"]\n      };\n      var fuse = new _fuse_basic_mjs__WEBPACK_IMPORTED_MODULE_1__["default"](Object.values(this.nodeSearchData), fuseOptions);\n      var result = fuse.search(query);\n      var sortedResults = result.map(function (res) {\n        return res.item;\n      }).sort(function (a, b) {\n        return b.use_count - a.use_count;\n      });\n      this.updateResults(sortedResults, \'use_count\');\n    }\n  }, {\n    key: "updateResults",\n    value: function updateResults(results, label) {\n      var _this5 = this;\n      this.leftPanel.innerHTML = \'\';\n      this.results = results;\n      this.currentIndex = 0;\n      var _iterator4 = _createForOfIteratorHelper(results),\n        _step4;\n      try {\n        for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n          var result = _step4.value;\n          var status;\n          if (label === \'use_count\') {\n            if (result.use_count > 3) {\n              status = \'Prefer\';\n            } else {\n              status = \'\';\n            }\n          } else if (label === \'last_use\') {\n            var now = new Date();\n            var sevenDaysAgo = now.getTime() - 7 * 24 * 60 * 60 * 1000;\n            if (result.last_use >= sevenDaysAgo) {\n              status = \'Recently\';\n            } else {\n              status = \'\';\n            }\n          }\n          var listItem = new _listitem_js__WEBPACK_IMPORTED_MODULE_3__.ListItem({\n            iconUrl: \'\',\n            name: result.title,\n            status: status,\n            callbacks: {}\n          });\n          listItem.element.style.borderRadius = \'4px\';\n          listItem.element.style.height = \'auto\';\n          listItem.element.style.padding = \'var(--space-m)\';\n          listItem.element.style.border = \'none\';\n          listItem.element.addEventListener(\'mouseenter\', function (event) {\n            _this5.handleMouseEnter(event.currentTarget);\n          });\n          listItem.element.addEventListener(\'click\', function () {\n            _this5.onResultClick(_this5.results[_this5.currentIndex], _this5.event);\n          });\n          this.leftPanel.appendChild(listItem.getElement());\n        }\n      } catch (err) {\n        _iterator4.e(err);\n      } finally {\n        _iterator4.f();\n      }\n      this.updateSelectedResult();\n    }\n  }, {\n    key: "handleMouseEnter",\n    value: function handleMouseEnter(targetElement) {\n      var _this6 = this;\n      //debouncing\n      clearTimeout(this.debouncingTimeoutId);\n      this.debouncingTimeoutId = setTimeout(function () {\n        var parent = targetElement.parentNode;\n        _this6.currentIndex = Array.from(parent.children).indexOf(targetElement);\n        _this6.updateSelectedResult(true);\n      }, 50);\n    }\n  }, {\n    key: "getElement",\n    value: function getElement() {\n      return this.element;\n    }\n  }, {\n    key: "updateSelectedResult",\n    value: function updateSelectedResult() {\n      var _this7 = this;\n      var isPointer = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      var resultItems = this.leftPanel.querySelectorAll(\'.list-item\');\n      resultItems.forEach(function (item, index) {\n        item.classList.toggle(\'selected\', index === _this7.currentIndex);\n      });\n      var selectedItem = this.leftPanel.querySelector(\'.list-item.selected\');\n      if (selectedItem) {\n        this.scrollToSelectedResult(this.leftPanel, selectedItem, isPointer);\n      }\n      this.updateCanvas(this.results[this.currentIndex]);\n    }\n  }, {\n    key: "scrollToSelectedResult",\n    value: function scrollToSelectedResult(containerElement, targetElement, isPointer) {\n      if (!isPointer) {\n        var targetPosition = targetElement.offsetTop - containerElement.offsetTop;\n        containerElement.scrollTo({\n          top: targetPosition - 80,\n          behavior: \'smooth\'\n        });\n      }\n    }\n  }, {\n    key: "updateCanvas",\n    value: function updateCanvas(result) {\n      var _this8 = this;\n      setTimeout(function () {\n        var node = LiteGraph.createNode(result.category);\n        var _iterator5 = _createForOfIteratorHelper(_this8.previewNodes),\n          _step5;\n        try {\n          for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {\n            var previewNode = _step5.value;\n            _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_2__.ComnfyUIapp.graph.remove(previewNode);\n          }\n        } catch (err) {\n          _iterator5.e(err);\n        } finally {\n          _iterator5.f();\n        }\n        if (node) {\n          _this8.previewNodes.push(node);\n          var scale = _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_2__.ComnfyUIapp.canvas.ds.scale * window.devicePixelRatio;\n          var offset = _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_2__.ComnfyUIapp.canvas.ds.offset;\n          // node.pos = LGraphCanvas.active_canvas.convertEventToCanvasOffset(this.event);\n          var nodeW = Math.min(300, Math.max(150, node.size[0]));\n          var nodeH = Math.min(260, Math.max(80, node.size[1]));\n          node.size = [nodeW, nodeH];\n          // hide the preview node behind the searchbox\n          var screenCenterMockEvent = {\n            clientX: _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_2__.ComnfyUIapp.canvasEl.getBoundingClientRect().width / 2 - node.size[0] / 2,\n            clientY: _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_2__.ComnfyUIapp.canvasEl.getBoundingClientRect().height / 2 - node.size[1] / 2 + LiteGraph.NODE_TITLE_HEIGHT\n          };\n          node.pos = LGraphCanvas.active_canvas.convertEventToCanvasOffset(screenCenterMockEvent);\n          _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_2__.ComnfyUIapp.graph.add(node, false);\n          var nodeClipTopRightPos = _this8.canvasToViewportCoordinates(_ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_2__.ComnfyUIapp.canvasEl, node.pos[0] + offset[0], node.pos[1] + offset[1] - LiteGraph.NODE_TITLE_HEIGHT);\n          var nodeClipSize = [_this8.canvasElement.width, _this8.canvasElement.height];\n          var sx = (nodeClipTopRightPos[0] - (nodeClipSize[0] - nodeW) / 2 - 20) * scale,\n            sy = (nodeClipTopRightPos[1] - (nodeClipSize[1] - nodeH) / 2 - 20) * scale,\n            sWidth = nodeClipSize[0] * scale * 1.1,\n            sHeight = nodeClipSize[1] * scale * 1.1,\n            dx = 0,\n            dy = 0,\n            dWidth = nodeClipSize[0],\n            dHeight = nodeClipSize[1];\n          setTimeout(function () {\n            _this8.canvasElement.getContext(\'2d\').clearRect(0, 0, _this8.canvasElement.width, _this8.canvasElement.height);\n            _this8.canvasElement.getContext(\'2d\').drawImage(_ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_2__.ComnfyUIapp.canvasEl, sx, sy, sWidth, sHeight, dx, dy, dWidth, dHeight);\n          }, 100);\n        }\n      }, 0);\n    }\n  }, {\n    key: "canvasToViewportCoordinates",\n    value: function canvasToViewportCoordinates(canvas, canvasX, canvasY) {\n      var rect = canvas.getBoundingClientRect();\n      var viewportX = canvasX + rect.left;\n      var viewportY = canvasY + rect.top;\n      return [viewportX, viewportY];\n    }\n  }, {\n    key: "onResultClick",\n    value: function onResultClick(result, event) {\n      var name = result.category;\n      if (name) {\n        if (this.onSearchBoxSelection) {\n          this.onSearchBoxSelection(name, event, _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_2__.ComnfyUIapp.canvas);\n        } else {\n          var extra = LiteGraph.searchbox_extras[name.toLowerCase()];\n          if (extra) {\n            name = extra.type;\n          }\n          _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_2__.ComnfyUIapp.graph.beforeChange();\n          var node = LiteGraph.createNode(name);\n          if (node) {\n            if (this.isScaled) {\n              var screenCenterMockEvent = {\n                clientX: _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_2__.ComnfyUIapp.canvasEl.getBoundingClientRect().width / 2 - node.size[0] / 2,\n                clientY: _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_2__.ComnfyUIapp.canvasEl.getBoundingClientRect().height / 2 - node.size[1] / 2 + LiteGraph.NODE_TITLE_HEIGHT\n              };\n              node.pos = LGraphCanvas.active_canvas.convertEventToCanvasOffset(screenCenterMockEvent);\n            } else {\n              node.pos = _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_2__.ComnfyUIapp.canvas.convertEventToCanvasOffset(event);\n            }\n            _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_2__.ComnfyUIapp.graph.add(node, false);\n          }\n\n          // join node after inserting\n          if (this.options.node_from) {\n            var iS = false;\n            switch (_typeof(this.options.slot_from)) {\n              case "string":\n                iS = this.options.node_from.findOutputSlot(this.options.slot_from);\n                break;\n              case "object":\n                if (this.options.slot_from.name) {\n                  iS = this.options.node_from.findOutputSlot(this.options.slot_from.name);\n                } else {\n                  iS = -1;\n                }\n                if (iS == -1 && typeof this.options.slot_from.slot_index !== "undefined") iS = this.options.slot_from.slot_index;\n                break;\n              case "number":\n                iS = this.options.slot_from;\n                break;\n              default:\n                iS = 0;\n              // try with first if no name set\n            }\n            if (typeof this.options.node_from.outputs[iS] !== "undefined") {\n              if (iS !== false && iS > -1) {\n                this.options.node_from.connectByType(iS, node, this.options.node_from.outputs[iS].type);\n              }\n            } else {\n              // console.warn("cant find slot " + options.slot_from);\n            }\n          }\n          if (this.options.node_to) {\n            var iS = false;\n            switch (_typeof(this.options.slot_from)) {\n              case "string":\n                iS = this.options.node_to.findInputSlot(this.options.slot_from);\n                break;\n              case "object":\n                if (this.options.slot_from.name) {\n                  iS = this.options.node_to.findInputSlot(this.options.slot_from.name);\n                } else {\n                  iS = -1;\n                }\n                if (iS == -1 && typeof this.options.slot_from.slot_index !== "undefined") iS = this.options.slot_from.slot_index;\n                break;\n              case "number":\n                iS = this.options.slot_from;\n                break;\n              default:\n                iS = 0;\n              // try with first if no name set\n            }\n            if (typeof this.options.node_to.inputs[iS] !== "undefined") {\n              if (iS !== false && iS > -1) {\n                // try connection\n                this.options.node_to.connectByTypeOutput(iS, node, this.options.node_to.inputs[iS].type);\n              }\n            } else {\n              // console.warn("cant find slot_nodeTO " + options.slot_from);\n            }\n          }\n          _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_2__.ComnfyUIapp.graph.afterChange();\n        }\n      }\n      this.nodeSearchData[result.title].use_count++;\n      this.nodeSearchData[result.title].last_use = Date.now();\n      this.closeSearchBox();\n      this.storeNodesearchFiles(this.nodeSearchData);\n    }\n  }, {\n    key: "closeSearchBox",\n    value: function closeSearchBox() {\n      // this.element.style.display = \'none\';\n      var _iterator6 = _createForOfIteratorHelper(this.previewNodes),\n        _step6;\n      try {\n        for (_iterator6.s(); !(_step6 = _iterator6.n()).done;) {\n          var previewNode = _step6.value;\n          _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_2__.ComnfyUIapp.graph.remove(previewNode);\n        }\n      } catch (err) {\n        _iterator6.e(err);\n      } finally {\n        _iterator6.f();\n      }\n      if (this.element.parentElement) {\n        document.body.removeChild(this.element);\n      }\n      // this.restoreCanvasState();\n    }\n  }, {\n    key: "storeNodesearchFiles",\n    value: function () {\n      var _storeNodesearchFiles = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee5(data) {\n        var response, result;\n        return _regeneratorRuntime().wrap(function _callee5$(_context5) {\n          while (1) switch (_context5.prev = _context5.next) {\n            case 0:\n              _context5.prev = 0;\n              _context5.next = 3;\n              return fetch(\'/comfyux_store_nodesearch_files\', {\n                method: \'POST\',\n                headers: {\n                  \'Content-Type\': \'application/json\'\n                },\n                body: JSON.stringify(data)\n              });\n            case 3:\n              response = _context5.sent;\n              _context5.next = 6;\n              return response.json();\n            case 6:\n              result = _context5.sent;\n              console.log(\'Store Recent Files Result:\', result);\n              _context5.next = 13;\n              break;\n            case 10:\n              _context5.prev = 10;\n              _context5.t0 = _context5["catch"](0);\n              console.error(\'Error storing recent files:\', _context5.t0);\n            case 13:\n            case "end":\n              return _context5.stop();\n          }\n        }, _callee5, null, [[0, 10]]);\n      }));\n      function storeNodesearchFiles(_x) {\n        return _storeNodesearchFiles.apply(this, arguments);\n      }\n      return storeNodesearchFiles;\n    }()\n  }, {\n    key: "applyFilters",\n    value: function applyFilters() {\n      var filteredResults = Object.values(this.nodeSearchData);\n      var inputFilterValue = this.inputFilter.selectedOption;\n      if (inputFilterValue !== \'( All )\') {\n        filteredResults = filteredResults.filter(function (node) {\n          return node.inputs.some(function (input) {\n            return input === inputFilterValue;\n          });\n        });\n      }\n      var outputFilterValue = this.outputFilter.selectedOption;\n      if (outputFilterValue !== \'( All )\') {\n        filteredResults = filteredResults.filter(function (node) {\n          return node.outputs.some(function (output) {\n            return output === outputFilterValue;\n          });\n        });\n      }\n      this.updateResults(filteredResults);\n    }\n  }]);\n}();\n\n//# sourceURL=webpack://comfyux-dev/./WebExtension/component/js/searchbox.js?');
        /***/    },
    /***/ "./WebExtension/component/js/singleinput.js": 
    /*!**************************************************!*\
  !*** ./WebExtension/component/js/singleinput.js ***!
  \**************************************************/
    /***/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
        eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SingleInput: () => (/* binding */ SingleInput)\n/* harmony export */ });\n/* harmony import */ var _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../ComfyUIConnector.js */ \"./WebExtension/ComfyUIConnector.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n\nvar SingleInput = /*#__PURE__*/function () {\n  function SingleInput(_ref) {\n    var title = _ref.title,\n      placeholder = _ref.placeholder,\n      value = _ref.value,\n      showFavIcon = _ref.showFavIcon,\n      fav = _ref.fav,\n      leftIcon = _ref.leftIcon,\n      callbacks = _ref.callbacks;\n    _classCallCheck(this, SingleInput);\n    this.title = title;\n    this.placeholder = placeholder;\n    this.value = value;\n    this.callbacks = callbacks;\n    this.leftIcon = leftIcon;\n    this.showFavIcon = showFavIcon;\n    this.fav = fav;\n    this.element;\n    this.init();\n    this.editting = false;\n  }\n  return _createClass(SingleInput, [{\n    key: \"init\",\n    value: function init() {\n      var _this = this;\n      this.rowElement = document.createElement('div');\n      this.rowElement.className = 'row';\n      this.element = this.rowElement;\n      this.favElement = document.createElement('div');\n      this.favElement.className = 'fav';\n      this.favElement.addEventListener('click', function () {\n        return _this.handleFav();\n      });\n      this.favIconElement = document.createElement('img');\n      this.favElement.appendChild(this.favIconElement);\n      if (this.fav) {\n        this.favIconElement.src = _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_0__.staticPath + 'component/img/fav_sel.png';\n      } else {\n        this.favIconElement.src = _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_0__.staticPath + 'component/img/fav_nor.png';\n      }\n      if (!this.showFavIcon) {\n        this.favElement.style.display = 'none';\n      }\n      this.container = document.createElement('div');\n      this.container.className = 'single-input-container';\n\n      //hover effect\n      this.container.onmousemove = function (e) {\n        var rect = _this.container.getBoundingClientRect();\n        var x = e.clientX - rect.left;\n        var y = e.clientY - rect.top;\n        _this.container.style.setProperty(\"--mouse-x\", \"\".concat(x, \"px\"));\n        _this.container.style.setProperty(\"--mouse-y\", \"\".concat(y, \"px\"));\n      };\n      var leftSection = document.createElement('div');\n      leftSection.className = 'left-section';\n      var leftIconImg = document.createElement('img');\n      leftIconImg.src = this.leftIcon;\n      var titleSpan = document.createElement('span');\n      titleSpan.textContent = this.title;\n      leftSection.appendChild(leftIconImg);\n      leftSection.appendChild(titleSpan);\n      var rightSection = document.createElement('div');\n      rightSection.className = 'right-section';\n      var input = document.createElement('input');\n      input.className = 'right-input';\n      input.type = 'text';\n      input.placeholder = this.placeholder;\n      input.value = this.value;\n      input.addEventListener('input', function (e) {\n        _this.editting = true;\n        if (_this.callbacks.onEdit) {\n          _this.callbacks.onEdit(_this.editting);\n        }\n      });\n      input.addEventListener('blur', function (e) {\n        _this.editting = false;\n        if (_this.callbacks.onEdit) {\n          _this.callbacks.onEdit(_this.editting);\n        }\n      });\n      input.addEventListener('focus', function () {\n        this.select();\n      });\n      input.addEventListener('change', function (e) {\n        _this.value = e.target.value.toString();\n        if (_this.callbacks.onChange) {\n          _this.callbacks.onChange(_this.value);\n        }\n      });\n      rightSection.appendChild(input);\n      this.container.appendChild(leftSection);\n      this.container.appendChild(rightSection);\n      this.rowElement.appendChild(this.container);\n      this.rowElement.appendChild(this.favElement);\n    }\n  }, {\n    key: \"getElement\",\n    value: function getElement() {\n      return this.element;\n    }\n  }, {\n    key: \"handleFav\",\n    value: function handleFav() {\n      if (this.fav) {\n        this.fav = false;\n        this.favElement.querySelector('img').src = _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_0__.staticPath + 'component/img/fav_nor.png';\n      } else {\n        this.fav = true;\n        this.favElement.querySelector('img').src = _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_0__.staticPath + 'component/img/fav_sel.png';\n      }\n      if (this.callbacks.onFav) this.callbacks.onFav(this.fav);\n    }\n  }, {\n    key: \"setValue\",\n    value: function setValue(value) {\n      this.value = value;\n      this.element.querySelector('.right-input').value = value;\n    }\n  }, {\n    key: \"filter\",\n    value: function filter(isShow) {\n      if (isShow) {\n        this.element.style.display = 'inline-flex';\n      } else {\n        this.element.style.display = 'none';\n      }\n    }\n  }]);\n}();\n\n//# sourceURL=webpack://comfyux-dev/./WebExtension/component/js/singleinput.js?");
        /***/    },
    /***/ "./WebExtension/component/js/switch.js": 
    /*!*********************************************!*\
  !*** ./WebExtension/component/js/switch.js ***!
  \*********************************************/
    /***/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
        eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Switch: () => (/* binding */ Switch)\n/* harmony export */ });\n/* harmony import */ var _css_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./css.js */ \"./WebExtension/component/js/css.js\");\n/* harmony import */ var _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../ComfyUIConnector.js */ \"./WebExtension/ComfyUIConnector.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n\n\nvar Switch = /*#__PURE__*/function () {\n  function Switch(_ref) {\n    var icon = _ref.icon,\n      title = _ref.title,\n      value = _ref.value,\n      fav = _ref.fav,\n      showFavIcon = _ref.showFavIcon,\n      hintOn = _ref.hintOn,\n      hintOff = _ref.hintOff,\n      onChange = _ref.onChange,\n      callbacks = _ref.callbacks;\n    _classCallCheck(this, Switch);\n    this.icon = icon;\n    this.title = title;\n    this.value = value;\n    if (hintOn) {\n      this.hintOn = hintOn;\n    } else {\n      this.hintOn = \"True\";\n    }\n    if (hintOff) {\n      this.hintOff = hintOff;\n    } else {\n      this.hintOff = \"False\";\n    }\n    this.callbacks = callbacks;\n    this.showFavIcon = showFavIcon;\n    this.fav = fav;\n    this.onChange = onChange;\n    this.element = this.createSwitch();\n  }\n  return _createClass(Switch, [{\n    key: \"createSwitch\",\n    value: function createSwitch() {\n      var _this = this;\n      this.rowElement = document.createElement('div');\n      this.rowElement.className = 'row';\n      this.favElement = document.createElement('div');\n      this.favElement.className = 'fav';\n      this.favElement.addEventListener('click', function () {\n        return _this.handleFav();\n      });\n      this.favIconElement = document.createElement('img');\n      this.favElement.appendChild(this.favIconElement);\n      if (this.fav) {\n        this.favIconElement.src = _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_1__.staticPath + 'component/img/fav_sel.png';\n      } else {\n        this.favIconElement.src = _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_1__.staticPath + 'component/img/fav_nor.png';\n      }\n      if (!this.showFavIcon) {\n        this.favElement.style.display = 'none';\n      }\n      var switchContainer = document.createElement('div');\n      this.switchContainer = switchContainer;\n      switchContainer.className = 'switch-container';\n\n      //hover effect\n      switchContainer.onmousemove = function (e) {\n        var rect = switchContainer.getBoundingClientRect();\n        var x = e.clientX - rect.left;\n        var y = e.clientY - rect.top;\n        switchContainer.style.setProperty(\"--mouse-x\", \"\".concat(x, \"px\"));\n        switchContainer.style.setProperty(\"--mouse-y\", \"\".concat(y, \"px\"));\n      };\n      var switchLeft = document.createElement('div');\n      switchLeft.className = 'switch-left';\n      if (this.icon) {\n        var iconElement = document.createElement('span');\n        iconElement.className = 'icon';\n        var iconImg = document.createElement('img');\n        iconImg.src = this.icon;\n        iconElement.appendChild(iconImg);\n        switchLeft.appendChild(iconElement);\n      }\n      var titleElement = document.createElement('span');\n      this.titleElement = titleElement;\n      titleElement.className = 'title';\n      titleElement.innerText = this.title;\n      switchLeft.appendChild(titleElement);\n      var switchRight = document.createElement('div');\n      switchRight.className = 'switch-right';\n      var hintElement = document.createElement('span');\n      this.hintElement = hintElement;\n      hintElement.className = 'hint';\n      if (this.value) {\n        hintElement.innerText = this.hintOn;\n      } else {\n        hintElement.innerText = this.hintOff;\n      }\n      var switchElement = document.createElement('label');\n      switchElement.className = 'switch';\n      var inputElement = document.createElement('input');\n      this.inputElement = inputElement;\n      inputElement.type = 'checkbox';\n      inputElement.addEventListener('change', function () {\n        _this.onChange(inputElement.checked, hintElement);\n        if (_this.value) {\n          hintElement.innerText = _this.hintOn;\n        } else {\n          hintElement.innerText = _this.hintOff;\n        }\n      });\n      if (this.value) {\n        inputElement.checked;\n      }\n      var sliderElement = document.createElement('span');\n      sliderElement.className = 'slider';\n      switchElement.appendChild(inputElement);\n      switchElement.appendChild(sliderElement);\n      switchRight.appendChild(hintElement);\n      switchRight.appendChild(switchElement);\n      switchContainer.appendChild(switchLeft);\n      switchContainer.appendChild(switchRight);\n      this.rowElement.appendChild(switchContainer);\n      this.rowElement.appendChild(this.favElement);\n      switchContainer.addEventListener('click', function () {\n        _this.value = !inputElement.checked;\n        inputElement.checked = !inputElement.checked;\n        if (_this.value) {\n          hintElement.innerText = _this.hintOn;\n        } else {\n          hintElement.innerText = _this.hintOff;\n        }\n        _this.onChange(inputElement.checked, hintElement);\n      });\n      return this.rowElement;\n    }\n  }, {\n    key: \"init\",\n    value: function init(container) {\n      container.appendChild(this.element);\n    }\n  }, {\n    key: \"handleFav\",\n    value: function handleFav() {\n      if (this.fav) {\n        this.fav = false;\n        this.favElement.querySelector('img').src = _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_1__.staticPath + 'component/img/fav_nor.png';\n      } else {\n        this.fav = true;\n        this.favElement.querySelector('img').src = _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_1__.staticPath + 'component/img/fav_sel.png';\n      }\n      if (this.callbacks.onFav) this.callbacks.onFav(this.fav);\n    }\n  }, {\n    key: \"setValue\",\n    value: function setValue(value) {\n      this.value = value;\n      this.inputElement.checked = value;\n      if (this.value) {\n        this.hintElement.innerText = this.hintOn;\n      } else {\n        this.hintElement.innerText = this.hintOff;\n      }\n    }\n  }, {\n    key: \"filter\",\n    value: function filter(isShow) {\n      if (isShow) {\n        this.element.style.display = 'inline-flex';\n      } else {\n        this.element.style.display = 'none';\n      }\n    }\n  }]);\n}();\n\n//# sourceURL=webpack://comfyux-dev/./WebExtension/component/js/switch.js?");
        /***/    },
    /***/ "./WebExtension/component/js/tab.js": 
    /*!******************************************!*\
  !*** ./WebExtension/component/js/tab.js ***!
  \******************************************/
    /***/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
        eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Tab: () => (/* binding */ Tab)\n/* harmony export */ });\n/* harmony import */ var _css_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./css.js */ "./WebExtension/component/js/css.js");\n/* harmony import */ var _ComfyUIConnector_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../ComfyUIConnector.js */ "./WebExtension/ComfyUIConnector.js");\nfunction _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }\nfunction _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }\n\n\nvar Tab = /*#__PURE__*/function () {\n  function Tab(_ref) {\n    var tabs = _ref.tabs,\n      contents = _ref.contents,\n      callbacks = _ref.callbacks;\n    _classCallCheck(this, Tab);\n    this.tabs = tabs;\n    this.callbacks = callbacks;\n    this.contents = contents;\n    this.currentIndex = 0;\n    this.element = this.createTab();\n  }\n  return _createClass(Tab, [{\n    key: "createTab",\n    value: function createTab() {\n      var _this = this;\n      var container = document.createElement(\'div\');\n      container.className = \'tab-container\';\n      var tabBar = document.createElement(\'div\');\n      tabBar.className = \'tab-bar\';\n\n      //hover effect\n      tabBar.onmousemove = function (e) {\n        var rect = tabBar.getBoundingClientRect();\n        var x = e.clientX - rect.left;\n        var y = e.clientY - rect.top;\n        tabBar.style.setProperty("--mouse-x", "".concat(x, "px"));\n        tabBar.style.setProperty("--mouse-y", "".concat(y, "px"));\n      };\n      var filterElement = document.createElement(\'div\');\n      filterElement.className = \'filter-area\';\n      this.tabs.forEach(function (tab, index) {\n        var tabItem = document.createElement(\'div\');\n        tabItem.className = \'tab-item \' + index;\n        tabItem.setAttribute("data-i18n", tab.title);\n        tabItem.textContent = tab.title;\n        if (tab.disabled) {\n          tabItem.classList.add(\'disabled\');\n        } else {\n          tabItem.onclick = function () {\n            return _this.selectTab(index);\n          };\n        }\n        if (index === _this.currentIndex) {\n          tabItem.classList.add(\'selected\');\n        }\n        tabBar.appendChild(tabItem);\n      });\n      var contentArea = document.createElement(\'div\');\n      contentArea.className = \'tab-content\';\n      this.contents.forEach(function (content, index) {\n        content.className = \'tab-panel \' + index;\n        if (index === _this.currentIndex) {\n          content.classList.add(\'active\');\n        }\n        contentArea.appendChild(content);\n      });\n      container.appendChild(tabBar);\n      container.appendChild(filterElement);\n      container.appendChild(contentArea);\n      this.tabBar = tabBar;\n      this.contentArea = contentArea;\n      return container;\n    }\n  }, {\n    key: "selectTab",\n    value: function selectTab(index) {\n      if (index === this.currentIndex || this.tabs[index].disabled) {\n        return;\n      }\n      if (this.callbacks) {\n        this.callbacks.onTabClick(index);\n      }\n      var previousIndex = this.currentIndex;\n      this.currentIndex = index;\n      var tabItems = this.tabBar.querySelectorAll(\'.tab-item\');\n      tabItems[previousIndex].classList.remove(\'selected\');\n      tabItems[this.currentIndex].classList.add(\'selected\');\n      var contentPanels = this.contentArea.querySelectorAll(\'.tab-panel\');\n      contentPanels[previousIndex].classList.remove(\'active\');\n      contentPanels[previousIndex].classList.add(\'previous\');\n      contentPanels[this.currentIndex].classList.add(\'active\');\n      setTimeout(function () {\n        contentPanels[previousIndex].classList.remove(\'previous\');\n      }, 500);\n    }\n  }, {\n    key: "renameTab",\n    value: function renameTab(index, value) {\n      var tabItems = this.tabBar.querySelectorAll(\'.tab-item\');\n      tabItems[index].textContent = value;\n    }\n  }, {\n    key: "addElement",\n    value: function addElement(contentPanel, content) {\n      contentPanel.appendChild(content);\n    }\n  }]);\n}();\n\n//# sourceURL=webpack://comfyux-dev/./WebExtension/component/js/tab.js?');
        /***/    },
    /***/ "./WebExtension/gtag.js": 
    /*!******************************!*\
  !*** ./WebExtension/gtag.js ***!
  \******************************/
    /***/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
        eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Gtag: () => (/* binding */ Gtag)\n/* harmony export */ });\nfunction _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }\nfunction _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }\nvar Gtag = /*#__PURE__*/function () {\n  function Gtag() {\n    _classCallCheck(this, Gtag);\n    this.init();\n  }\n  return _createClass(Gtag, [{\n    key: "init",\n    value: function init() {\n      var scriptTag1 = document.createElement(\'script\');\n      scriptTag1.src = \'https://www.googletagmanager.com/gtag/js?id=G-KEPHTF86C6\';\n      scriptTag1.async = true;\n      (document.head || document.body).appendChild(scriptTag1);\n      scriptTag1.onload = function () {\n        var codeToInsert = "\\n            window.dataLayer = window.dataLayer || [];\\n            function gtag(){dataLayer.push(arguments);}\\n        \\n            gtag(\'js\', new Date());\\n            gtag(\'config\', \'G-KEPHTF86C6\');\\n            ";\n        var newScript = document.createElement(\'script\');\n        newScript.text = codeToInsert;\n        var head = document.getElementsByTagName(\'head\')[0];\n        head.appendChild(newScript);\n      };\n    }\n  }]);\n}();\n\n//# sourceURL=webpack://comfyux-dev/./WebExtension/gtag.js?');
        /***/    },
    /***/ "./WebExtension/i18n.js": 
    /*!******************************!*\
  !*** ./WebExtension/i18n.js ***!
  \******************************/
    /***/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
        eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   i18n: () => (/* binding */ i18n)\n/* harmony export */ });\nfunction _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }\nfunction _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }\n// sample use: button.textElement.setAttribute("data-i18n", "QueueFront");\nvar translations = {\n  en: {\n    Load: "Load",\n    LoadDefault: "Load Default",\n    Save: "Save",\n    Run: "Run",\n    AddToRun: "Add To Run",\n    QueueFront: "Queue Front",\n    Update: "Update",\n    Nodes: "Nodes",\n    History: "History",\n    All: "All",\n    Favorite: "Favorite",\n    Notnull: "Notnull",\n    Record: "Record",\n    Done: "Done",\n    Running: "Running",\n    Waitting: "Waitting",\n    Restore: "Restore",\n    Lang: "中文",\n    Gallery: "Gallery",\n    ClickToSearch: "Click to Search"\n  },\n  zh: {\n    Load: "导入",\n    LoadDefault: "导入默认",\n    Save: "保存",\n    Run: "运行",\n    AddToRun: "加入队列",\n    QueueFront: "下一个运行",\n    Update: "更新",\n    Nodes: "节点",\n    History: "历史",\n    All: "全部",\n    Favorite: "收藏",\n    Notnull: "非空",\n    Record: "记录",\n    Done: "完成",\n    Running: "运行中",\n    Waitting: "等待中",\n    Restore: "恢复",\n    Lang: "English",\n    Gallery: "展馆",\n    ClickToSearch: "点击搜索"\n  }\n};\nvar i18n = /*#__PURE__*/function () {\n  function i18n() {\n    _classCallCheck(this, i18n);\n    this.currentLanguage = \'en\';\n    this.translations = translations;\n  }\n  return _createClass(i18n, [{\n    key: "setLanguage",\n    value: function setLanguage(language) {\n      this.currentLanguage = language;\n      document.querySelectorAll("[data-i18n]").forEach(function (element) {\n        var key = element.getAttribute("data-i18n");\n        element.textContent = translations[language][key];\n      });\n    }\n  }]);\n}();\n\n//# sourceURL=webpack://comfyux-dev/./WebExtension/i18n.js?');
        /***/    },
    /***/ "./WebExtension/update.js": 
    /*!********************************!*\
  !*** ./WebExtension/update.js ***!
  \********************************/
    /***/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
        eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Update: () => (/* binding */ Update)\n/* harmony export */ });\nfunction _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }\nfunction _regeneratorRuntime() { "use strict"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = "function" == typeof Symbol ? Symbol : {}, a = i.iterator || "@@iterator", c = i.asyncIterator || "@@asyncIterator", u = i.toStringTag || "@@toStringTag"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, ""); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, "_invoke", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: "normal", arg: t.call(e, r) }; } catch (t) { return { type: "throw", arg: t }; } } e.wrap = wrap; var h = "suspendedStart", l = "suspendedYield", f = "executing", s = "completed", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { ["next", "throw", "return"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if ("throw" !== c.type) { var u = c.arg, h = u.value; return h && "object" == _typeof(h) && n.call(h, "__await") ? e.resolve(h.__await).then(function (t) { invoke("next", t, i, a); }, function (t) { invoke("throw", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke("throw", t, i, a); }); } a(c.arg); } var r; o(this, "_invoke", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error("Generator is already running"); if (o === s) { if ("throw" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if ("next" === n.method) n.sent = n._sent = n.arg;else if ("throw" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else "return" === n.method && n.abrupt("return", n.arg); o = f; var p = tryCatch(e, r, n); if ("normal" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } "throw" === p.type && (o = s, n.method = "throw", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, "throw" === n && e.iterator["return"] && (r.method = "return", r.arg = t, maybeInvokeDelegate(e, r), "throw" === r.method) || "return" !== n && (r.method = "throw", r.arg = new TypeError("The iterator does not provide a \'" + n + "\' method")), y; var i = tryCatch(o, e.iterator, r.arg); if ("throw" === i.type) return r.method = "throw", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, "return" !== r.method && (r.method = "next", r.arg = t), r.delegate = null, y) : a : (r.method = "throw", r.arg = new TypeError("iterator result is not an object"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = "normal", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: "root" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || "" === e) { var r = e[a]; if (r) return r.call(e); if ("function" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + " is not iterable"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, "constructor", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, "constructor", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, "GeneratorFunction"), e.isGeneratorFunction = function (t) { var e = "function" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || "GeneratorFunction" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, "GeneratorFunction")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, "Generator"), define(g, a, function () { return this; }), define(g, "toString", function () { return "[object Generator]"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = "next", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) "t" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if ("throw" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = "throw", a.arg = e, r.next = n, o && (r.method = "next", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if ("root" === i.tryLoc) return handle("end"); if (i.tryLoc <= this.prev) { var c = n.call(i, "catchLoc"), u = n.call(i, "finallyLoc"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error("try statement without catch or finally"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, "finallyLoc") && this.prev < o.finallyLoc) { var i = o; break; } } i && ("break" === t || "continue" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = "next", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if ("throw" === t.type) throw t.arg; return "break" === t.type || "continue" === t.type ? this.next = t.arg : "return" === t.type ? (this.rval = this.arg = t.arg, this.method = "return", this.next = "end") : "normal" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, "catch": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if ("throw" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error("illegal catch attempt"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, "next" === this.method && (this.arg = t), y; } }, e; }\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }\nfunction _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }\nfunction _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }\nvar Update = /*#__PURE__*/function () {\n  function Update(localVersionUrl, githubRepoOwner, githubRepoName, giteeRepoOwner, giteeRepoName) {\n    _classCallCheck(this, Update);\n    this.localVersionUrl = localVersionUrl;\n    this.localVersion;\n    this.targetVersion;\n    this.githubUrl = "https://github.com/".concat(githubRepoOwner, "/").concat(githubRepoName, "/releases/latest");\n    this.giteeUrl = "https://gitee.com/".concat(giteeRepoOwner, "/").concat(giteeRepoName, "/releases/latest");\n    this.gistUrl = \'https://googincheng.github.io/ComfyUX/WebExtension/version.json\';\n  }\n  return _createClass(Update, [{\n    key: "getLocalVersion",\n    value: function () {\n      var _getLocalVersion = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var response, data;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return fetch(this.localVersionUrl, {\n                cache: "reload"\n              });\n            case 3:\n              response = _context.sent;\n              _context.next = 6;\n              return response.json();\n            case 6:\n              data = _context.sent;\n              return _context.abrupt("return", data.version);\n            case 10:\n              _context.prev = 10;\n              _context.t0 = _context["catch"](0);\n              console.error("Error fetching local version: ".concat(_context.t0));\n              return _context.abrupt("return", null);\n            case 14:\n            case "end":\n              return _context.stop();\n          }\n        }, _callee, this, [[0, 10]]);\n      }));\n      function getLocalVersion() {\n        return _getLocalVersion.apply(this, arguments);\n      }\n      return getLocalVersion;\n    }()\n  }, {\n    key: "getLatestVersionFromGitHub",\n    value: function () {\n      var _getLatestVersionFromGitHub = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n        var response, resetTime, sleepTime, data;\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.prev = 0;\n              _context2.next = 3;\n              return fetch(this.gistUrl, {\n                cache: "reload"\n              });\n            case 3:\n              response = _context2.sent;\n              if (!(response.status === 403)) {\n                _context2.next = 11;\n                break;\n              }\n              resetTime = response.headers.get(\'X-RateLimit-Reset\') * 1000;\n              sleepTime = resetTime - Date.now() + 1000;\n              console.log("Rate limit exceeded. Retrying in ".concat(sleepTime / 1000, " seconds..."));\n              _context2.next = 10;\n              return new Promise(function (resolve) {\n                return setTimeout(resolve, sleepTime);\n              });\n            case 10:\n              return _context2.abrupt("return", this.getLatestVersionFromGitHub());\n            case 11:\n              if (response.ok) {\n                _context2.next = 13;\n                break;\n              }\n              throw new Error("HTTP error! status: ".concat(response.status));\n            case 13:\n              _context2.next = 15;\n              return response.json();\n            case 15:\n              data = _context2.sent;\n              return _context2.abrupt("return", data);\n            case 19:\n              _context2.prev = 19;\n              _context2.t0 = _context2["catch"](0);\n              console.error("Error fetching latest version from GitHub: ".concat(_context2.t0));\n              return _context2.abrupt("return", null);\n            case 23:\n            case "end":\n              return _context2.stop();\n          }\n        }, _callee2, this, [[0, 19]]);\n      }));\n      function getLatestVersionFromGitHub() {\n        return _getLatestVersionFromGitHub.apply(this, arguments);\n      }\n      return getLatestVersionFromGitHub;\n    }()\n  }, {\n    key: "checkForUpdates",\n    value: function () {\n      var _checkForUpdates = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {\n        var localVersion, latestVersionInfo, latestVersion, description, updateInfo;\n        return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n          while (1) switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.prev = 0;\n              _context3.next = 3;\n              return this.getLocalVersion();\n            case 3:\n              localVersion = _context3.sent;\n              this.localVersion = localVersion;\n              if (localVersion) {\n                _context3.next = 7;\n                break;\n              }\n              return _context3.abrupt("return", \'Error checking for updates.\');\n            case 7:\n              _context3.next = 9;\n              return this.getLatestVersionFromGitHub();\n            case 9:\n              latestVersionInfo = _context3.sent;\n              this.targetVersion = latestVersionInfo;\n              if (latestVersionInfo) {\n                _context3.next = 13;\n                break;\n              }\n              return _context3.abrupt("return", \'Error checking for updates.\');\n            case 13:\n              latestVersion = latestVersionInfo.version, description = latestVersionInfo.description;\n              updateInfo = {\n                "latestVersion": latestVersion,\n                "localVersion": localVersion,\n                "description": description,\n                "GiteeURL": this.giteeUrl,\n                "GitHubURL": this.githubUrl\n              };\n              return _context3.abrupt("return", updateInfo);\n            case 18:\n              _context3.prev = 18;\n              _context3.t0 = _context3["catch"](0);\n              console.error("Error checking for updates: ".concat(_context3.t0));\n              return _context3.abrupt("return", false);\n            case 22:\n            case "end":\n              return _context3.stop();\n          }\n        }, _callee3, this, [[0, 18]]);\n      }));\n      function checkForUpdates() {\n        return _checkForUpdates.apply(this, arguments);\n      }\n      return checkForUpdates;\n    }()\n  }]);\n}();\n\n//# sourceURL=webpack://comfyux-dev/./WebExtension/update.js?');
        /***/    },
    /***/ "../../scripts/api.js": 
    /*!***************************************!*\
  !*** external "../../scripts/api.js" ***!
  \***************************************/
    /***/ n => {
        n.exports = __WEBPACK_EXTERNAL_MODULE__scripts_api_js_7e0dfeef__;
        /***/    },
    /***/ "../../scripts/app.js": 
    /*!***************************************!*\
  !*** external "../../scripts/app.js" ***!
  \***************************************/
    /***/ n => {
        n.exports = __WEBPACK_EXTERNAL_MODULE__scripts_app_js_80311772__;
        /***/    },
    /***/ "../../scripts/ui.js": 
    /*!**************************************!*\
  !*** external "../../scripts/ui.js" ***!
  \**************************************/
    /***/ n => {
        n.exports = __WEBPACK_EXTERNAL_MODULE__scripts_ui_js_7b781880__;
        /***/    },
    /***/ "./WebExtension/component/js/fuse.basic.mjs": 
    /*!**************************************************!*\
  !*** ./WebExtension/component/js/fuse.basic.mjs ***!
  \**************************************************/
    /***/ (__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {
        eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ Fuse)\n/* harmony export */ });\n/**\n * Fuse.js v7.0.0 - Lightweight fuzzy-search (http://fusejs.io)\n *\n * Copyright (c) 2023 Kiro Risk (http://kiro.me)\n * All Rights Reserved. Apache Software License 2.0\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\nfunction isArray(value) {\n  return !Array.isArray\n    ? getTag(value) === '[object Array]'\n    : Array.isArray(value)\n}\n\n// Adapted from: https://github.com/lodash/lodash/blob/master/.internal/baseToString.js\nconst INFINITY = 1 / 0;\nfunction baseToString(value) {\n  // Exit early for strings to avoid a performance hit in some environments.\n  if (typeof value == 'string') {\n    return value\n  }\n  let result = value + '';\n  return result == '0' && 1 / value == -INFINITY ? '-0' : result\n}\n\nfunction toString(value) {\n  return value == null ? '' : baseToString(value)\n}\n\nfunction isString(value) {\n  return typeof value === 'string'\n}\n\nfunction isNumber(value) {\n  return typeof value === 'number'\n}\n\n// Adapted from: https://github.com/lodash/lodash/blob/master/isBoolean.js\nfunction isBoolean(value) {\n  return (\n    value === true ||\n    value === false ||\n    (isObjectLike(value) && getTag(value) == '[object Boolean]')\n  )\n}\n\nfunction isObject(value) {\n  return typeof value === 'object'\n}\n\n// Checks if `value` is object-like.\nfunction isObjectLike(value) {\n  return isObject(value) && value !== null\n}\n\nfunction isDefined(value) {\n  return value !== undefined && value !== null\n}\n\nfunction isBlank(value) {\n  return !value.trim().length\n}\n\n// Gets the `toStringTag` of `value`.\n// Adapted from: https://github.com/lodash/lodash/blob/master/.internal/getTag.js\nfunction getTag(value) {\n  return value == null\n    ? value === undefined\n      ? '[object Undefined]'\n      : '[object Null]'\n    : Object.prototype.toString.call(value)\n}\n\nconst EXTENDED_SEARCH_UNAVAILABLE = 'Extended search is not available';\n\nconst LOGICAL_SEARCH_UNAVAILABLE = 'Logical search is not available';\n\nconst INCORRECT_INDEX_TYPE = \"Incorrect 'index' type\";\n\nconst LOGICAL_SEARCH_INVALID_QUERY_FOR_KEY = (key) =>\n  `Invalid value for key ${key}`;\n\nconst PATTERN_LENGTH_TOO_LARGE = (max) =>\n  `Pattern length exceeds max of ${max}.`;\n\nconst MISSING_KEY_PROPERTY = (name) => `Missing ${name} property in key`;\n\nconst INVALID_KEY_WEIGHT_VALUE = (key) =>\n  `Property 'weight' in key '${key}' must be a positive integer`;\n\nconst hasOwn = Object.prototype.hasOwnProperty;\n\nclass KeyStore {\n  constructor(keys) {\n    this._keys = [];\n    this._keyMap = {};\n\n    let totalWeight = 0;\n\n    keys.forEach((key) => {\n      let obj = createKey(key);\n\n      this._keys.push(obj);\n      this._keyMap[obj.id] = obj;\n\n      totalWeight += obj.weight;\n    });\n\n    // Normalize weights so that their sum is equal to 1\n    this._keys.forEach((key) => {\n      key.weight /= totalWeight;\n    });\n  }\n  get(keyId) {\n    return this._keyMap[keyId]\n  }\n  keys() {\n    return this._keys\n  }\n  toJSON() {\n    return JSON.stringify(this._keys)\n  }\n}\n\nfunction createKey(key) {\n  let path = null;\n  let id = null;\n  let src = null;\n  let weight = 1;\n  let getFn = null;\n\n  if (isString(key) || isArray(key)) {\n    src = key;\n    path = createKeyPath(key);\n    id = createKeyId(key);\n  } else {\n    if (!hasOwn.call(key, 'name')) {\n      throw new Error(MISSING_KEY_PROPERTY('name'))\n    }\n\n    const name = key.name;\n    src = name;\n\n    if (hasOwn.call(key, 'weight')) {\n      weight = key.weight;\n\n      if (weight <= 0) {\n        throw new Error(INVALID_KEY_WEIGHT_VALUE(name))\n      }\n    }\n\n    path = createKeyPath(name);\n    id = createKeyId(name);\n    getFn = key.getFn;\n  }\n\n  return { path, id, weight, src, getFn }\n}\n\nfunction createKeyPath(key) {\n  return isArray(key) ? key : key.split('.')\n}\n\nfunction createKeyId(key) {\n  return isArray(key) ? key.join('.') : key\n}\n\nfunction get(obj, path) {\n  let list = [];\n  let arr = false;\n\n  const deepGet = (obj, path, index) => {\n    if (!isDefined(obj)) {\n      return\n    }\n    if (!path[index]) {\n      // If there's no path left, we've arrived at the object we care about.\n      list.push(obj);\n    } else {\n      let key = path[index];\n\n      const value = obj[key];\n\n      if (!isDefined(value)) {\n        return\n      }\n\n      // If we're at the last value in the path, and if it's a string/number/bool,\n      // add it to the list\n      if (\n        index === path.length - 1 &&\n        (isString(value) || isNumber(value) || isBoolean(value))\n      ) {\n        list.push(toString(value));\n      } else if (isArray(value)) {\n        arr = true;\n        // Search each item in the array.\n        for (let i = 0, len = value.length; i < len; i += 1) {\n          deepGet(value[i], path, index + 1);\n        }\n      } else if (path.length) {\n        // An object. Recurse further.\n        deepGet(value, path, index + 1);\n      }\n    }\n  };\n\n  // Backwards compatibility (since path used to be a string)\n  deepGet(obj, isString(path) ? path.split('.') : path, 0);\n\n  return arr ? list : list[0]\n}\n\nconst MatchOptions = {\n  // Whether the matches should be included in the result set. When `true`, each record in the result\n  // set will include the indices of the matched characters.\n  // These can consequently be used for highlighting purposes.\n  includeMatches: false,\n  // When `true`, the matching function will continue to the end of a search pattern even if\n  // a perfect match has already been located in the string.\n  findAllMatches: false,\n  // Minimum number of characters that must be matched before a result is considered a match\n  minMatchCharLength: 1\n};\n\nconst BasicOptions = {\n  // When `true`, the algorithm continues searching to the end of the input even if a perfect\n  // match is found before the end of the same input.\n  isCaseSensitive: false,\n  // When true, the matching function will continue to the end of a search pattern even if\n  includeScore: false,\n  // List of properties that will be searched. This also supports nested properties.\n  keys: [],\n  // Whether to sort the result list, by score\n  shouldSort: true,\n  // Default sort function: sort by ascending score, ascending index\n  sortFn: (a, b) =>\n    a.score === b.score ? (a.idx < b.idx ? -1 : 1) : a.score < b.score ? -1 : 1\n};\n\nconst FuzzyOptions = {\n  // Approximately where in the text is the pattern expected to be found?\n  location: 0,\n  // At what point does the match algorithm give up. A threshold of '0.0' requires a perfect match\n  // (of both letters and location), a threshold of '1.0' would match anything.\n  threshold: 0.6,\n  // Determines how close the match must be to the fuzzy location (specified above).\n  // An exact letter match which is 'distance' characters away from the fuzzy location\n  // would score as a complete mismatch. A distance of '0' requires the match be at\n  // the exact location specified, a threshold of '1000' would require a perfect match\n  // to be within 800 characters of the fuzzy location to be found using a 0.8 threshold.\n  distance: 100\n};\n\nconst AdvancedOptions = {\n  // When `true`, it enables the use of unix-like search commands\n  useExtendedSearch: false,\n  // The get function to use when fetching an object's properties.\n  // The default will search nested paths *ie foo.bar.baz*\n  getFn: get,\n  // When `true`, search will ignore `location` and `distance`, so it won't matter\n  // where in the string the pattern appears.\n  // More info: https://fusejs.io/concepts/scoring-theory.html#fuzziness-score\n  ignoreLocation: false,\n  // When `true`, the calculation for the relevance score (used for sorting) will\n  // ignore the field-length norm.\n  // More info: https://fusejs.io/concepts/scoring-theory.html#field-length-norm\n  ignoreFieldNorm: false,\n  // The weight to determine how much field length norm effects scoring.\n  fieldNormWeight: 1\n};\n\nvar Config = {\n  ...BasicOptions,\n  ...MatchOptions,\n  ...FuzzyOptions,\n  ...AdvancedOptions\n};\n\nconst SPACE = /[^ ]+/g;\n\n// Field-length norm: the shorter the field, the higher the weight.\n// Set to 3 decimals to reduce index size.\nfunction norm(weight = 1, mantissa = 3) {\n  const cache = new Map();\n  const m = Math.pow(10, mantissa);\n\n  return {\n    get(value) {\n      const numTokens = value.match(SPACE).length;\n\n      if (cache.has(numTokens)) {\n        return cache.get(numTokens)\n      }\n\n      // Default function is 1/sqrt(x), weight makes that variable\n      const norm = 1 / Math.pow(numTokens, 0.5 * weight);\n\n      // In place of `toFixed(mantissa)`, for faster computation\n      const n = parseFloat(Math.round(norm * m) / m);\n\n      cache.set(numTokens, n);\n\n      return n\n    },\n    clear() {\n      cache.clear();\n    }\n  }\n}\n\nclass FuseIndex {\n  constructor({\n    getFn = Config.getFn,\n    fieldNormWeight = Config.fieldNormWeight\n  } = {}) {\n    this.norm = norm(fieldNormWeight, 3);\n    this.getFn = getFn;\n    this.isCreated = false;\n\n    this.setIndexRecords();\n  }\n  setSources(docs = []) {\n    this.docs = docs;\n  }\n  setIndexRecords(records = []) {\n    this.records = records;\n  }\n  setKeys(keys = []) {\n    this.keys = keys;\n    this._keysMap = {};\n    keys.forEach((key, idx) => {\n      this._keysMap[key.id] = idx;\n    });\n  }\n  create() {\n    if (this.isCreated || !this.docs.length) {\n      return\n    }\n\n    this.isCreated = true;\n\n    // List is Array<String>\n    if (isString(this.docs[0])) {\n      this.docs.forEach((doc, docIndex) => {\n        this._addString(doc, docIndex);\n      });\n    } else {\n      // List is Array<Object>\n      this.docs.forEach((doc, docIndex) => {\n        this._addObject(doc, docIndex);\n      });\n    }\n\n    this.norm.clear();\n  }\n  // Adds a doc to the end of the index\n  add(doc) {\n    const idx = this.size();\n\n    if (isString(doc)) {\n      this._addString(doc, idx);\n    } else {\n      this._addObject(doc, idx);\n    }\n  }\n  // Removes the doc at the specified index of the index\n  removeAt(idx) {\n    this.records.splice(idx, 1);\n\n    // Change ref index of every subsquent doc\n    for (let i = idx, len = this.size(); i < len; i += 1) {\n      this.records[i].i -= 1;\n    }\n  }\n  getValueForItemAtKeyId(item, keyId) {\n    return item[this._keysMap[keyId]]\n  }\n  size() {\n    return this.records.length\n  }\n  _addString(doc, docIndex) {\n    if (!isDefined(doc) || isBlank(doc)) {\n      return\n    }\n\n    let record = {\n      v: doc,\n      i: docIndex,\n      n: this.norm.get(doc)\n    };\n\n    this.records.push(record);\n  }\n  _addObject(doc, docIndex) {\n    let record = { i: docIndex, $: {} };\n\n    // Iterate over every key (i.e, path), and fetch the value at that key\n    this.keys.forEach((key, keyIndex) => {\n      let value = key.getFn ? key.getFn(doc) : this.getFn(doc, key.path);\n\n      if (!isDefined(value)) {\n        return\n      }\n\n      if (isArray(value)) {\n        let subRecords = [];\n        const stack = [{ nestedArrIndex: -1, value }];\n\n        while (stack.length) {\n          const { nestedArrIndex, value } = stack.pop();\n\n          if (!isDefined(value)) {\n            continue\n          }\n\n          if (isString(value) && !isBlank(value)) {\n            let subRecord = {\n              v: value,\n              i: nestedArrIndex,\n              n: this.norm.get(value)\n            };\n\n            subRecords.push(subRecord);\n          } else if (isArray(value)) {\n            value.forEach((item, k) => {\n              stack.push({\n                nestedArrIndex: k,\n                value: item\n              });\n            });\n          } else ;\n        }\n        record.$[keyIndex] = subRecords;\n      } else if (isString(value) && !isBlank(value)) {\n        let subRecord = {\n          v: value,\n          n: this.norm.get(value)\n        };\n\n        record.$[keyIndex] = subRecord;\n      }\n    });\n\n    this.records.push(record);\n  }\n  toJSON() {\n    return {\n      keys: this.keys,\n      records: this.records\n    }\n  }\n}\n\nfunction createIndex(\n  keys,\n  docs,\n  { getFn = Config.getFn, fieldNormWeight = Config.fieldNormWeight } = {}\n) {\n  const myIndex = new FuseIndex({ getFn, fieldNormWeight });\n  myIndex.setKeys(keys.map(createKey));\n  myIndex.setSources(docs);\n  myIndex.create();\n  return myIndex\n}\n\nfunction parseIndex(\n  data,\n  { getFn = Config.getFn, fieldNormWeight = Config.fieldNormWeight } = {}\n) {\n  const { keys, records } = data;\n  const myIndex = new FuseIndex({ getFn, fieldNormWeight });\n  myIndex.setKeys(keys);\n  myIndex.setIndexRecords(records);\n  return myIndex\n}\n\nfunction computeScore$1(\n  pattern,\n  {\n    errors = 0,\n    currentLocation = 0,\n    expectedLocation = 0,\n    distance = Config.distance,\n    ignoreLocation = Config.ignoreLocation\n  } = {}\n) {\n  const accuracy = errors / pattern.length;\n\n  if (ignoreLocation) {\n    return accuracy\n  }\n\n  const proximity = Math.abs(expectedLocation - currentLocation);\n\n  if (!distance) {\n    // Dodge divide by zero error.\n    return proximity ? 1.0 : accuracy\n  }\n\n  return accuracy + proximity / distance\n}\n\nfunction convertMaskToIndices(\n  matchmask = [],\n  minMatchCharLength = Config.minMatchCharLength\n) {\n  let indices = [];\n  let start = -1;\n  let end = -1;\n  let i = 0;\n\n  for (let len = matchmask.length; i < len; i += 1) {\n    let match = matchmask[i];\n    if (match && start === -1) {\n      start = i;\n    } else if (!match && start !== -1) {\n      end = i - 1;\n      if (end - start + 1 >= minMatchCharLength) {\n        indices.push([start, end]);\n      }\n      start = -1;\n    }\n  }\n\n  // (i-1 - start) + 1 => i - start\n  if (matchmask[i - 1] && i - start >= minMatchCharLength) {\n    indices.push([start, i - 1]);\n  }\n\n  return indices\n}\n\n// Machine word size\nconst MAX_BITS = 32;\n\nfunction search(\n  text,\n  pattern,\n  patternAlphabet,\n  {\n    location = Config.location,\n    distance = Config.distance,\n    threshold = Config.threshold,\n    findAllMatches = Config.findAllMatches,\n    minMatchCharLength = Config.minMatchCharLength,\n    includeMatches = Config.includeMatches,\n    ignoreLocation = Config.ignoreLocation\n  } = {}\n) {\n  if (pattern.length > MAX_BITS) {\n    throw new Error(PATTERN_LENGTH_TOO_LARGE(MAX_BITS))\n  }\n\n  const patternLen = pattern.length;\n  // Set starting location at beginning text and initialize the alphabet.\n  const textLen = text.length;\n  // Handle the case when location > text.length\n  const expectedLocation = Math.max(0, Math.min(location, textLen));\n  // Highest score beyond which we give up.\n  let currentThreshold = threshold;\n  // Is there a nearby exact match? (speedup)\n  let bestLocation = expectedLocation;\n\n  // Performance: only computer matches when the minMatchCharLength > 1\n  // OR if `includeMatches` is true.\n  const computeMatches = minMatchCharLength > 1 || includeMatches;\n  // A mask of the matches, used for building the indices\n  const matchMask = computeMatches ? Array(textLen) : [];\n\n  let index;\n\n  // Get all exact matches, here for speed up\n  while ((index = text.indexOf(pattern, bestLocation)) > -1) {\n    let score = computeScore$1(pattern, {\n      currentLocation: index,\n      expectedLocation,\n      distance,\n      ignoreLocation\n    });\n\n    currentThreshold = Math.min(score, currentThreshold);\n    bestLocation = index + patternLen;\n\n    if (computeMatches) {\n      let i = 0;\n      while (i < patternLen) {\n        matchMask[index + i] = 1;\n        i += 1;\n      }\n    }\n  }\n\n  // Reset the best location\n  bestLocation = -1;\n\n  let lastBitArr = [];\n  let finalScore = 1;\n  let binMax = patternLen + textLen;\n\n  const mask = 1 << (patternLen - 1);\n\n  for (let i = 0; i < patternLen; i += 1) {\n    // Scan for the best match; each iteration allows for one more error.\n    // Run a binary search to determine how far from the match location we can stray\n    // at this error level.\n    let binMin = 0;\n    let binMid = binMax;\n\n    while (binMin < binMid) {\n      const score = computeScore$1(pattern, {\n        errors: i,\n        currentLocation: expectedLocation + binMid,\n        expectedLocation,\n        distance,\n        ignoreLocation\n      });\n\n      if (score <= currentThreshold) {\n        binMin = binMid;\n      } else {\n        binMax = binMid;\n      }\n\n      binMid = Math.floor((binMax - binMin) / 2 + binMin);\n    }\n\n    // Use the result from this iteration as the maximum for the next.\n    binMax = binMid;\n\n    let start = Math.max(1, expectedLocation - binMid + 1);\n    let finish = findAllMatches\n      ? textLen\n      : Math.min(expectedLocation + binMid, textLen) + patternLen;\n\n    // Initialize the bit array\n    let bitArr = Array(finish + 2);\n\n    bitArr[finish + 1] = (1 << i) - 1;\n\n    for (let j = finish; j >= start; j -= 1) {\n      let currentLocation = j - 1;\n      let charMatch = patternAlphabet[text.charAt(currentLocation)];\n\n      if (computeMatches) {\n        // Speed up: quick bool to int conversion (i.e, `charMatch ? 1 : 0`)\n        matchMask[currentLocation] = +!!charMatch;\n      }\n\n      // First pass: exact match\n      bitArr[j] = ((bitArr[j + 1] << 1) | 1) & charMatch;\n\n      // Subsequent passes: fuzzy match\n      if (i) {\n        bitArr[j] |=\n          ((lastBitArr[j + 1] | lastBitArr[j]) << 1) | 1 | lastBitArr[j + 1];\n      }\n\n      if (bitArr[j] & mask) {\n        finalScore = computeScore$1(pattern, {\n          errors: i,\n          currentLocation,\n          expectedLocation,\n          distance,\n          ignoreLocation\n        });\n\n        // This match will almost certainly be better than any existing match.\n        // But check anyway.\n        if (finalScore <= currentThreshold) {\n          // Indeed it is\n          currentThreshold = finalScore;\n          bestLocation = currentLocation;\n\n          // Already passed `loc`, downhill from here on in.\n          if (bestLocation <= expectedLocation) {\n            break\n          }\n\n          // When passing `bestLocation`, don't exceed our current distance from `expectedLocation`.\n          start = Math.max(1, 2 * expectedLocation - bestLocation);\n        }\n      }\n    }\n\n    // No hope for a (better) match at greater error levels.\n    const score = computeScore$1(pattern, {\n      errors: i + 1,\n      currentLocation: expectedLocation,\n      expectedLocation,\n      distance,\n      ignoreLocation\n    });\n\n    if (score > currentThreshold) {\n      break\n    }\n\n    lastBitArr = bitArr;\n  }\n\n  const result = {\n    isMatch: bestLocation >= 0,\n    // Count exact matches (those with a score of 0) to be \"almost\" exact\n    score: Math.max(0.001, finalScore)\n  };\n\n  if (computeMatches) {\n    const indices = convertMaskToIndices(matchMask, minMatchCharLength);\n    if (!indices.length) {\n      result.isMatch = false;\n    } else if (includeMatches) {\n      result.indices = indices;\n    }\n  }\n\n  return result\n}\n\nfunction createPatternAlphabet(pattern) {\n  let mask = {};\n\n  for (let i = 0, len = pattern.length; i < len; i += 1) {\n    const char = pattern.charAt(i);\n    mask[char] = (mask[char] || 0) | (1 << (len - i - 1));\n  }\n\n  return mask\n}\n\nclass BitapSearch {\n  constructor(\n    pattern,\n    {\n      location = Config.location,\n      threshold = Config.threshold,\n      distance = Config.distance,\n      includeMatches = Config.includeMatches,\n      findAllMatches = Config.findAllMatches,\n      minMatchCharLength = Config.minMatchCharLength,\n      isCaseSensitive = Config.isCaseSensitive,\n      ignoreLocation = Config.ignoreLocation\n    } = {}\n  ) {\n    this.options = {\n      location,\n      threshold,\n      distance,\n      includeMatches,\n      findAllMatches,\n      minMatchCharLength,\n      isCaseSensitive,\n      ignoreLocation\n    };\n\n    this.pattern = isCaseSensitive ? pattern : pattern.toLowerCase();\n\n    this.chunks = [];\n\n    if (!this.pattern.length) {\n      return\n    }\n\n    const addChunk = (pattern, startIndex) => {\n      this.chunks.push({\n        pattern,\n        alphabet: createPatternAlphabet(pattern),\n        startIndex\n      });\n    };\n\n    const len = this.pattern.length;\n\n    if (len > MAX_BITS) {\n      let i = 0;\n      const remainder = len % MAX_BITS;\n      const end = len - remainder;\n\n      while (i < end) {\n        addChunk(this.pattern.substr(i, MAX_BITS), i);\n        i += MAX_BITS;\n      }\n\n      if (remainder) {\n        const startIndex = len - MAX_BITS;\n        addChunk(this.pattern.substr(startIndex), startIndex);\n      }\n    } else {\n      addChunk(this.pattern, 0);\n    }\n  }\n\n  searchIn(text) {\n    const { isCaseSensitive, includeMatches } = this.options;\n\n    if (!isCaseSensitive) {\n      text = text.toLowerCase();\n    }\n\n    // Exact match\n    if (this.pattern === text) {\n      let result = {\n        isMatch: true,\n        score: 0\n      };\n\n      if (includeMatches) {\n        result.indices = [[0, text.length - 1]];\n      }\n\n      return result\n    }\n\n    // Otherwise, use Bitap algorithm\n    const {\n      location,\n      distance,\n      threshold,\n      findAllMatches,\n      minMatchCharLength,\n      ignoreLocation\n    } = this.options;\n\n    let allIndices = [];\n    let totalScore = 0;\n    let hasMatches = false;\n\n    this.chunks.forEach(({ pattern, alphabet, startIndex }) => {\n      const { isMatch, score, indices } = search(text, pattern, alphabet, {\n        location: location + startIndex,\n        distance,\n        threshold,\n        findAllMatches,\n        minMatchCharLength,\n        includeMatches,\n        ignoreLocation\n      });\n\n      if (isMatch) {\n        hasMatches = true;\n      }\n\n      totalScore += score;\n\n      if (isMatch && indices) {\n        allIndices = [...allIndices, ...indices];\n      }\n    });\n\n    let result = {\n      isMatch: hasMatches,\n      score: hasMatches ? totalScore / this.chunks.length : 1\n    };\n\n    if (hasMatches && includeMatches) {\n      result.indices = allIndices;\n    }\n\n    return result\n  }\n}\n\nconst registeredSearchers = [];\n\nfunction createSearcher(pattern, options) {\n  for (let i = 0, len = registeredSearchers.length; i < len; i += 1) {\n    let searcherClass = registeredSearchers[i];\n    if (searcherClass.condition(pattern, options)) {\n      return new searcherClass(pattern, options)\n    }\n  }\n\n  return new BitapSearch(pattern, options)\n}\n\nconst LogicalOperator = {\n  AND: '$and',\n  OR: '$or'\n};\n\nconst KeyType = {\n  PATH: '$path',\n  PATTERN: '$val'\n};\n\nconst isExpression = (query) =>\n  !!(query[LogicalOperator.AND] || query[LogicalOperator.OR]);\n\nconst isPath = (query) => !!query[KeyType.PATH];\n\nconst isLeaf = (query) =>\n  !isArray(query) && isObject(query) && !isExpression(query);\n\nconst convertToExplicit = (query) => ({\n  [LogicalOperator.AND]: Object.keys(query).map((key) => ({\n    [key]: query[key]\n  }))\n});\n\n// When `auto` is `true`, the parse function will infer and initialize and add\n// the appropriate `Searcher` instance\nfunction parse(query, options, { auto = true } = {}) {\n  const next = (query) => {\n    let keys = Object.keys(query);\n\n    const isQueryPath = isPath(query);\n\n    if (!isQueryPath && keys.length > 1 && !isExpression(query)) {\n      return next(convertToExplicit(query))\n    }\n\n    if (isLeaf(query)) {\n      const key = isQueryPath ? query[KeyType.PATH] : keys[0];\n\n      const pattern = isQueryPath ? query[KeyType.PATTERN] : query[key];\n\n      if (!isString(pattern)) {\n        throw new Error(LOGICAL_SEARCH_INVALID_QUERY_FOR_KEY(key))\n      }\n\n      const obj = {\n        keyId: createKeyId(key),\n        pattern\n      };\n\n      if (auto) {\n        obj.searcher = createSearcher(pattern, options);\n      }\n\n      return obj\n    }\n\n    let node = {\n      children: [],\n      operator: keys[0]\n    };\n\n    keys.forEach((key) => {\n      const value = query[key];\n\n      if (isArray(value)) {\n        value.forEach((item) => {\n          node.children.push(next(item));\n        });\n      }\n    });\n\n    return node\n  };\n\n  if (!isExpression(query)) {\n    query = convertToExplicit(query);\n  }\n\n  return next(query)\n}\n\n// Practical scoring function\nfunction computeScore(\n  results,\n  { ignoreFieldNorm = Config.ignoreFieldNorm }\n) {\n  results.forEach((result) => {\n    let totalScore = 1;\n\n    result.matches.forEach(({ key, norm, score }) => {\n      const weight = key ? key.weight : null;\n\n      totalScore *= Math.pow(\n        score === 0 && weight ? Number.EPSILON : score,\n        (weight || 1) * (ignoreFieldNorm ? 1 : norm)\n      );\n    });\n\n    result.score = totalScore;\n  });\n}\n\nfunction transformMatches(result, data) {\n  const matches = result.matches;\n  data.matches = [];\n\n  if (!isDefined(matches)) {\n    return\n  }\n\n  matches.forEach((match) => {\n    if (!isDefined(match.indices) || !match.indices.length) {\n      return\n    }\n\n    const { indices, value } = match;\n\n    let obj = {\n      indices,\n      value\n    };\n\n    if (match.key) {\n      obj.key = match.key.src;\n    }\n\n    if (match.idx > -1) {\n      obj.refIndex = match.idx;\n    }\n\n    data.matches.push(obj);\n  });\n}\n\nfunction transformScore(result, data) {\n  data.score = result.score;\n}\n\nfunction format(\n  results,\n  docs,\n  {\n    includeMatches = Config.includeMatches,\n    includeScore = Config.includeScore\n  } = {}\n) {\n  const transformers = [];\n\n  if (includeMatches) transformers.push(transformMatches);\n  if (includeScore) transformers.push(transformScore);\n\n  return results.map((result) => {\n    const { idx } = result;\n\n    const data = {\n      item: docs[idx],\n      refIndex: idx\n    };\n\n    if (transformers.length) {\n      transformers.forEach((transformer) => {\n        transformer(result, data);\n      });\n    }\n\n    return data\n  })\n}\n\nclass Fuse {\n  constructor(docs, options = {}, index) {\n    this.options = { ...Config, ...options };\n\n    if (\n      this.options.useExtendedSearch &&\n      !false\n    ) {\n      throw new Error(EXTENDED_SEARCH_UNAVAILABLE)\n    }\n\n    this._keyStore = new KeyStore(this.options.keys);\n\n    this.setCollection(docs, index);\n  }\n\n  setCollection(docs, index) {\n    this._docs = docs;\n\n    if (index && !(index instanceof FuseIndex)) {\n      throw new Error(INCORRECT_INDEX_TYPE)\n    }\n\n    this._myIndex =\n      index ||\n      createIndex(this.options.keys, this._docs, {\n        getFn: this.options.getFn,\n        fieldNormWeight: this.options.fieldNormWeight\n      });\n  }\n\n  add(doc) {\n    if (!isDefined(doc)) {\n      return\n    }\n\n    this._docs.push(doc);\n    this._myIndex.add(doc);\n  }\n\n  remove(predicate = (/* doc, idx */) => false) {\n    const results = [];\n\n    for (let i = 0, len = this._docs.length; i < len; i += 1) {\n      const doc = this._docs[i];\n      if (predicate(doc, i)) {\n        this.removeAt(i);\n        i -= 1;\n        len -= 1;\n\n        results.push(doc);\n      }\n    }\n\n    return results\n  }\n\n  removeAt(idx) {\n    this._docs.splice(idx, 1);\n    this._myIndex.removeAt(idx);\n  }\n\n  getIndex() {\n    return this._myIndex\n  }\n\n  search(query, { limit = -1 } = {}) {\n    const {\n      includeMatches,\n      includeScore,\n      shouldSort,\n      sortFn,\n      ignoreFieldNorm\n    } = this.options;\n\n    let results = isString(query)\n      ? isString(this._docs[0])\n        ? this._searchStringList(query)\n        : this._searchObjectList(query)\n      : this._searchLogical(query);\n\n    computeScore(results, { ignoreFieldNorm });\n\n    if (shouldSort) {\n      results.sort(sortFn);\n    }\n\n    if (isNumber(limit) && limit > -1) {\n      results = results.slice(0, limit);\n    }\n\n    return format(results, this._docs, {\n      includeMatches,\n      includeScore\n    })\n  }\n\n  _searchStringList(query) {\n    const searcher = createSearcher(query, this.options);\n    const { records } = this._myIndex;\n    const results = [];\n\n    // Iterate over every string in the index\n    records.forEach(({ v: text, i: idx, n: norm }) => {\n      if (!isDefined(text)) {\n        return\n      }\n\n      const { isMatch, score, indices } = searcher.searchIn(text);\n\n      if (isMatch) {\n        results.push({\n          item: text,\n          idx,\n          matches: [{ score, value: text, norm, indices }]\n        });\n      }\n    });\n\n    return results\n  }\n\n  _searchLogical(query) {\n    {\n      throw new Error(LOGICAL_SEARCH_UNAVAILABLE)\n    }\n  }\n\n  _searchObjectList(query) {\n    const searcher = createSearcher(query, this.options);\n    const { keys, records } = this._myIndex;\n    const results = [];\n\n    // List is Array<Object>\n    records.forEach(({ $: item, i: idx }) => {\n      if (!isDefined(item)) {\n        return\n      }\n\n      let matches = [];\n\n      // Iterate over every key (i.e, path), and fetch the value at that key\n      keys.forEach((key, keyIndex) => {\n        matches.push(\n          ...this._findMatches({\n            key,\n            value: item[keyIndex],\n            searcher\n          })\n        );\n      });\n\n      if (matches.length) {\n        results.push({\n          idx,\n          item,\n          matches\n        });\n      }\n    });\n\n    return results\n  }\n  _findMatches({ key, value, searcher }) {\n    if (!isDefined(value)) {\n      return []\n    }\n\n    let matches = [];\n\n    if (isArray(value)) {\n      value.forEach(({ v: text, i: idx, n: norm }) => {\n        if (!isDefined(text)) {\n          return\n        }\n\n        const { isMatch, score, indices } = searcher.searchIn(text);\n\n        if (isMatch) {\n          matches.push({\n            score,\n            key,\n            value: text,\n            idx,\n            norm,\n            indices\n          });\n        }\n      });\n    } else {\n      const { v: text, n: norm } = value;\n\n      const { isMatch, score, indices } = searcher.searchIn(text);\n\n      if (isMatch) {\n        matches.push({ score, key, value: text, norm, indices });\n      }\n    }\n\n    return matches\n  }\n}\n\nFuse.version = '7.0.0';\nFuse.createIndex = createIndex;\nFuse.parseIndex = parseIndex;\nFuse.config = Config;\n\n{\n  Fuse.parseQuery = parse;\n}\n\n\n\n\n//# sourceURL=webpack://comfyux-dev/./WebExtension/component/js/fuse.basic.mjs?");
        /***/
        /******/    }
}, __webpack_module_cache__ = {};

/************************************************************************/
/******/ // The module cache
/******/
/******/
/******/ // The require function
/******/ function __webpack_require__(n) {
    /******/ // Check if module is in cache
    /******/ var e = __webpack_module_cache__[n];
    /******/    if (void 0 !== e) 
    /******/ return e.exports;
    /******/
    /******/ // Create a new module (and put it into the cache)
    /******/    var t = __webpack_module_cache__[n] = {
        /******/ // no module.id needed
        /******/ // no module.loaded needed
        /******/ exports: {}
        /******/    };
    /******/
    /******/ // Execute the module function
    /******/    
    /******/
    /******/ // Return the exports of the module
    /******/ return __webpack_modules__[n](t, t.exports, __webpack_require__), t.exports;
    /******/}

/******/
/************************************************************************/
/******/ /* webpack/runtime/define property getters */
/******/
/******/ // define getter functions for harmony exports
/******/ __webpack_require__.d = (n, e) => {
    /******/ for (var t in e) 
    /******/ __webpack_require__.o(e, t) && !__webpack_require__.o(n, t) && 
    /******/ Object.defineProperty(n, t, {
        enumerable: !0,
        get: e[t]
    })
    /******/;
    /******/}, 
/******/ __webpack_require__.o = (n, e) => Object.prototype.hasOwnProperty.call(n, e)
/******/ , 
/******/ // define __esModule on exports
/******/ __webpack_require__.r = n => {
    /******/ "undefined" != typeof Symbol && Symbol.toStringTag && 
    /******/ Object.defineProperty(n, Symbol.toStringTag, {
        value: "Module"
    })
    /******/ , Object.defineProperty(n, "__esModule", {
        value: !0
    });
}
/******/;

/******/
/************************************************************************/
/******/
/******/ // startup
/******/ // Load entry module and return exports
/******/ // This entry module is referenced by other modules so it can't be inlined
/******/ var __webpack_exports__ = __webpack_require__("./WebExtension/ComfyUX.js"), __webpack_exports__ComfyUXi18n = __webpack_exports__.ComfyUXi18n, __webpack_exports__NodeListOfSidebar = __webpack_exports__.NodeListOfSidebar, __webpack_exports__NodeNullCount = __webpack_exports__.NodeNullCount, __webpack_exports__clearAll = __webpack_exports__.clearAll, __webpack_exports__favWidgetCount = __webpack_exports__.favWidgetCount;

/******/
/******/ export { __webpack_exports__ComfyUXi18n as ComfyUXi18n, __webpack_exports__NodeListOfSidebar as NodeListOfSidebar, __webpack_exports__NodeNullCount as NodeNullCount, __webpack_exports__clearAll as clearAll, __webpack_exports__favWidgetCount as favWidgetCount };
/******/